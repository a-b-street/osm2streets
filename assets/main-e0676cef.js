import{l as Rt,d as ir,i as Ur,s as Vr,a as Ie,m as nr,b as ar,J as Fr,c as or,e as sr,f as lr,g as Kr,h as hr}from"./@vite-plugin-wasm-pack@osm2streets-js-117107a9.js";(async()=>{(()=>{var nt={9705:(l,h,a)=>{var u=a(1540);function p(y){var d=[1/0,1/0,-1/0,-1/0];return u.coordEach(y,function(C){d[0]>C[0]&&(d[0]=C[0]),d[1]>C[1]&&(d[1]=C[1]),d[2]<C[0]&&(d[2]=C[0]),d[3]<C[1]&&(d[3]=C[1])}),d}p.default=p,h.Z=p},4102:(l,h)=>{function a(P,S,D){D===void 0&&(D={});var f={type:"Feature"};return(D.id===0||D.id)&&(f.id=D.id),D.bbox&&(f.bbox=D.bbox),f.properties=S||{},f.geometry=P,f}function u(P,S,D){if(D===void 0&&(D={}),!P)throw new Error("coordinates is required");if(!Array.isArray(P))throw new Error("coordinates must be an Array");if(P.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!I(P[0])||!I(P[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:P},S,D)}function p(P,S,D){D===void 0&&(D={});for(var f=0,x=P;f<x.length;f++){var O=x[f];if(O.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var V=0;V<O[O.length-1].length;V++)if(O[O.length-1][V]!==O[0][V])throw new Error("First and last Position are not equivalent.")}return a({type:"Polygon",coordinates:P},S,D)}function y(P,S,D){if(D===void 0&&(D={}),P.length<2)throw new Error("coordinates must be an array of two or more positions");return a({type:"LineString",coordinates:P},S,D)}function d(P,S){S===void 0&&(S={});var D={type:"FeatureCollection"};return S.id&&(D.id=S.id),S.bbox&&(D.bbox=S.bbox),D.features=P,D}function C(P,S,D){return D===void 0&&(D={}),a({type:"MultiLineString",coordinates:P},S,D)}function j(P,S,D){return D===void 0&&(D={}),a({type:"MultiPoint",coordinates:P},S,D)}function A(P,S,D){return D===void 0&&(D={}),a({type:"MultiPolygon",coordinates:P},S,D)}function K(P,S){S===void 0&&(S="kilometers");var D=h.factors[S];if(!D)throw new Error(S+" units is invalid");return P*D}function R(P,S){S===void 0&&(S="kilometers");var D=h.factors[S];if(!D)throw new Error(S+" units is invalid");return P/D}function E(P){return 180*(P%(2*Math.PI))/Math.PI}function I(P){return!isNaN(P)&&P!==null&&!Array.isArray(P)}Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:100*h.earthRadius,centimetres:100*h.earthRadius,degrees:h.earthRadius/111325,feet:3.28084*h.earthRadius,inches:39.37*h.earthRadius,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:1e3*h.earthRadius,millimetres:1e3*h.earthRadius,nauticalmiles:h.earthRadius/1852,radians:1,yards:1.0936*h.earthRadius},h.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},h.feature=a,h.geometry=function(P,S,D){switch(P){case"Point":return u(S).geometry;case"LineString":return y(S).geometry;case"Polygon":return p(S).geometry;case"MultiPoint":return j(S).geometry;case"MultiLineString":return C(S).geometry;case"MultiPolygon":return A(S).geometry;default:throw new Error(P+" is invalid")}},h.point=u,h.points=function(P,S,D){return D===void 0&&(D={}),d(P.map(function(f){return u(f,S)}),D)},h.polygon=p,h.polygons=function(P,S,D){return D===void 0&&(D={}),d(P.map(function(f){return p(f,S)}),D)},h.lineString=y,h.lineStrings=function(P,S,D){return D===void 0&&(D={}),d(P.map(function(f){return y(f,S)}),D)},h.featureCollection=d,h.multiLineString=C,h.multiPoint=j,h.multiPolygon=A,h.geometryCollection=function(P,S,D){return D===void 0&&(D={}),a({type:"GeometryCollection",geometries:P},S,D)},h.round=function(P,S){if(S===void 0&&(S=0),S&&!(S>=0))throw new Error("precision must be a positive number");var D=Math.pow(10,S||0);return Math.round(P*D)/D},h.radiansToLength=K,h.lengthToRadians=R,h.lengthToDegrees=function(P,S){return E(R(P,S))},h.bearingToAzimuth=function(P){var S=P%360;return S<0&&(S+=360),S},h.radiansToDegrees=E,h.degreesToRadians=function(P){return P%360*Math.PI/180},h.convertLength=function(P,S,D){if(S===void 0&&(S="kilometers"),D===void 0&&(D="kilometers"),!(P>=0))throw new Error("length must be a positive number");return K(R(P,S),D)},h.convertArea=function(P,S,D){if(S===void 0&&(S="meters"),D===void 0&&(D="kilometers"),!(P>=0))throw new Error("area must be a positive number");var f=h.areaFactors[S];if(!f)throw new Error("invalid original units");var x=h.areaFactors[D];if(!x)throw new Error("invalid final units");return P/f*x},h.isNumber=I,h.isObject=function(P){return!!P&&P.constructor===Object},h.validateBBox=function(P){if(!P)throw new Error("bbox is required");if(!Array.isArray(P))throw new Error("bbox must be an Array");if(P.length!==4&&P.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");P.forEach(function(S){if(!I(S))throw new Error("bbox must only contain numbers")})},h.validateId=function(P){if(!P)throw new Error("id is required");if(["string","number"].indexOf(typeof P)===-1)throw new Error("id must be a number or a string")}},1540:(l,h,a)=>{Object.defineProperty(h,"__esModule",{value:!0});var u=a(4102);function p(R,E,I){if(R!==null)for(var P,S,D,f,x,O,V,Y,X=0,$=0,Q=R.type,Z=Q==="FeatureCollection",W=Q==="Feature",ut=Z?R.features.length:1,tt=0;tt<ut;tt++){x=(Y=!!(V=Z?R.features[tt].geometry:W?R.geometry:R)&&V.type==="GeometryCollection")?V.geometries.length:1;for(var ht=0;ht<x;ht++){var vt=0,ct=0;if((f=Y?V.geometries[ht]:V)!==null){O=f.coordinates;var Lt=f.type;switch(X=!I||Lt!=="Polygon"&&Lt!=="MultiPolygon"?0:1,Lt){case null:break;case"Point":if(E(O,$,tt,vt,ct)===!1)return!1;$++,vt++;break;case"LineString":case"MultiPoint":for(P=0;P<O.length;P++){if(E(O[P],$,tt,vt,ct)===!1)return!1;$++,Lt==="MultiPoint"&&vt++}Lt==="LineString"&&vt++;break;case"Polygon":case"MultiLineString":for(P=0;P<O.length;P++){for(S=0;S<O[P].length-X;S++){if(E(O[P][S],$,tt,vt,ct)===!1)return!1;$++}Lt==="MultiLineString"&&vt++,Lt==="Polygon"&&ct++}Lt==="Polygon"&&vt++;break;case"MultiPolygon":for(P=0;P<O.length;P++){for(ct=0,S=0;S<O[P].length;S++){for(D=0;D<O[P][S].length-X;D++){if(E(O[P][S][D],$,tt,vt,ct)===!1)return!1;$++}ct++}vt++}break;case"GeometryCollection":for(P=0;P<f.geometries.length;P++)if(p(f.geometries[P],E,I)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function y(R,E){var I;switch(R.type){case"FeatureCollection":for(I=0;I<R.features.length&&E(R.features[I].properties,I)!==!1;I++);break;case"Feature":E(R.properties,0)}}function d(R,E){if(R.type==="Feature")E(R,0);else if(R.type==="FeatureCollection")for(var I=0;I<R.features.length&&E(R.features[I],I)!==!1;I++);}function C(R,E){var I,P,S,D,f,x,O,V,Y,X,$=0,Q=R.type==="FeatureCollection",Z=R.type==="Feature",W=Q?R.features.length:1;for(I=0;I<W;I++){for(x=Q?R.features[I].geometry:Z?R.geometry:R,V=Q?R.features[I].properties:Z?R.properties:{},Y=Q?R.features[I].bbox:Z?R.bbox:void 0,X=Q?R.features[I].id:Z?R.id:void 0,f=(O=!!x&&x.type==="GeometryCollection")?x.geometries.length:1,S=0;S<f;S++)if((D=O?x.geometries[S]:x)!==null)switch(D.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(E(D,$,V,Y,X)===!1)return!1;break;case"GeometryCollection":for(P=0;P<D.geometries.length;P++)if(E(D.geometries[P],$,V,Y,X)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(E(null,$,V,Y,X)===!1)return!1;$++}}function j(R,E){C(R,function(I,P,S,D,f){var x,O=I===null?null:I.type;switch(O){case null:case"Point":case"LineString":case"Polygon":return E(u.feature(I,S,{bbox:D,id:f}),P,0)!==!1&&void 0}switch(O){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon"}for(var V=0;V<I.coordinates.length;V++){var Y={type:x,coordinates:I.coordinates[V]};if(E(u.feature(Y,S),P,V)===!1)return!1}})}function A(R,E){j(R,function(I,P,S){var D=0;if(I.geometry){var f=I.geometry.type;if(f!=="Point"&&f!=="MultiPoint"){var x,O=0,V=0,Y=0;return p(I,function(X,$,Q,Z,W){if(x===void 0||P>O||Z>V||W>Y)return x=X,O=P,V=Z,Y=W,void(D=0);var ut=u.lineString([x,X],I.properties);if(E(ut,P,S,W,D)===!1)return!1;D++,x=X})!==!1&&void 0}}})}function K(R,E){if(!R)throw new Error("geojson is required");j(R,function(I,P,S){if(I.geometry!==null){var D=I.geometry.type,f=I.geometry.coordinates;switch(D){case"LineString":if(E(I,P,S,0,0)===!1)return!1;break;case"Polygon":for(var x=0;x<f.length;x++)if(E(u.lineString(f[x],I.properties),P,S,x)===!1)return!1}}})}h.coordAll=function(R){var E=[];return p(R,function(I){E.push(I)}),E},h.coordEach=p,h.coordReduce=function(R,E,I,P){var S=I;return p(R,function(D,f,x,O,V){S=f===0&&I===void 0?D:E(S,D,f,x,O,V)},P),S},h.featureEach=d,h.featureReduce=function(R,E,I){var P=I;return d(R,function(S,D){P=D===0&&I===void 0?S:E(P,S,D)}),P},h.findPoint=function(R,E){if(E=E||{},!u.isObject(E))throw new Error("options is invalid");var I,P=E.featureIndex||0,S=E.multiFeatureIndex||0,D=E.geometryIndex||0,f=E.coordIndex||0,x=E.properties;switch(R.type){case"FeatureCollection":P<0&&(P=R.features.length+P),x=x||R.features[P].properties,I=R.features[P].geometry;break;case"Feature":x=x||R.properties,I=R.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":I=R;break;default:throw new Error("geojson is invalid")}if(I===null)return null;var O=I.coordinates;switch(I.type){case"Point":return u.point(O,x,E);case"MultiPoint":return S<0&&(S=O.length+S),u.point(O[S],x,E);case"LineString":return f<0&&(f=O.length+f),u.point(O[f],x,E);case"Polygon":return D<0&&(D=O.length+D),f<0&&(f=O[D].length+f),u.point(O[D][f],x,E);case"MultiLineString":return S<0&&(S=O.length+S),f<0&&(f=O[S].length+f),u.point(O[S][f],x,E);case"MultiPolygon":return S<0&&(S=O.length+S),D<0&&(D=O[S].length+D),f<0&&(f=O[S][D].length-f),u.point(O[S][D][f],x,E)}throw new Error("geojson is invalid")},h.findSegment=function(R,E){if(E=E||{},!u.isObject(E))throw new Error("options is invalid");var I,P=E.featureIndex||0,S=E.multiFeatureIndex||0,D=E.geometryIndex||0,f=E.segmentIndex||0,x=E.properties;switch(R.type){case"FeatureCollection":P<0&&(P=R.features.length+P),x=x||R.features[P].properties,I=R.features[P].geometry;break;case"Feature":x=x||R.properties,I=R.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":I=R;break;default:throw new Error("geojson is invalid")}if(I===null)return null;var O=I.coordinates;switch(I.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=O.length+f-1),u.lineString([O[f],O[f+1]],x,E);case"Polygon":return D<0&&(D=O.length+D),f<0&&(f=O[D].length+f-1),u.lineString([O[D][f],O[D][f+1]],x,E);case"MultiLineString":return S<0&&(S=O.length+S),f<0&&(f=O[S].length+f-1),u.lineString([O[S][f],O[S][f+1]],x,E);case"MultiPolygon":return S<0&&(S=O.length+S),D<0&&(D=O[S].length+D),f<0&&(f=O[S][D].length-f-1),u.lineString([O[S][D][f],O[S][D][f+1]],x,E)}throw new Error("geojson is invalid")},h.flattenEach=j,h.flattenReduce=function(R,E,I){var P=I;return j(R,function(S,D,f){P=D===0&&f===0&&I===void 0?S:E(P,S,D,f)}),P},h.geomEach=C,h.geomReduce=function(R,E,I){var P=I;return C(R,function(S,D,f,x,O){P=D===0&&I===void 0?S:E(P,S,D,f,x,O)}),P},h.lineEach=K,h.lineReduce=function(R,E,I){var P=I;return K(R,function(S,D,f,x){P=D===0&&I===void 0?S:E(P,S,D,f,x)}),P},h.propEach=y,h.propReduce=function(R,E,I){var P=I;return y(R,function(S,D){P=D===0&&I===void 0?S:E(P,S,D)}),P},h.segmentEach=A,h.segmentReduce=function(R,E,I){var P=I,S=!1;return A(R,function(D,f,x,O,V){P=S===!1&&I===void 0?D:E(P,D,f,x,O,V),S=!0}),P}},8706:(l,h,a)=>{a(7107);var u=a(2492),p=a.n(u);const y=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text"}}'),d=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex l\xF6schen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer l\xF6schen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verkn\xFCpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen"}}'),C=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`),j=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),A=JSON.parse('{"tooltips":{"placeMarker":"Adaug\u0103 un punct","firstVertex":"Apas\u0103 aici pentru a ad\u0103uga primul Vertex","continueLine":"Apas\u0103 aici pentru a continua desenul","finishLine":"Apas\u0103 pe orice obiect pentru a finisa desenul","finishPoly":"Apas\u0103 pe primul obiect pentru a finisa","finishRect":"Apas\u0103 pentru a finisa","startCircle":"Apas\u0103 pentru a desena un cerc","finishCircle":"Apas\u0103 pentru a finisa un cerc","placeCircleMarker":"Adaug\u0103 un punct"},"actions":{"finish":"Termin\u0103","cancel":"Anuleaz\u0103","removeLastVertex":"\u0218terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug\u0103 o bulin\u0103","drawPolyButton":"Deseneaz\u0103 un poligon","drawLineButton":"Deseneaz\u0103 o linie","drawCircleButton":"Deseneaz\u0103 un cerc","drawRectButton":"Deseneaz\u0103 un dreptunghi","editButton":"Editeaz\u0103 straturile","dragButton":"Mut\u0103 straturile","cutButton":"Taie straturile","deleteButton":"\u0218terge straturile","drawCircleMarkerButton":"Deseneaz\u0103 marcatorul cercului","snappingButton":"Fixa\u021Bi marcatorul glisat pe alte straturi \u0219i v\xE2rfuri","pinningButton":"Fixa\u021Bi v\xE2rfurile partajate \xEEmpreun\u0103"}}'),K=JSON.parse('{"tooltips":{"placeMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0432\u044B\u0439 \u043E\u0431\u044A\u0435\u043A\u0442","continueLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435","finishLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F","finishPoly":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u043E\u0447\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","finishRect":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","startCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u0442\u0440 \u043A\u0440\u0443\u0433\u0430","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C","cancel":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C","removeLastVertex":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},"buttonTitles":{"drawMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u0438\u0433\u043E\u043D","drawLineButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0438\u0432\u0443\u044E","drawCircleButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0443\u0433","drawRectButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043B\u043E\u0439","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0441\u043B\u043E\u0439","cutButton":"\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043B\u043E\u0439","deleteButton":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043B\u043E\u0439","drawCircleMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u043A \u0434\u0440\u0443\u0433\u0438\u043C \u0441\u043B\u043E\u044F\u043C \u0438 \u0432\u0435\u0440\u0448\u0438\u043D\u0430\u043C","pinningButton":"\u0421\u0432\u044F\u0437\u0430\u0442\u044C \u043E\u0431\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435"}}'),R=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer v\xE9rtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del c\xEDrculo","finishCircle":"Presiona para finalizar el c\xEDrculo","placeCircleMarker":"Presiona para colocar un marcador de c\xEDrculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Pol\xEDgono","drawLineButton":"Dibujar L\xEDnea","drawCircleButton":"Dibujar C\xEDrculo","drawRectButton":"Dibujar Rect\xE1ngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de C\xEDrculo","snappingButton":"El marcador de Snap arrastrado a otras capas y v\xE9rtices","pinningButton":"Fijar juntos los v\xE9rtices compartidos"}}'),E=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te be\xEBindigen","finishPoly":"Klik op het eerst punt om te be\xEBindigen","finishRect":"Klik om te be\xEBindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te be\xEBindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),I=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer \xE0 dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"\xC9diter des calques","dragButton":"D\xE9placer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"\xC9pingler ensemble les sommets partag\xE9s","rotateButton":"Tourner des calques"}}`),P=JSON.parse('{"tooltips":{"placeMarker":"\u5355\u51FB\u653E\u7F6E\u6807\u8BB0","firstVertex":"\u5355\u51FB\u653E\u7F6E\u9996\u4E2A\u9876\u70B9","continueLine":"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236","finishLine":"\u5355\u51FB\u4EFB\u4F55\u5B58\u5728\u7684\u6807\u8BB0\u4EE5\u5B8C\u6210","finishPoly":"\u5355\u51FB\u7B2C\u4E00\u4E2A\u6807\u8BB0\u4EE5\u5B8C\u6210","finishRect":"\u5355\u51FB\u5B8C\u6210","startCircle":"\u5355\u51FB\u653E\u7F6E\u5706\u5FC3","finishCircle":"\u5355\u51FB\u5B8C\u6210\u5706\u5F62","placeCircleMarker":"\u70B9\u51FB\u653E\u7F6E\u5706\u5F62\u6807\u8BB0"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u540E\u7684\u9876\u70B9"},"buttonTitles":{"drawMarkerButton":"\u7ED8\u5236\u6807\u8BB0","drawPolyButton":"\u7ED8\u5236\u591A\u8FB9\u5F62","drawLineButton":"\u7ED8\u5236\u7EBF\u6BB5","drawCircleButton":"\u7ED8\u5236\u5706\u5F62","drawRectButton":"\u7ED8\u5236\u957F\u65B9\u5F62","editButton":"\u7F16\u8F91\u56FE\u5C42","dragButton":"\u62D6\u62FD\u56FE\u5C42","cutButton":"\u526A\u5207\u56FE\u5C42","deleteButton":"\u5220\u9664\u56FE\u5C42","drawCircleMarkerButton":"\u753B\u5706\u5708\u6807\u8BB0","snappingButton":"\u5C06\u62D6\u52A8\u7684\u6807\u8BB0\u6355\u6349\u5230\u5176\u4ED6\u56FE\u5C42\u548C\u9876\u70B9","pinningButton":"\u5C06\u5171\u4EAB\u9876\u70B9\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),S=JSON.parse('{"tooltips":{"placeMarker":"\u55AE\u64CA\u653E\u7F6E\u6A19\u8A18","firstVertex":"\u55AE\u64CA\u653E\u7F6E\u7B2C\u4E00\u500B\u9802\u9EDE","continueLine":"\u55AE\u64CA\u7E7C\u7E8C\u7E6A\u88FD","finishLine":"\u55AE\u64CA\u4EFB\u4F55\u5B58\u5728\u7684\u6A19\u8A18\u4EE5\u5B8C\u6210","finishPoly":"\u55AE\u64CA\u7B2C\u4E00\u500B\u6A19\u8A18\u4EE5\u5B8C\u6210","finishRect":"\u55AE\u64CA\u5B8C\u6210","startCircle":"\u55AE\u64CA\u653E\u7F6E\u5713\u5FC3","finishCircle":"\u55AE\u64CA\u5B8C\u6210\u5713\u5F62","placeCircleMarker":"\u9EDE\u64CA\u653E\u7F6E\u5713\u5F62\u6A19\u8A18"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u5F8C\u4E00\u500B\u9802\u9EDE"},"buttonTitles":{"drawMarkerButton":"\u653E\u7F6E\u6A19\u8A18","drawPolyButton":"\u7E6A\u88FD\u591A\u908A\u5F62","drawLineButton":"\u7E6A\u88FD\u7DDA\u6BB5","drawCircleButton":"\u7E6A\u88FD\u5713\u5F62","drawRectButton":"\u7E6A\u88FD\u65B9\u5F62","editButton":"\u7DE8\u8F2F\u5716\u5F62","dragButton":"\u79FB\u52D5\u5716\u5F62","cutButton":"\u88C1\u5207\u5716\u5F62","deleteButton":"\u522A\u9664\u5716\u5F62","drawCircleMarkerButton":"\u756B\u5713\u5708\u6A19\u8A18","snappingButton":"\u5C07\u62D6\u52D5\u7684\u6A19\u8A18\u5C0D\u9F4A\u5230\u5176\u4ED6\u5716\u5C64\u548C\u9802\u9EDE","pinningButton":"\u5C07\u5171\u4EAB\u9802\u9EDE\u56FA\u5B9A\u5728\u4E00\u8D77"}}'),D={en:y,de:d,it:C,id:j,ro:A,ru:K,es:R,nl:E,fr:I,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro v\xE9rtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o pol\xEDgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do c\xEDrculo","finishCircle":"Clique para fechar o c\xEDrculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um pol\xEDgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um c\xEDrculo","drawRectButton":"Desenhar um ret\xE2ngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de c\xEDrculos de desenho","snappingButton":"Marcador arrastado para outras camadas e v\xE9rtices","pinningButton":"V\xE9rtices compartilhados de pinos juntos"}}'),zh:P,zh_tw:S,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi\u0107 znacznik","firstVertex":"Kliknij, aby ustawi\u0107 pierwszy punkt","continueLine":"Kliknij, aby kontynuowa\u0107 rysowanie","finishLine":"Kliknij dowolny punkt, aby zako\u0144czy\u0107","finishPoly":"Kliknij pierwszy punkt, aby zako\u0144czy\u0107","finishRect":"Kliknij, aby zako\u0144czy\u0107","startCircle":"Kliknij, aby ustawi\u0107 \u015Brodek ko\u0142a","finishCircle":"Kliknij, aby zako\u0144czy\u0107 rysowanie ko\u0142a","placeCircleMarker":"Kliknij, aby ustawi\u0107 okr\u0105g\u0142y znacznik"},"actions":{"finish":"Zako\u0144cz","cancel":"Anuluj","removeLastVertex":"Usu\u0144 ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielok\u0105t","drawLineButton":"Narysuj \u015Bcie\u017Ck\u0119","drawCircleButton":"Narysuj ko\u0142o","drawRectButton":"Narysuj prostok\u0105t","editButton":"Edytuj","dragButton":"Przesu\u0144","cutButton":"Wytnij","deleteButton":"Usu\u0144","drawCircleMarkerButton":"Narysuj okr\u0105g\u0142y znacznik","snappingButton":"Snap przeci\u0105gni\u0119ty marker na inne warstwy i wierzcho\u0142ki","pinningButton":"Sworze\u0144 wsp\xF3lne wierzcho\u0142ki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka f\xF6r att placera mark\xF6r","firstVertex":"Klicka f\xF6r att placera f\xF6rsta h\xF6rnet","continueLine":"Klicka f\xF6r att forts\xE4tta rita","finishLine":"Klicka p\xE5 en existerande punkt f\xF6r att slutf\xF6ra","finishPoly":"Klicka p\xE5 den f\xF6rsta punkten f\xF6r att slutf\xF6ra","finishRect":"Klicka f\xF6r att slutf\xF6ra","startCircle":"Klicka f\xF6r att placera cirkelns centrum","finishCircle":"Klicka f\xF6r att slutf\xF6ra cirkeln","placeCircleMarker":"Klicka f\xF6r att placera cirkelmark\xF6r"},"actions":{"finish":"Slutf\xF6r","cancel":"Avbryt","removeLastVertex":"Ta bort sista h\xF6rnet"},"buttonTitles":{"drawMarkerButton":"Rita Mark\xF6r","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmark\xF6r","snappingButton":"Sn\xE4pp dra mark\xF6ren till andra lager och h\xF6rn","pinningButton":"F\xE4st delade h\xF6rn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","firstVertex":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF","continueLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C3\u03C5\u03BD\u03B5\u03C7\u03AF\u03C3\u03B5\u03C4\u03B5 \u03BD\u03B1 \u03C3\u03C7\u03B5\u03B4\u03B9\u03AC\u03B6\u03B5\u03C4\u03B5","finishLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03B5 \u03BF\u03C0\u03BF\u03B9\u03BF\u03BD\u03B4\u03AE\u03C0\u03BF\u03C4\u03B5 \u03C5\u03C0\u03AC\u03C1\u03C7\u03BF\u03BD \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03B8\u03B5\u03AF","finishPoly":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","finishRect":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","startCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03BA\u03AD\u03BD\u03C4\u03C1\u03BF \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","finishCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03CE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u039A\u03CD\u03BA\u03BB\u03BF","placeCircleMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03CC \u0394\u03B5\u03AF\u03BA\u03C4\u03B7"},"actions":{"finish":"\u03A4\u03AD\u03BB\u03BF\u03C2","cancel":"\u0391\u03BA\u03CD\u03C1\u03C9\u03C3\u03B7","removeLastVertex":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u03C4\u03B5\u03BB\u03B5\u03C5\u03C4\u03B1\u03AF\u03BF\u03C5 \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF\u03C5"},"buttonTitles":{"drawMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","drawPolyButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u03A0\u03BF\u03BB\u03C5\u03B3\u03CE\u03BD\u03BF\u03C5","drawLineButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0393\u03C1\u03B1\u03BC\u03BC\u03AE\u03C2","drawCircleButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","drawRectButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039F\u03C1\u03B8\u03BF\u03B3\u03C9\u03BD\u03AF\u03BF\u03C5","editButton":"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","dragButton":"\u039C\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","cutButton":"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","deleteButton":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","drawCircleMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03BF\u03CD \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","snappingButton":"\u03A0\u03C1\u03BF\u03C3\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7 \u03C4\u03BF\u03C5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7 \u03BC\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC\u03C2 \u03C3\u03B5 \u03AC\u03BB\u03BB\u03B1 \u0395\u03C0\u03AF\u03C0\u03B5\u03B4\u03B1 \u03BA\u03B1\u03B9 \u039A\u03BF\u03C1\u03C5\u03C6\u03AD\u03C2","pinningButton":"\u03A0\u03B5\u03C1\u03B9\u03BA\u03BF\u03C0\u03AE \u03BA\u03BF\u03B9\u03BD\u03CE\u03BD \u03BA\u03BF\u03C1\u03C5\u03C6\u03CE\u03BD \u03BC\u03B1\u03B6\u03AF"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jel\xF6l\u0151 elhelyez\xE9s\xE9hez","firstVertex":"Kattintson az els\u0151 pont elhelyez\xE9s\xE9hez","continueLine":"Kattintson a k\xF6vetkez\u0151 pont elhelyez\xE9s\xE9hez","finishLine":"A befejez\xE9shez kattintson egy megl\xE9v\u0151 pontra","finishPoly":"A befejez\xE9shez kattintson az els\u0151 pontra","finishRect":"Kattintson a befejez\xE9shez","startCircle":"Kattintson a k\xF6r k\xF6z\xE9ppontj\xE1nak elhelyez\xE9s\xE9hez","finishCircle":"Kattintson a k\xF6r befejez\xE9s\xE9hez","placeCircleMarker":"Kattintson a k\xF6rjel\xF6l\u0151 elhelyez\xE9s\xE9hez"},"actions":{"finish":"Befejez\xE9s","cancel":"M\xE9gse","removeLastVertex":"Utols\xF3 pont elt\xE1vol\xEDt\xE1sa"},"buttonTitles":{"drawMarkerButton":"Jel\xF6l\u0151 rajzol\xE1sa","drawPolyButton":"Poligon rajzol\xE1sa","drawLineButton":"Vonal rajzol\xE1sa","drawCircleButton":"K\xF6r rajzol\xE1sa","drawRectButton":"N\xE9gyzet rajzol\xE1sa","editButton":"Elemek szerkeszt\xE9se","dragButton":"Elemek mozgat\xE1sa","cutButton":"Elemek v\xE1g\xE1sa","deleteButton":"Elemek t\xF6rl\xE9se","drawCircleMarkerButton":"K\xF6r jel\xF6l\u0151 rajzol\xE1sa","snappingButton":"Kapcsolja a jel\xF6lt\u0151t m\xE1sik elemhez vagy ponthoz","pinningButton":"K\xF6z\xF6s pontok \xF6sszek\xF6t\xE9se"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en mark\xF8r","firstVertex":"Tryk for at placere det f\xF8rste punkt","continueLine":"Tryk for at forts\xE6tte linjen","finishLine":"Tryk p\xE5 et eksisterende punkt for at afslutte","finishPoly":"Tryk p\xE5 det f\xF8rste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmark\xF8r"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer mark\xF8r","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Tr\xE6k","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmark\xF8r","snappingButton":"Fastg\xF8r trukket mark\xF8r til andre elementer","pinningButton":"Sammenl\xE6g delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for \xE5 plassere punkt","firstVertex":"Klikk for \xE5 plassere f\xF8rste punkt","continueLine":"Klikk for \xE5 tegne videre","finishLine":"Klikk p\xE5 et eksisterende punkt for \xE5 fullf\xF8re","finishPoly":"Klikk f\xF8rste punkt for \xE5 fullf\xF8re","finishRect":"Klikk for \xE5 fullf\xF8re","startCircle":"Klikk for \xE5 sette sirkel midtpunkt","finishCircle":"Klikk for \xE5 fullf\xF8re sirkel","placeCircleMarker":"Klikk for \xE5 plassere sirkel"},"actions":{"finish":"Fullf\xF8r","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062C\u0627\u0646\u0645\u0627\u06CC\u06CC \u0646\u0634\u0627\u0646","firstVertex":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0627\u0648\u0644\u06CC\u0646 \u0631\u0623\u0633","continueLine":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647 \u0631\u0633\u0645","finishLine":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishPoly":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishRect":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","startCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0645\u0631\u06A9\u0632 \u062F\u0627\u06CC\u0631\u0647","finishCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646 \u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","placeCircleMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","placeText":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0646\u0648\u0634\u062A\u0646 \u0645\u062A\u0646"},"actions":{"finish":"\u067E\u0627\u06CC\u0627\u0646","cancel":"\u0644\u0641\u0648","removeLastVertex":"\u062D\u0630\u0641 \u0622\u062E\u0631\u06CC\u0646 \u0631\u0623\u0633"},"buttonTitles":{"drawMarkerButton":"\u062F\u0631\u062C \u0646\u0634\u0627\u0646","drawPolyButton":"\u0631\u0633\u0645 \u0686\u0646\u062F\u0636\u0644\u0639\u06CC","drawLineButton":"\u0631\u0633\u0645 \u062E\u0637","drawCircleButton":"\u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","drawRectButton":"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06CC","editButton":"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","dragButton":"\u062C\u0627\u0628\u062C\u0627\u06CC\u06CC \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","cutButton":"\u0628\u0631\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","deleteButton":"\u062D\u0630\u0641 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","drawCircleMarkerButton":"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","snappingButton":"\u0646\u0634\u0627\u0646\u06AF\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062F\u06CC\u06AF\u0631 \u0628\u06A9\u0634\u06CC\u062F","pinningButton":"\u0631\u0626\u0648\u0633 \u0645\u0634\u062A\u0631\u06A9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067E\u06CC\u0646 \u06A9\u0646\u06CC\u062F","rotateButton":"\u0686\u0631\u062E\u0634 \u0644\u0627\u06CC\u0647","drawTextButton":"\u0631\u0633\u0645 \u0645\u062A\u0646"}}'),ua:JSON.parse(`{"tooltips":{"placeMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043D\u0443","continueLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 \u043C\u0430\u043B\u044E\u0432\u0430\u0442\u0438","finishLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u0439 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044F","finishPoly":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0435\u0440\u0448\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","finishRect":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","startCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u0446\u0435\u043D\u0442\u0440 \u043A\u043E\u043B\u0430","finishCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043A\u043E\u043B\u043E","placeCircleMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","cancel":"\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438","removeLastVertex":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044E \u0432\u0435\u0440\u0448\u0438\u043D\u0443"},"buttonTitles":{"drawMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u043B\u0456\u0433\u043E\u043D","drawLineButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0438\u0432\u0443","drawCircleButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043E\u043B\u043E","drawRectButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438","cutButton":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","deleteButton":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0448\u0430\u0440\u0438","drawCircleMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0443\u0442\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043E \u0456\u043D\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043D","pinningButton":"\u0417\u0432'\u044F\u0437\u0430\u0442\u0438 \u0441\u043F\u0456\u043B\u044C\u043D\u0456 \u0432\u0435\u0440\u0448\u0438\u043D\u0438 \u0440\u0430\u0437\u043E\u043C"}}`),tr:JSON.parse('{"tooltips":{"placeMarker":"\u0130\u015Faret\xE7i yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","firstVertex":"\u0130lk tepe noktas\u0131n\u0131 yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","continueLine":"\xC7izime devam etmek i\xE7in t\u0131klay\u0131n","finishLine":"Bitirmek i\xE7in mevcut herhangi bir i\u015Faret\xE7iyi t\u0131klay\u0131n","finishPoly":"Bitirmek i\xE7in ilk i\u015Faret\xE7iyi t\u0131klay\u0131n","finishRect":"Bitirmek i\xE7in t\u0131klay\u0131n","startCircle":"Daire merkezine yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","finishCircle":"Daireyi bitirmek i\xE7in t\u0131klay\u0131n","placeCircleMarker":"Daire i\u015Faret\xE7isi yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n"},"actions":{"finish":"Bitir","cancel":"\u0130ptal","removeLastVertex":"Son k\xF6\u015Feyi kald\u0131r"},"buttonTitles":{"drawMarkerButton":"\xC7izim \u0130\u015Faret\xE7isi","drawPolyButton":"\xC7okgenler \xE7iz","drawLineButton":"\xC7oklu \xE7izgi \xE7iz","drawCircleButton":"\xC7ember \xE7iz","drawRectButton":"Dikd\xF6rtgen \xE7iz","editButton":"Katmanlar\u0131 d\xFCzenle","dragButton":"Katmanlar\u0131 s\xFCr\xFCkle","cutButton":"Katmanlar\u0131 kes","deleteButton":"Katmanlar\u0131 kald\u0131r","drawCircleMarkerButton":"Daire i\u015Faret\xE7isi \xE7iz","snappingButton":"S\xFCr\xFCklenen i\u015Faret\xE7iyi di\u011Fer katmanlara ve k\xF6\u015Felere yap\u0131\u015Ft\u0131r","pinningButton":"Payla\u015F\u0131lan k\xF6\u015Feleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknut\xEDm vytvo\u0159\xEDte zna\u010Dku","firstVertex":"Kliknut\xEDm vytvo\u0159\xEDte prvn\xED objekt","continueLine":"Kliknut\xEDm pokra\u010Dujte v kreslen\xED","finishLine":"Kliknut\xED na libovolnou existuj\xEDc\xED zna\u010Dku pro dokon\u010Den\xED","finishPoly":"Vyberte prvn\xED bod pro dokon\u010Den\xED","finishRect":"Klikn\u011Bte pro dokon\u010Den\xED","startCircle":"Kliknut\xEDm p\u0159idejte st\u0159ed kruhu","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"Kliknut\xEDm nastavte polom\u011Br"},"actions":{"finish":"Dokon\u010Dit","cancel":"Zru\u0161it","removeLastVertex":"Zru\u0161it posledn\xED akci"},"buttonTitles":{"drawMarkerButton":"P\u0159idat zna\u010Dku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit k\u0159ivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obd\xE9ln\xEDk","editButton":"Upravit vrstvu","dragButton":"P\u0159eneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"P\u0159idat kruhovou zna\u010Dku","snappingButton":"Nav\xE1zat ta\u017Enou zna\u010Dku k dal\u0161\xEDm vrstv\xE1m a vrchol\u016Fm","pinningButton":"Spojit spole\u010Dn\xE9 body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","firstVertex":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u6700\u521D\u306E\u9802\u70B9\u3092\u914D\u7F6E","continueLine":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u63CF\u753B\u3092\u7D9A\u3051\u308B","finishLine":"\u4EFB\u610F\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishPoly":"\u6700\u521D\u306E\u30DE\u30FC\u30AB\u30FC\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","finishRect":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u7D42\u4E86","startCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u4E2D\u5FC3\u3092\u914D\u7F6E","finishCircle":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u306E\u63CF\u753B\u3092\u7D42\u4E86","placeCircleMarker":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u914D\u7F6E","placeText":"\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30C6\u30AD\u30B9\u30C8\u3092\u914D\u7F6E"},"actions":{"finish":"\u7D42\u4E86","cancel":"\u30AD\u30E3\u30F3\u30BB\u30EB","removeLastVertex":"\u6700\u5F8C\u306E\u9802\u70B9\u3092\u524A\u9664"},"buttonTitles":{"drawMarkerButton":"\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","drawPolyButton":"\u30DD\u30EA\u30B4\u30F3\u3092\u63CF\u753B","drawLineButton":"\u6298\u308C\u7DDA\u3092\u63CF\u753B","drawCircleButton":"\u5186\u3092\u63CF\u753B","drawRectButton":"\u77E9\u5F62\u3092\u63CF\u753B","editButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u7DE8\u96C6","dragButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u30C9\u30E9\u30C3\u30B0","cutButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u5207\u308A\u53D6\u308A","deleteButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u524A\u9664","drawCircleMarkerButton":"\u5186\u30DE\u30FC\u30AB\u30FC\u3092\u63CF\u753B","snappingButton":"\u30C9\u30E9\u30C3\u30B0\u3057\u305F\u30DE\u30FC\u30AB\u30FC\u3092\u4ED6\u306E\u30EC\u30A4\u30E4\u30FC\u3084\u9802\u70B9\u306B\u30B9\u30CA\u30C3\u30D7\u3059\u308B","pinningButton":"\u5171\u6709\u3059\u308B\u9802\u70B9\u3092\u540C\u6642\u306B\u52D5\u304B\u3059","rotateButton":"\u30EC\u30A4\u30E4\u30FC\u3092\u56DE\u8EE2","drawTextButton":"\u30C6\u30AD\u30B9\u30C8\u3092\u63CF\u753B"}}')};function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f(Object(r),!0).forEach(function(i){O(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const V={_globalEditModeEnabled:!1,enableGlobalEditMode:function(t){this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(e){e.pm.enable(t)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(t){t.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(t)},handleLayerAdditionInGlobalEditMode:function(){var t=this._addedLayers;for(var e in this._addedLayers={},t){var r=t[e];this._isRelevantForEdit(r)&&this.globalEditModeEnabled()&&r.pm.enable(x({},this.globalOptions))}},_layerAdded:function(t){var e=t.layer;this._addedLayers[L.stamp(e)]=e},_isRelevantForEdit:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowEditing}},Y={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},t.forEach(function(e){e.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this.throttledReInitDrag,this),this.map.on("layeradd",this._layerAddedDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,t.forEach(function(e){e.pm.disableLayerDrag()}),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var t=this._addedLayersDrag;for(var e in this._addedLayersDrag={},t){var r=t[e];this._isRelevantForDrag(r)&&this.globalDragModeEnabled()&&r.pm.enableLayerDrag()}},_layerAddedDrag:function(t){var e=t.layer;this._addedLayersDrag[L.stamp(e)]=e},_isRelevantForDrag:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.draggable}},X={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(e){t._isRelevantForRemoval(e)&&(e.pm.disable(),e.on("click",t.removeLayer,t))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(e){e.off("click",t.removeLayer,t)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(t){var e=t.layer;this._isRelevantForRemoval(e)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(t){var e=t.target;this._isRelevantForRemoval(e)&&!e.pm.dragging()&&(e.removeFrom(this.map.pm._getContainingLayer()),e.remove(),e instanceof L.LayerGroup?(this._fireRemoveLayerGroup(e),this._fireRemoveLayerGroup(this.map,e)):(e.pm._fireRemove(e),e.pm._fireRemove(this.map,e)))},_isRelevantForRemoval:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowRemoval}},$={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var t=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(e){return e instanceof L.Polyline}).forEach(function(e){t._isRelevantForRotate(e)&&e.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(t){return t instanceof L.Polyline}).forEach(function(t){t.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(t){var e=t.layer;this._isRelevantForRotate(e)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowRotation}};function Q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Q(Object(r),!0).forEach(function(i){W(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function W(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ut={_fireDrawStart:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},t,e)},_fireDrawEnd:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},t,e)},_fireCreate:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:t,layer:t},e,r)},_fireCenterPlaced:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t==="Draw"?this._layer:void 0,i=t!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:r,layer:i,latlng:this._layer.getLatLng()},t,e)},_fireCut:function(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(t,"pm:cut",{shape:this._shape,layer:e,originalLayer:r},i,n)},_fireEdit:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(t,"pm:edit",{layer:this._layer,shape:this.getShape()},e,r)},_fireEnable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDisable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},t,e)},_fireUpdate:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},t,e)},_fireMarkerDragStart:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},r,i)},_fireMarkerDrag:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},r,i)},_fireMarkerDragEnd:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e,intersectionReset:r},i,n)},_fireDragStart:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},t,e)},_fireDrag:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",Z(Z({},t),{},{shape:this.getShape()}),e,r)},_fireDragEnd:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},t,e)},_fireDragEnable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDragDisable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},t,e)},_fireRemove:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:this.getShape()},r,i)},_fireVertexAdded:function(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:t,indexPath:e,latlng:r,shape:this.getShape()},i,n)},_fireVertexRemoved:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:t,indexPath:e,shape:this.getShape()},r,i)},_fireVertexClick:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},r,i)},_fireIntersect:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:t,shape:this.getShape()},e,r)},_fireLayerReset:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},r,i)},_fireChange:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:t,shape:this.getShape()},e,r)},_fireTextChange:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:t,shape:this.getShape()},e,r)},_fireSnapDrag:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:snapdrag",e,r,i)},_fireSnap:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:snap",e,r,i)},_fireUnsnap:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:unsnap",e,r,i)},_fireRotationEnable:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},r,i)},_fireRotationDisable:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(t,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},e,r)},_fireRotationStart:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:e},r,i)},_fireRotation:function(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this._rotationLayer,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Rotation",c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(t,"pm:rotate",{layer:i,helpLayer:this._layer,startAngle:this._startAngle,angle:i.pm.getAngle(),angleDiff:e,oldLatLngs:r,newLatLngs:i.getLatLngs()},n,c)},_fireRotationEnd:function(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(t,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:e,angle:this._rotationLayer.pm.getAngle(),originLatLngs:r,newLatLngs:this._rotationLayer.getLatLngs()},i,n)},_fireActionClick:function(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:t.text,action:t,btnName:e,button:r},i,n)},_fireButtonClick:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:t,button:e},r,i)},_fireLangChange:function(t,e,r,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:t,activeLang:e,fallback:r,translations:i},n,c)},_fireGlobalDragModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:t,map:this.map},e,r)},_fireGlobalEditModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:t,map:this.map},e,r)},_fireGlobalRemovalModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:t,map:this.map},e,r)},_fireGlobalCutModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},t,e)},_fireGlobalDrawModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},t,e)},_fireGlobalRotateModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},t,e)},_fireRemoveLayerGroup:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:void 0},r,i)},_fireKeyeventEvent:function(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:t,eventType:e,focusOn:r},i,n)},__fire:function(t,e,r,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};r=p()(r,n,{source:i}),L.PM.Utils._fireEvent(t,e,r)}};const tt=ut,ht={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(t){this.map=t,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(t){var e="document";this.map.getContainer().contains(t.target)&&(e="map");var r={event:t,eventType:t.type,focusOn:e};this._lastEvents[t.type]=r,this._lastEvents.current=r,this.map.pm._fireKeyeventEvent(t,t.type,e)},_onBlur:function(t){t.altKey=!1;var e={event:t,eventType:t.type,focusOn:"document"};this._lastEvents[t.type]=e,this._lastEvents.current=e},getLastKeyEvent:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[t]},isShiftKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.shiftKey},isAltKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.altKey},isCtrlKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.ctrlKey},isMetaKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.metaKey},getPressedKey:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.key}};var vt=a(7361),ct=a.n(vt),Lt=a(8721),St=a.n(Lt);function lt(t){var e=L.PM.activeLang;return St()(D,e)||(e="en"),ct()(D[e],t)}function mt(t){for(var e=0;e<t.length;e+=1){var r=t[e];if(Array.isArray(r)){if(mt(r))return!0}else if(r!=null&&r!=="")return!0}return!1}function Yt(t){return t.reduce(function(e,r){if(r.length!==0){var i=Array.isArray(r)?Yt(r):r;Array.isArray(i)?i.length!==0&&e.push(i):e.push(i)}return e},[])}function $t(t,e,r){for(var i,n,c,m=6378137,_=63567523142e-4,b=.0033528106647474805,k=t.lng,B=t.lat,z=r,T=Math.PI,F=e*T/180,J=Math.sin(F),et=Math.cos(F),at=(1-b)*Math.tan(B*T/180),pt=1/Math.sqrt(1+at*at),_t=at*pt,gt=Math.atan2(at,et),Pt=pt*J,Tt=1-Pt*Pt,Vt=Tt*(m*m-_*_)/(_*_),tr=1+Vt/16384*(4096+Vt*(Vt*(320-175*Vt)-768)),Re=Vt/1024*(256+Vt*(Vt*(74-47*Vt)-128)),qt=z/(_*tr),er=2*Math.PI;Math.abs(qt-er)>1e-12;)i=Math.cos(2*gt+qt),er=qt,qt=z/(_*tr)+Re*(n=Math.sin(qt))*(i+Re/4*((c=Math.cos(qt))*(2*i*i-1)-Re/6*i*(4*n*n-3)*(4*i*i-3)));var rr=_t*n-pt*c*et,Ar=Math.atan2(_t*c+pt*n*et,(1-b)*Math.sqrt(Pt*Pt+rr*rr)),Te=b/16*Tt*(4+b*(4-3*Tt)),Nr=k+180*(Math.atan2(n*J,pt*c-_t*n*et)-(1-Te)*b*Pt*(qt+Te*n*(i+Te*c*(2*i*i-1))))/T,zr=180*Ar/T;return L.latLng(Nr,zr)}function te(t,e,r,i){for(var n,c,m=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],_=[],b=0;b<r;b+=1){if(m)n=$t(t,360*b/r+i,e),c=L.latLng(n.lng,n.lat);else{var k=t.lat+Math.cos(2*b*Math.PI/r)*e,B=t.lng+Math.sin(2*b*Math.PI/r)*e;c=L.latLng(k,B)}_.push(c)}return _}function At(t,e,r,i){var n=function(c,m,_){var b=c.latLngToContainerPoint(m),k=c.latLngToContainerPoint(_),B=180*Math.atan2(k.y-b.y,k.x-b.x)/Math.PI+90;return B+(B<0?360:0)}(t,e,r);return function(c,m,_){m=(m+360)%360;var b=Math.PI/180,k=180/Math.PI,B=6378137,z=c.lng*b,T=c.lat*b,F=m*b,J=Math.sin(T),et=Math.cos(T),at=Math.cos(_/B),pt=Math.sin(_/B),_t=Math.asin(J*at+et*pt*Math.cos(F)),gt=z+Math.atan2(Math.sin(F)*pt*et,at-J*Math.sin(_t));return gt=(gt*=k)>180?gt-360:gt<-180?gt+360:gt,L.latLng([_t*k,gt])}(e,n,i)}function Nt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getLatLngs();return t instanceof L.Polygon?L.polygon(e).getLatLngs():L.polyline(e).getLatLngs()}function oe(t,e){var r,i;if((r=e.options.crs)!==null&&r!==void 0&&(i=r.projection)!==null&&i!==void 0&&i.MAX_LATITUDE){var n,c,m=(n=e.options.crs)===null||n===void 0||(c=n.projection)===null||c===void 0?void 0:c.MAX_LATITUDE;t.lat=Math.max(Math.min(m,t.lat),-m)}return t}function zt(t){return t.options.renderer||t._map&&(t._map._getPaneRenderer(t.options.pane)||t._map.options.renderer||t._map._renderer)||t._renderer}const ye=L.Class.extend({includes:[V,Y,X,$,tt],initialize:function(t){this.map=t,this.Draw=new L.PM.Draw(t),this.Toolbar=new L.PM.Toolbar(t),this.Keyboard=ht,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(t)},setLang:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",i=L.PM.activeLang;e&&(D[t]=p()(D[r],e)),L.PM.activeLang=t,this.map.pm.Toolbar.reinit(),this._fireLangChange(i,t,r,D[t])},addControls:function(t){this.Toolbar.addControls(t)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",e=arguments.length>1?arguments[1]:void 0;t==="Poly"&&(t="Polygon"),this.Draw.enable(t,e)},disableDraw:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";t==="Poly"&&(t="Polygon"),this.Draw.disable(t)},setPathOptions:function(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.ignoreShapes||[],n=r.merge||!1;this.map.pm.Draw.shapes.forEach(function(c){i.indexOf(c)===-1&&e.map.pm.Draw[c].setPathOptions(t,n)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(t){var e=this,r=p()(this.globalOptions,t),i=!1;this.map.pm.Draw.CircleMarker.enabled()&&this.map.pm.Draw.CircleMarker.options.editable!==r.editable&&(this.map.pm.Draw.CircleMarker.disable(),i=!0),this.map.pm.Draw.shapes.forEach(function(n){e.map.pm.Draw[n].setOptions(r)}),i&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(n){n.pm.setOptions(r)}),this.applyGlobalOptions(),this.globalOptions=r},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(t){t.pm.enabled()&&t.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(t){return this.Draw.Cut.enable(t)},toggleGlobalCutMode:function(t){return this.Draw.Cut.toggle(t)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=L.PM.Utils.findLayers(this.map);if(!t)return e;var r=L.featureGroup();return r._pmTempLayer=!0,e.forEach(function(i){r.addLayer(i)}),r},getGeomanDrawLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=L.PM.Utils.findLayers(this.map).filter(function(i){return i._drawnByGeoman===!0});if(!t)return e;var r=L.featureGroup();return r._pmTempLayer=!0,e.forEach(function(i){r.addLayer(i)}),r},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(t){this._touchEventCounter===0&&(L.DomEvent.on(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(t){this._touchEventCounter===1&&(L.DomEvent.off(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(t){zt(this.map)._onMouseMove(this._createMouseEvent("mousemove",t))},_canvasTouchClick:function(t){var e="";t.type==="touchstart"||t.type==="pointerdown"?e="mousedown":t.type==="touchend"||t.type==="pointerup"?e="mouseup":t.type!=="touchcancel"&&t.type!=="pointercancel"||(e="mouseup"),e&&zt(this.map)._onClick(this._createMouseEvent(e,t))},_createMouseEvent:function(t,e){var r,i=e.touches[0]||e.changedTouches[0];try{r=new MouseEvent(t,{bubbles:e.bubbles,cancelable:e.cancelable,view:e.view,detail:i.detail,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,button:e.button,relatedTarget:e.relatedTarget})}catch{(r=document.createEvent("MouseEvents")).initMouseEvent(t,e.bubbles,e.cancelable,e.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}return r}});function se(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function ee(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?se(Object(r),!0).forEach(function(i){ve(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function ve(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Bt=L.Control.extend({includes:[tt],options:{position:"topleft"},initialize:function(t){this._button=ee(ee({},this.options),t)},onAdd:function(t){return this._map=t,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(t){return this._button.toggleStatus=typeof t=="boolean"?t:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(t){t&&t.preventDefault(),this._button.disabled||(this._button.onClick(t,{button:this,event:t}),this._clicked(t),this._button.afterClick(t,{button:this,event:t}))},_makeButton:function(t){var e=this,r=this.options.position.indexOf("right")>-1?"pos-right":"",i=L.DomUtil.create("div","button-container  ".concat(r),this._container);t.title&&i.setAttribute("title",t.title);var n=L.DomUtil.create("a","leaflet-buttons-control-button",i);n.setAttribute("role","button"),n.setAttribute("tabindex","0"),n.href="#";var c=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(r),i),m=t.actions,_={cancel:{text:lt("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:lt("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:lt("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[t.jsClass]._removeLastVertex()}},finish:{text:lt("actions.finish"),onClick:function(k){this._map.pm.Draw[t.jsClass]._finishShape(k)}}};m.forEach(function(k){var B,z=typeof k=="string"?k:k.name;if(_[z])B=_[z];else{if(!k.text)return;B=k}var T=L.DomUtil.create("a","leaflet-pm-action ".concat(r," action-").concat(z),c);T.setAttribute("role","button"),T.setAttribute("tabindex","0"),T.href="#",T.innerHTML=B.text,L.DomEvent.disableClickPropagation(T),L.DomEvent.on(T,"click",L.DomEvent.stop),!t.disabled&&B.onClick&&(L.DomEvent.addListener(T,"click",function(F){F.preventDefault();var J="",et=e._map.pm.Toolbar.buttons;for(var at in et)if(et[at]._button===t){J=at;break}e._fireActionClick(B,J,t)},e),L.DomEvent.addListener(T,"click",B.onClick,e))}),t.toggleStatus&&L.DomUtil.addClass(i,"active");var b=L.DomUtil.create("div","control-icon",n);return t.iconUrl&&b.setAttribute("src",t.iconUrl),t.className&&L.DomUtil.addClass(b,t.className),L.DomEvent.disableClickPropagation(n),L.DomEvent.on(n,"click",L.DomEvent.stop),t.disabled||(L.DomEvent.addListener(n,"click",this._onBtnClick,this),L.DomEvent.addListener(n,"click",this._triggerClick,this)),t.disabled&&(L.DomUtil.addClass(n,"pm-disabled"),n.setAttribute("aria-disabled","true")),i},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var t="",e=this._map.pm.Toolbar.buttons;for(var r in e)if(e[r]._button===this._button){t=r;break}this._fireButtonClick(t,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var t="pm-disabled",e=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(e,t),e.setAttribute("aria-disabled","true"),L.DomEvent.off(e,"click",this._triggerClick,this),L.DomEvent.off(e,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(e,t),e.setAttribute("aria-disabled","false"),L.DomEvent.on(e,"click",this._triggerClick,this),L.DomEvent.on(e,"click",this._onBtnClick,this))}}});function le(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function he(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?le(Object(r),!0).forEach(function(i){Le(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Le(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function re(t){return re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(t)}L.Control.PMButton=Bt;const v=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(t){this.init(t)},reinit:function(){var t=this.isVisible;this.removeControls(),this._defineButtons(),t&&this.addControls()},init:function(t){this.map=t,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(t){var e="".concat(t,"Container");return this[e]||(this[e]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(t," leaflet-bar leaflet-control"))),this[e]},getButtons:function(){return this.buttons},addControls:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof t.editPolygon<"u"&&(t.editMode=t.editPolygon),typeof t.deleteLayer<"u"&&(t.removalMode=t.deleteLayer),L.Util.setOptions(this,t),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var t=this.getButtons(),e={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var r in t){var i=t[r];L.Util.setOptions(i,{className:e.geomanIcons[r]})}},removeControls:function(){var t=this.getButtons();for(var e in t)t[e].remove();this.isVisible=!1},toggleControls:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(t)},_addButton:function(t,e){return this.buttons[t]=e,this.options[t]=this.options[t]||!1,this.buttons[t]},triggerClickOnToggledButtons:function(t){var e=["snappingOption"];for(var r in this.buttons)!e.includes(r)&&this.buttons[r]!==t&&this.buttons[r].toggled()&&this.buttons[r]._triggerClick()},toggleButton:function(t,e){var r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return t==="editPolygon"&&(t="editMode"),t==="deleteLayer"&&(t="removalMode"),r&&this.triggerClickOnToggledButtons(this.buttons[t]),!!this.buttons[t]&&this.buttons[t].toggle(e)},_defineButtons:function(){var t=this,e={className:"control-icon leaflet-pm-icon-marker",title:lt("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(F,J){t.map.pm.Draw[J.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:lt("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(F,J){t.map.pm.Draw[J.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},i={className:"control-icon leaflet-pm-icon-polyline",title:lt("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(F,J){t.map.pm.Draw[J.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},n={title:lt("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(F,J){t.map.pm.Draw[J.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},c={title:lt("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(F,J){t.map.pm.Draw[J.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},m={title:lt("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(F,J){t.map.pm.Draw[J.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:lt("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:lt("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},k={title:lt("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(F,J){t.map.pm.Draw[J.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},B={title:lt("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},z={title:lt("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},T={className:"control-icon leaflet-pm-icon-text",title:lt("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(F,J){t.map.pm.Draw[J.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(e)),this._addButton("drawPolyline",new L.Control.PMButton(i)),this._addButton("drawRectangle",new L.Control.PMButton(m)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(n)),this._addButton("drawCircleMarker",new L.Control.PMButton(c)),this._addButton("drawText",new L.Control.PMButton(T)),this._addButton("editMode",new L.Control.PMButton(_)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(k)),this._addButton("removalMode",new L.Control.PMButton(B)),this._addButton("rotateMode",new L.Control.PMButton(z))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var t=this.getButtons(),e=[];for(var r in this.options.drawControls===!1&&(e=e.concat(Object.keys(t).filter(function(n){return!t[n]._button.tool}))),this.options.editControls===!1&&(e=e.concat(Object.keys(t).filter(function(n){return t[n]._button.tool==="edit"}))),this.options.optionsControls===!1&&(e=e.concat(Object.keys(t).filter(function(n){return t[n]._button.tool==="options"}))),this.options.customControls===!1&&(e=e.concat(Object.keys(t).filter(function(n){return t[n]._button.tool==="custom"}))),t)if(this.options[r]&&e.indexOf(r)===-1){var i=t[r]._button.tool;i||(i="draw"),t[r].setPosition(this._getBtnPosition(i)),t[r].addTo(this.map)}}},_getBtnPosition:function(t){return this.options.positions&&this.options.positions[t]?this.options.positions[t]:this.options.position},setBlockPosition:function(t,e){this.options.positions[t]=e,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(t,e){if(!e)throw new TypeError("Button has no name");re(e)!=="object"&&(e={name:e});var r=this._btnNameMapping(t);if(!e.name)throw new TypeError("Button has no name");if(this.buttons[e.name])throw new TypeError("Button with this name already exists");var i=this.map.pm.Draw.createNewDrawInstance(e.name,r);return e=he(he({},this.buttons[r]._button),e),{drawInstance:i,control:this.createCustomControl(e)}},createCustomControl:function(t){if(!t.name)throw new TypeError("Button has no name");if(this.buttons[t.name])throw new TypeError("Button with this name already exists");t.onClick||(t.onClick=function(){}),t.afterClick||(t.afterClick=function(){}),t.toggle!==!1&&(t.toggle=!0),t.block&&(t.block=t.block.toLowerCase()),t.block&&t.block!=="draw"||(t.block=""),t.className?t.className.indexOf("control-icon")===-1&&(t.className="control-icon ".concat(t.className)):t.className="control-icon";var e={tool:t.block,className:t.className,title:t.title||"",jsClass:t.name,onClick:t.onClick,afterClick:t.afterClick,doToggle:t.toggle,toggleStatus:!1,disableOtherButtons:!0,cssToggle:t.toggle,position:this.options.position,actions:t.actions||[],disabled:!!t.disabled};this.options[t.name]!==!1&&(this.options[t.name]=!0);var r=this._addButton(t.name,new L.Control.PMButton(e));return this.changeControlOrder(),r},changeControlOrder:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=this._shapeMapping(),r=[];t.forEach(function(k){e[k]?r.push(e[k]):r.push(k)});var i=this.getButtons(),n={};r.forEach(function(k){i[k]&&(n[k]=i[k])});var c=Object.keys(i).filter(function(k){return!i[k]._button.tool});c.forEach(function(k){r.indexOf(k)===-1&&(n[k]=i[k])});var m=Object.keys(i).filter(function(k){return i[k]._button.tool==="edit"});m.forEach(function(k){r.indexOf(k)===-1&&(n[k]=i[k])});var _=Object.keys(i).filter(function(k){return i[k]._button.tool==="options"});_.forEach(function(k){r.indexOf(k)===-1&&(n[k]=i[k])});var b=Object.keys(i).filter(function(k){return i[k]._button.tool==="custom"});b.forEach(function(k){r.indexOf(k)===-1&&(n[k]=i[k])}),Object.keys(i).forEach(function(k){r.indexOf(k)===-1&&(n[k]=i[k])}),this.map.pm.Toolbar.buttons=n,this._showHideButtons()},getControlOrder:function(){var t=this.getButtons(),e=[];for(var r in t)e.push(r);return e},changeActionsOfControl:function(t,e){var r=this._btnNameMapping(t);if(!r)throw new TypeError("No name passed");if(!e)throw new TypeError("No actions passed");if(!this.buttons[r])throw new TypeError("Button with this name not exists");this.buttons[r]._button.actions=e,this.changeControlOrder()},setButtonDisabled:function(t,e){var r=this._btnNameMapping(t);e?this.buttons[r].disable():this.buttons[r].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(t){var e=this._shapeMapping();return e[t]?e[t]:t}});function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(i){g(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var M={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(t){var e=this;t.forEach(function(r){Array.isArray(r)?e._assignEvents(r):(r.off("drag",e._handleSnapping,e),r.on("drag",e._handleSnapping,e),r.off("dragend",e._cleanupSnapping,e),r.on("dragend",e._cleanupSnapping,e))})},_cleanupSnapping:function(){delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(t){t.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(t){var e=this,r=t.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var i=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(i).length===0)return!1;var n,c=i.layer instanceof L.Marker||i.layer instanceof L.CircleMarker||!this.options.snapSegment;n=c?i.latlng:this._checkPrioritiySnapping(i);var m=this.options.snapDistance,_={marker:r,shape:this._shape,snapLatLng:n,segment:i.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:i.layer,distance:i.distance};if(this._fireSnapDrag(_.marker,_),this._fireSnapDrag(this._layer,_),i.distance<m){r._orgLatLng=r.getLatLng(),r.setLatLng(n),r._snapped=!0,r._snapInfo=_;var b=this._snapLatLng||{},k=n||{};b.lat===k.lat&&b.lng===k.lng||(e._snapLatLng=n,e._fireSnap(r,_),e._fireSnap(e._layer,_))}else this._snapLatLng&&(this._unsnap(_),r._snapped=!1,this._fireUnsnap(_.marker,_),this._fireUnsnap(this._layer,_));return!0},_createSnapList:function(){var t=this,e=[],r=[],i=this._map;i.off("pm:remove",this._handleSnapLayerRemoval,this),i.on("pm:remove",this._handleSnapLayerRemoval,this),i.eachLayer(function(n){if((n instanceof L.Polyline||n instanceof L.Marker||n instanceof L.CircleMarker||n instanceof L.ImageOverlay)&&n.options.snapIgnore!==!0){if(n.options.snapIgnore===void 0&&(!L.PM.optIn&&n.options.pmIgnore===!0||L.PM.optIn&&n.options.pmIgnore!==!1))return;(n instanceof L.Circle||n instanceof L.CircleMarker)&&n.pm&&n.pm._hiddenPolyCircle?e.push(n.pm._hiddenPolyCircle):n instanceof L.ImageOverlay&&(n=L.rectangle(n.getBounds())),e.push(n);var c=L.polyline([],{color:"red",pmIgnore:!0});c._pmTempLayer=!0,r.push(c),(n instanceof L.Circle||n instanceof L.CircleMarker)&&r.push(c)}}),e=(e=(e=e.filter(function(n){return t._layer!==n})).filter(function(n){return n._latlng||n._latlngs&&mt(n._latlngs)})).filter(function(n){return!n._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var n=L.polyline([],{color:"red",pmIgnore:!0});n._pmTempLayer=!0,r.push(n)}),this._snapList=e.concat(this._otherSnapLayers)):this._snapList=e,this.debugIndicatorLines=r},_handleSnapLayerRemoval:function(t){var e=t.layer,r=this._snapList.findIndex(function(i){return i._leaflet_id===e._leaflet_id});this._snapList.splice(r,1)},_calcClosestLayer:function(t,e){var r=this,i=[],n={};return e.forEach(function(c,m){if(!c._parentCopy||c._parentCopy!==r._layer){var _=r._calcLayerDistances(t,c);_.distance=Math.floor(_.distance),r.debugIndicatorLines[m]&&r.debugIndicatorLines[m].setLatLngs([t,_.latlng]),(n.distance===void 0||_.distance<=n.distance)&&(_.distance<n.distance&&(i=[]),(n=_).layer=c,i.push(n))}}),this._getClosestLayerByPriority(i)},_calcLayerDistances:function(t,e){var r,i,n,c=this,m=this._map,_=e instanceof L.Marker||e instanceof L.CircleMarker,b=e instanceof L.Polygon,k=t,B=_?e.getLatLng():e.getLatLngs();return _?{latlng:s({},B),distance:this._getDistance(m,B,k)}:(function z(T){T.forEach(function(F,J){if(Array.isArray(F))z(F);else if(c.options.snapSegment){var et,at=F;et=b?J+1===T.length?0:J+1:J+1===T.length?void 0:J+1;var pt=T[et];if(pt){var _t=c._getDistanceToSegment(m,k,at,pt);(i===void 0||_t<i)&&(i=_t,n=[at,pt])}}else{var gt=c._getDistance(m,k,F);(i===void 0||gt<i)&&(i=gt,r=F)}})}(B),this.options.snapSegment?{latlng:s({},this._getClosestPointOnSegment(m,t,n[0],n[1])),segment:n,distance:i}:{latlng:r,distance:i})},_getClosestLayerByPriority:function(t){t=t.sort(function(n,c){return n._leaflet_id-c._leaflet_id});var e=this._map.pm.globalOptions.snappingOrder||[],r=0,i={};return e.concat(["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"]).forEach(function(n){i[n]||(r+=1,i[n]=r)}),t.sort(function(n,c){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!c||Object.keys(c).length===0)return function(T,F){return T-F};for(var _,b=Object.keys(c),k=b.length-1,B={};k>=0;)_=b[k],B[_.toLowerCase()]=c[_],k-=1;function z(T){return T instanceof L.Marker?"Marker":T instanceof L.Circle?"Circle":T instanceof L.CircleMarker?"CircleMarker":T instanceof L.Rectangle?"Rectangle":T instanceof L.Polygon?"Polygon":T instanceof L.Polyline?"Line":void 0}return function(T,F){var J,et;if(n==="instanceofShape"){if(J=z(T.layer).toLowerCase(),et=z(F.layer).toLowerCase(),!J||!et)return 0}else{if(!T.hasOwnProperty(n)||!F.hasOwnProperty(n))return 0;J=T[n].toLowerCase(),et=F[n].toLowerCase()}var at=J in B?B[J]:Number.MAX_SAFE_INTEGER,pt=et in B?B[et]:Number.MAX_SAFE_INTEGER,_t=0;return at<pt?_t=-1:at>pt&&(_t=1),m==="desc"?-1*_t:_t}}("instanceofShape",i)),t[0]||{}},_checkPrioritiySnapping:function(t){var e=this._map,r=t.segment[0],i=t.segment[1],n=t.latlng,c=this._getDistance(e,r,n),m=this._getDistance(e,i,n),_=c<m?r:i,b=c<m?c:m;if(this.options.snapMiddle){var k=L.PM.Utils.calcMiddleLatLng(e,r,i),B=this._getDistance(e,k,n);B<c&&B<m&&(_=k,b=B)}return s({},b<this.options.snapDistance?_:n)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(t,e,r,i){var n=t.getMaxZoom();n===1/0&&(n=t.getZoom());var c=t.project(e,n),m=t.project(r,n),_=t.project(i,n),b=L.LineUtil.closestPointOnSegment(c,m,_);return t.unproject(b,n)},_getDistanceToSegment:function(t,e,r,i){var n=t.latLngToLayerPoint(e),c=t.latLngToLayerPoint(r),m=t.latLngToLayerPoint(i);return L.LineUtil.pointToSegmentDistance(n,c,m)},_getDistance:function(t,e,r){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(r))}};const w=M,G=L.Class.extend({includes:[w,tt],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(t){L.Util.setOptions(this,t)},getOptions:function(){return this.options},initialize:function(t){var e=this,r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=t,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(i){e[i]=new L.PM.Draw[i](e._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=e?p()(this.options.pathOptions,t):t},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(t,e){if(!t)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[t].enable(e)},disable:function(){var t=this;this.shapes.forEach(function(e){t[e].disable()})},addControls:function(){var t=this;this.shapes.forEach(function(e){t[e].addButton()})},getActiveShape:function(){var t,e=this;return this.shapes.forEach(function(r){e[r]._enabled&&(t=r)}),t},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var t=L.PM.Utils.findLayers(this._map);this._enabled?t.forEach(function(e){L.PM.Utils.disablePopup(e)}):t.forEach(function(e){L.PM.Utils.enablePopup(e)})},createNewDrawInstance:function(t,e){var r=this._getShapeFromBtnName(e);if(this[t])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[r])throw new TypeError("There is no class L.PM.Draw.".concat(r));return this[t]=new L.PM.Draw[r](this._map),this[t].toolbarButtonName=t,this[t]._shape=t,this.shapes.push(t),this[e]&&this[t].setOptions(this[e].options),this[t].setOptions(this[t].options),this[t]},_getShapeFromBtnName:function(t){var e={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return e[t]?e[t]:this[t]?this[t]._shape:t},_finishLayer:function(t){t.pm&&(t.pm.setOptions(this.options),t.pm._shape=this._shape,t.pm._map=this._map),this._addDrawnLayerProp(t)},_addDrawnLayerProp:function(t){t._drawnByGeoman=!0},_setPane:function(t,e){e==="layerPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":e==="vertexPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":e==="markerPane"&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});G.Marker=G.extend({initialize:function(t){this._map=t,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker([0,0],this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(r){e.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(e){t.isRelevantMarker(e)&&e.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},isRelevantMarker:function(t){return t instanceof L.Marker&&t.pm&&!t._pmTempLayer&&!t.pm._initTextMarker},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(t){if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),r=new L.Marker(e,this.options.markerStyle);this._setPane(r,"markerPane"),this._finishLayer(r),r.pm||(r.options.draggable=!1),r.addTo(this._map.pm._getContainingLayer()),r.pm&&this.options.markerEditable?r.pm.enable():r.dragging&&r.dragging.disable(),this._fireCreate(r),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}}});var N=63710088e-1,q={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*N,kilometers:6371.0088,kilometres:6371.0088,meters:N,metres:N,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:N/1852,radians:1,yards:6967335223679999e-9};function rt(t,e,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=e||{},i.geometry=t,i}function ot(t,e,r){if(r===void 0&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!kt(t[0])||!kt(t[1]))throw new Error("coordinates must contain numbers");return rt({type:"Point",coordinates:t},e,r)}function st(t,e,r){if(r===void 0&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return rt({type:"LineString",coordinates:t},e,r)}function it(t,e){e===void 0&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function bt(t,e){e===void 0&&(e="kilometers");var r=q[e];if(!r)throw new Error(e+" units is invalid");return t*r}function dt(t,e){e===void 0&&(e="kilometers");var r=q[e];if(!r)throw new Error(e+" units is invalid");return t/r}function yt(t){return 180*(t%(2*Math.PI))/Math.PI}function ft(t){return t%360*Math.PI/180}function kt(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function xt(t){var e,r,i={type:"FeatureCollection",features:[]};if((r=t.type==="Feature"?t.geometry:t).type==="LineString")e=[r.coordinates];else if(r.type==="MultiLineString")e=r.coordinates;else if(r.type==="MultiPolygon")e=[].concat.apply([],r.coordinates);else{if(r.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=r.coordinates}return e.forEach(function(n){e.forEach(function(c){for(var m=0;m<n.length-1;m++)for(var _=m;_<c.length-1;_++)if(!(n===c&&(Math.abs(m-_)===1||m===0&&_===n.length-2&&n[m][0]===n[n.length-1][0]&&n[m][1]===n[n.length-1][1]))){var b=Ot(n[m][0],n[m][1],n[m+1][0],n[m+1][1],c[_][0],c[_][1],c[_+1][0],c[_+1][1]);b&&i.features.push(ot([b[0],b[1]]))}})}),i}function Ot(t,e,r,i,n,c,m,_){var b,k,B,z,T={x:null,y:null,onLine1:!1,onLine2:!1};return(b=(_-c)*(r-t)-(m-n)*(i-e))===0?T.x!==null&&T.y!==null&&T:(z=(r-t)*(k=e-c)-(i-e)*(B=t-n),k=((m-n)*k-(_-c)*B)/b,B=z/b,T.x=t+k*(r-t),T.y=e+k*(i-e),k>=0&&k<=1&&(T.onLine1=!0),B>=0&&B<=1&&(T.onLine2=!0),!(!T.onLine1||!T.onLine2)&&[T.x,T.y])}function wt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wt(Object(r),!0).forEach(function(i){Kt(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Kt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function jt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dt(Object(r),!0).forEach(function(i){Ut(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Ut(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ct(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Et(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Gt(t){return t.type==="Feature"?t.geometry:t}function Zt(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function be(t,e,r){if(t!==null)for(var i,n,c,m,_,b,k,B,z=0,T=0,F=t.type,J=F==="FeatureCollection",et=F==="Feature",at=J?t.features.length:1,pt=0;pt<at;pt++){_=(B=!!(k=J?t.features[pt].geometry:et?t.geometry:t)&&k.type==="GeometryCollection")?k.geometries.length:1;for(var _t=0;_t<_;_t++){var gt=0,Pt=0;if((m=B?k.geometries[_t]:k)!==null){b=m.coordinates;var Tt=m.type;switch(z=!r||Tt!=="Polygon"&&Tt!=="MultiPolygon"?0:1,Tt){case null:break;case"Point":if(e(b,T,pt,gt,Pt)===!1)return!1;T++,gt++;break;case"LineString":case"MultiPoint":for(i=0;i<b.length;i++){if(e(b[i],T,pt,gt,Pt)===!1)return!1;T++,Tt==="MultiPoint"&&gt++}Tt==="LineString"&&gt++;break;case"Polygon":case"MultiLineString":for(i=0;i<b.length;i++){for(n=0;n<b[i].length-z;n++){if(e(b[i][n],T,pt,gt,Pt)===!1)return!1;T++}Tt==="MultiLineString"&&gt++,Tt==="Polygon"&&Pt++}Tt==="Polygon"&&gt++;break;case"MultiPolygon":for(i=0;i<b.length;i++){for(Pt=0,n=0;n<b[i].length;n++){for(c=0;c<b[i][n].length-z;c++){if(e(b[i][n][c],T,pt,gt,Pt)===!1)return!1;T++}Pt++}gt++}break;case"GeometryCollection":for(i=0;i<m.geometries.length;i++)if(be(m.geometries[i],e,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ie(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var r=0;r<t.features.length&&e(t.features[r],r)!==!1;r++);}function mr(t,e){var r,i,n,c,m,_,b,k,B,z,T=0,F=t.type==="FeatureCollection",J=t.type==="Feature",et=F?t.features.length:1;for(r=0;r<et;r++){for(_=F?t.features[r].geometry:J?t.geometry:t,k=F?t.features[r].properties:J?t.properties:{},B=F?t.features[r].bbox:J?t.bbox:void 0,z=F?t.features[r].id:J?t.id:void 0,m=(b=!!_&&_.type==="GeometryCollection")?_.geometries.length:1,n=0;n<m;n++)if((c=b?_.geometries[n]:_)!==null)switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(e(c,T,k,B,z)===!1)return!1;break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(e(c.geometries[i],T,k,B,z)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(e(null,T,k,B,z)===!1)return!1;T++}}function ke(t,e){mr(t,function(r,i,n,c,m){var _,b=r===null?null:r.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return e(rt(r,n,{bbox:c,id:m}),i,0)!==!1&&void 0}switch(b){case"MultiPoint":_="Point";break;case"MultiLineString":_="LineString";break;case"MultiPolygon":_="Polygon"}for(var k=0;k<r.coordinates.length;k++){var B=r.coordinates[k];if(e(rt({type:_,coordinates:B},n),i,k)===!1)return!1}})}G.Line=G.extend({initialize:function(t){this._map=t,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],this.options.templineStyle),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._layer.getLatLngs();if(t.length>0){var e=t[t.length-1];this._hintline.setLatLngs([e,this._hintMarker.getLatLng()])}},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,t.latlng);var r=this._layer._defaultShape().slice();r.push(this._hintMarker.getLatLng()),this._change(r)},hasSelfIntersection:function(){return xt(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(t,e){var r=L.polyline(this._layer.getLatLngs());t&&(e||(e=this._hintMarker.getLatLng()),r.addLatLng(e));var i=xt(r.toGeoJSON(15));this._doesSelfIntersect=i.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(t){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,t.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();if(e.equals(this._layer.getLatLngs()[0]))this._finishShape(t);else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:e,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(e);var r=this._createMarker(e);this._setTooltipText(),this._hintline.setLatLngs([e,e]),this._fireVertexAdded(r,void 0,e,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(t)}}},_removeLastVertex:function(){var t=this._layer.getLatLngs(),e=t.pop();if(t.length<1)this.disable();else{var r=this._layerGroup.getLayers().filter(function(c){return c instanceof L.Marker}).filter(function(c){return!L.DomUtil.hasClass(c._icon,"cursor-marker")}).find(function(c){return c.getLatLng()===e}),i=this._layerGroup.getLayers().filter(function(c){return c instanceof L.Marker}),n=L.PM.Utils.findDeepMarkerIndex(i,r).indexPath;this._layerGroup.removeLayer(r),this._layer.setLatLngs(t),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(r,n,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=1)){var e=L.polyline(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),e.on("click",this._finishShape,this),e},_setTooltipText:function(){var t="";t=lt(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(t)},_change:function(t){this._fireChange(t,"Draw")}}),G.Polygon=G.Line.extend({initialize:function(t){this._map=t,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._layer.getLatLngs().flat().length===1?(e.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(e)-1,this.options.snappable&&this._cleanupSnapping()):e.on("click",function(){return 1}),e},_setTooltipText:function(){var t="";t=lt(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(t)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=2)){var e=L.polygon(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),G.Rectangle=G.extend({initialize:function(t){this._map=t,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(t){if(L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker([0,0],{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){L.DomUtil.addClass(this._hintMarker._icon,"visible"),this._styleMarkers=[];for(var e=0;e<2;e+=1){var r=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._styleMarkers.push(r)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_placeStartingMarkers:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(e),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(r){L.DomUtil.addClass(r._icon,"visible"),r.setLatLng(e)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(lt("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var t=this._startMarker.getLatLng();t&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([t,t]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}var r=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(r,"Draw")},_syncRectangleSize:function(){var t=this,e=oe(this._startMarker.getLatLng(),this._map),r=oe(this._hintMarker.getLatLng(),this._map),i=L.PM.Utils._getRotatedRectangle(e,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(i),this.options.cursorMarker&&this._styleMarkers){var n=[];i.forEach(function(c){c.equals(e,1e-8)||c.equals(r,1e-8)||n.push(c)}),n.forEach(function(c,m){try{t._styleMarkers[m].setLatLng(c)}catch{}})}},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),r=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var i=L.rectangle([r,e],this.options.pathOptions);if(this.options.rectangleAngle){var n=L.PM.Utils._getRotatedRectangle(r,e,this.options.rectangleAngle||0,this._map);i.setLatLngs(n),i.pm&&i.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(i,"layerPane"),this._finishLayer(i),i.addTo(this._map.pm._getContainingLayer()),this._fireCreate(i),this.disable(),this.options.continueDrawing&&this.enable()}}}),G.Circle=G.extend({initialize:function(t){this._map=t,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(t){L.Util.setOptions(this,t),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle([0,0],It(It({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker([0,0],{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t,e=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng();t=this._map.options.crs===L.CRS.Simple?this._map.distance(e,r):e.distanceTo(r),this.options.minRadiusCircle&&t<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&t>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping();var r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(lt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e,r=this._centerMarker.getLatLng(),i=this._hintMarker.getLatLng();e=this._map.options.crs===L.CRS.Simple?this._map.distance(r,i):r.distanceTo(i),this.options.minRadiusCircle&&e<this.options.minRadiusCircle?e=this.options.minRadiusCircle:this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle&&(e=this.options.maxRadiusCircle);var n=It(It({},this.options.pathOptions),{},{radius:e}),c=L.circle(r,n);this._setPane(c,"layerPane"),this._finishLayer(c),c.addTo(this._map.pm._getContainingLayer()),c.pm&&c.pm._updateHiddenPolyCircle(),this._fireCreate(c),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),r=t.distanceTo(e);return t.equals(L.latLng([0,0]))||(this.options.minRadiusCircle&&r<this.options.minRadiusCircle?e=At(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle&&(e=At(this._map,t,e,this.options.maxRadiusCircle))),e},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),r=t.distanceTo(e);t.equals(L.latLng([0,0]))||(this.options.minRadiusCircle&&r<this.options.minRadiusCircle||this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}}),G.CircleMarker=G.Marker.extend({initialize:function(t){this._map=t,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(t){var e=this;if(L.Util.setOptions(this,t),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var r={};L.setOptions(r,this.options.templineStyle),r.radius=0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker([0,0],r),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker([0,0],{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker([0,0],this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(i){e.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(e){t.isRelevantMarker(e)&&e.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(lt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),r=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(r)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping();var r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},isRelevantMarker:function(t){return t instanceof L.CircleMarker&&!(t instanceof L.Circle)&&t.pm&&!t._pmTempLayer},_createMarker:function(t){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&t.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),r=L.circleMarker(e,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),r.pm&&this.options.markerEditable&&r.pm.enable(),this._fireCreate(r),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),i=this._map.project(e).distanceTo(this._map.project(r));this.options.editable&&(this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker?i=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker&&(i=this.options.maxRadiusCircleMarker));var n=jt(jt({},this.options.pathOptions),{},{radius:i}),c=L.circleMarker(e,n);this._setPane(c,"layerPane"),this._finishLayer(c),c.addTo(this._map.pm._getContainingLayer()),c.pm&&c.pm._updateHiddenPolyCircle(),this._fireCreate(c),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._hintMarker.getLatLng();if(this.options.editable){var e=this._centerMarker.getLatLng();if(e.equals(L.latLng([0,0])))return t;var r=this._map.project(e).distanceTo(this._map.project(t));this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?t=At(this._map,e,t,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker&&(t=At(this._map,e,t,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return t},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),r=this._map.project(t).distanceTo(this._map.project(e));(this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(t){var e=this._centerMarker.getLatLng(),r=this._map.project(e),i=L.point(r.x+t,r.y);return this._map.unproject(i).distanceTo(e)}});const Me=function(t){if(!t)throw new Error("geojson is required");var e=[];return ke(t,function(r){(function(i,n){var c=[],m=i.geometry;if(m!==null){switch(m.type){case"Polygon":c=Et(m);break;case"LineString":c=[Et(m)]}c.forEach(function(_){var b=function(k,B){var z=[];return k.reduce(function(T,F){var J,et,at,pt,_t,gt,Pt=st([T,F],B);return Pt.bbox=(et=F,at=(J=T)[0],pt=J[1],_t=et[0],gt=et[1],[at<_t?at:_t,pt<gt?pt:gt,at>_t?at:_t,pt>gt?pt:gt]),z.push(Pt),F}),z}(_,i.properties);b.forEach(function(k){k.id=n.length,n.push(k)})})}})(r,e)}),it(e)};var xe=a(1787);function Ne(t,e){var r=Et(t),i=Et(e);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(i.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var n=r[0][0],c=r[0][1],m=r[1][0],_=r[1][1],b=i[0][0],k=i[0][1],B=i[1][0],z=i[1][1],T=(z-k)*(m-n)-(B-b)*(_-c),F=(B-b)*(c-k)-(z-k)*(n-b),J=(m-n)*(c-k)-(_-c)*(n-b);if(T===0)return null;var et=F/T,at=J/T;return et>=0&&et<=1&&at>=0&&at<=1?ot([n+et*(m-n),c+et*(_-c)]):null}const Ht=function(t,e){var r={},i=[];if(t.type==="LineString"&&(t=rt(t)),e.type==="LineString"&&(e=rt(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var n=Ne(t,e);return n&&i.push(n),it(i)}var c=xe();return c.load(Me(e)),ie(Me(t),function(m){ie(c.search(m),function(_){var b=Ne(m,_);if(b){var k=Et(b).join(",");r[k]||(r[k]=!0,i.push(b))}})}),it(i)},Xt=function(t,e,r){r===void 0&&(r={});var i=Ct(t),n=Ct(e),c=ft(n[1]-i[1]),m=ft(n[0]-i[0]),_=ft(i[1]),b=ft(n[1]),k=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(m/2),2)*Math.cos(_)*Math.cos(b);return bt(2*Math.atan2(Math.sqrt(k),Math.sqrt(1-k)),r.units)},_r=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];if(Xt(t.slice(0,2),[i,r])>=Xt(t.slice(0,2),[e,n])){var c=(r+n)/2;return[e,c-(i-e)/2,i,c+(i-e)/2]}var m=(e+i)/2;return[m-(n-r)/2,r,m+(n-r)/2,n]};function we(t){var e=[1/0,1/0,-1/0,-1/0];return be(t,function(r){e[0]>r[0]&&(e[0]=r[0]),e[1]>r[1]&&(e[1]=r[1]),e[2]<r[0]&&(e[2]=r[0]),e[3]<r[1]&&(e[3]=r[1])}),e}we.default=we;const ne=we,yr=function(t,e){e===void 0&&(e={});var r=e.precision,i=e.coordinates,n=e.mutate;if(r=r==null||isNaN(r)?6:r,i=i==null||isNaN(i)?3:i,!t)throw new Error("<geojson> is required");if(typeof r!="number")throw new Error("<precision> must be a number");if(typeof i!="number")throw new Error("<coordinates> must be a number");n!==!1&&n!==void 0||(t=JSON.parse(JSON.stringify(t)));var c=Math.pow(10,r);return be(t,function(m){(function(_,b,k){_.length>k&&_.splice(k,_.length);for(var B=0;B<_.length;B++)_[B]=Math.round(_[B]*b)/b})(m,c,i)}),t};function ze(t,e,r){if(r===void 0&&(r={}),r.final===!0)return function(z,T){var F=ze(T,z);return F=(F+180)%360}(t,e);var i=Ct(t),n=Ct(e),c=ft(i[0]),m=ft(n[0]),_=ft(i[1]),b=ft(n[1]),k=Math.sin(m-c)*Math.cos(b),B=Math.cos(_)*Math.sin(b)-Math.sin(_)*Math.cos(b)*Math.cos(m-c);return yt(Math.atan2(k,B))}function Ue(t,e,r,i){i===void 0&&(i={});var n=Ct(t),c=ft(n[0]),m=ft(n[1]),_=ft(r),b=dt(e,i.units),k=Math.asin(Math.sin(m)*Math.cos(b)+Math.cos(m)*Math.sin(b)*Math.cos(_));return ot([yt(c+Math.atan2(Math.sin(_)*Math.sin(b)*Math.cos(m),Math.cos(b)-Math.sin(m)*Math.sin(k))),yt(k)],i.properties)}const vr=function(t,e,r){r===void 0&&(r={});var i=ot([1/0,1/0],{dist:1/0}),n=0;return ke(t,function(c){for(var m=Et(c),_=0;_<m.length-1;_++){var b=ot(m[_]);b.properties.dist=Xt(e,b,r);var k=ot(m[_+1]);k.properties.dist=Xt(e,k,r);var B=Xt(b,k,r),z=Math.max(b.properties.dist,k.properties.dist),T=ze(b,k),F=Ue(e,z,T+90,r),J=Ue(e,z,T-90,r),et=Ht(st([F.geometry.coordinates,J.geometry.coordinates]),st([b.geometry.coordinates,k.geometry.coordinates])),at=null;et.features.length>0&&((at=et.features[0]).properties.dist=Xt(e,at,r),at.properties.location=n+Xt(b,at,r)),b.properties.dist<i.properties.dist&&((i=b).properties.index=_,i.properties.location=n),k.properties.dist<i.properties.dist&&((i=k).properties.index=_+1,i.properties.location=n+B),at&&at.properties.dist<i.properties.dist&&((i=at).properties.index=_),n+=B}}),i};function Ve(t,e){var r=[],i=xe();return ke(e,function(n){if(r.forEach(function(_,b){_.id=b}),r.length){var c=i.search(n);if(c.features.length){var m=Fe(n,c);r=r.filter(function(_){return _.id!==m.id}),i.remove(m),ie(Ce(m,n),function(_){r.push(_),i.insert(_)})}}else(r=Ce(t,n).features).forEach(function(_){_.bbox||(_.bbox=_r(ne(_)))}),i.load(it(r))}),it(r)}function Ce(t,e){var r=[],i=Et(t)[0],n=Et(t)[t.geometry.coordinates.length-1];if(Pe(i,Ct(e))||Pe(n,Ct(e)))return it([t]);var c=xe(),m=Me(t);c.load(m);var _=c.search(e);if(!_.features.length)return it([t]);var b=Fe(e,_),k=function(B,z,T){var F=T;return ie(B,function(J,et){F=et===0&&T===void 0?J:z(F,J,et)}),F}(m,function(B,z,T){var F=Et(z)[1],J=Ct(e);return T===b.id?(B.push(J),r.push(st(B)),Pe(J,F)?[J]:[J,F]):(B.push(F),B)},[i]);return k.length>1&&r.push(st(k)),it(r)}function Fe(t,e){if(!e.features.length)throw new Error("lines must contain features");if(e.features.length===1)return e.features[0];var r,i=1/0;return ie(e,function(n){var c=vr(n,t).properties.dist;c<i&&(r=n,i=c)}),r}function Pe(t,e){return t[0]===e[0]&&t[1]===e[1]}const Lr=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var r=Zt(t),i=Zt(e);if(r!=="LineString")throw new Error("line must be LineString");if(i==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(i==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var n=yr(e,{precision:7});switch(i){case"Point":return Ce(t,n);case"MultiPoint":return Ve(t,n);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Ve(t,Ht(t,n))}};function ue(t,e,r){if(r===void 0&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=Ct(t),n=Gt(e),c=n.type,m=e.bbox,_=n.coordinates;if(m&&function(T,F){return F[0]<=T[0]&&F[1]<=T[1]&&F[2]>=T[0]&&F[3]>=T[1]}(i,m)===!1)return!1;c==="Polygon"&&(_=[_]);for(var b=!1,k=0;k<_.length&&!b;k++)if(Ke(i,_[k][0],r.ignoreBoundary)){for(var B=!1,z=1;z<_[k].length&&!B;)Ke(i,_[k][z],!r.ignoreBoundary)&&(B=!0),z++;B||(b=!0)}return b}function Ke(t,e,r){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var n=0,c=e.length-1;n<e.length;c=n++){var m=e[n][0],_=e[n][1],b=e[c][0],k=e[c][1];if(t[1]*(m-b)+_*(b-t[0])+k*(t[0]-m)==0&&(m-t[0])*(b-t[0])<=0&&(_-t[1])*(k-t[1])<=0)return!r;_>t[1]!=k>t[1]&&t[0]<(b-m)*(t[1]-_)/(k-_)+m&&(i=!i)}return i}function br(t,e,r,i,n){var c=r[0],m=r[1],_=t[0],b=t[1],k=e[0],B=e[1],z=k-_,T=B-b,F=(r[0]-_)*T-(r[1]-b)*z;if(n!==null){if(Math.abs(F)>n)return!1}else if(F!==0)return!1;return i?i==="start"?Math.abs(z)>=Math.abs(T)?z>0?_<c&&c<=k:k<=c&&c<_:T>0?b<m&&m<=B:B<=m&&m<b:i==="end"?Math.abs(z)>=Math.abs(T)?z>0?_<=c&&c<k:k<c&&c<=_:T>0?b<=m&&m<B:B<m&&m<=b:i==="both"&&(Math.abs(z)>=Math.abs(T)?z>0?_<c&&c<k:k<c&&c<_:T>0?b<m&&m<B:B<m&&m<b):Math.abs(z)>=Math.abs(T)?z>0?_<=c&&c<=k:k<=c&&c<=_:T>0?b<=m&&m<=B:B<=m&&m<=b}const ae=function(t,e,r){r===void 0&&(r={});for(var i=Ct(t),n=Et(e),c=0;c<n.length-1;c++){var m=!1;if(r.ignoreEndVertices&&(c===0&&(m="start"),c===n.length-2&&(m="end"),c===0&&c+1===n.length-1&&(m="both")),br(n[c],n[c+1],i,m,typeof r.epsilon>"u"?null:r.epsilon))return!0}return!1};function kr(t,e){var r=Gt(t),i=Gt(e),n=r.type,c=i.type,m=r.coordinates,_=i.coordinates;switch(n){case"Point":if(c==="Point")return Ee(m,_);throw new Error("feature2 "+c+" geometry not supported");case"MultiPoint":switch(c){case"Point":return function(b,k){var B,z=!1;for(B=0;B<b.coordinates.length;B++)if(Ee(b.coordinates[B],k.coordinates)){z=!0;break}return z}(r,i);case"MultiPoint":return function(b,k){for(var B=0,z=k.coordinates;B<z.length;B++){for(var T=z[B],F=!1,J=0,et=b.coordinates;J<et.length;J++)if(Ee(T,et[J])){F=!0;break}if(!F)return!1}return!0}(r,i);default:throw new Error("feature2 "+c+" geometry not supported")}case"LineString":switch(c){case"Point":return ae(i,r,{ignoreEndVertices:!0});case"LineString":return function(b,k){for(var B=!1,z=0,T=k.coordinates;z<T.length;z++){var F=T[z];if(ae({type:"Point",coordinates:F},b,{ignoreEndVertices:!0})&&(B=!0),!ae({type:"Point",coordinates:F},b,{ignoreEndVertices:!1}))return!1}return B}(r,i);case"MultiPoint":return function(b,k){for(var B=!1,z=0,T=k.coordinates;z<T.length;z++){var F=T[z];if(ae(F,b,{ignoreEndVertices:!0})&&(B=!0),!ae(F,b))return!1}return!!B}(r,i);default:throw new Error("feature2 "+c+" geometry not supported")}case"Polygon":switch(c){case"Point":return ue(i,r,{ignoreBoundary:!0});case"LineString":return function(b,k){var B=!1,z=0,T=ne(b),F=ne(k);if(!He(T,F))return!1;for(;z<k.coordinates.length-1;z++)if(ue({type:"Point",coordinates:Mr(k.coordinates[z],k.coordinates[z+1])},b,{ignoreBoundary:!0})){B=!0;break}return B}(r,i);case"Polygon":return function(b,k){if(b.type==="Feature"&&b.geometry===null||k.type==="Feature"&&k.geometry===null)return!1;var B=ne(b),z=ne(k);if(!He(B,z))return!1;for(var T=Gt(k).coordinates,F=0,J=T;F<J.length;F++)for(var et=0,at=J[F];et<at.length;et++)if(!ue(at[et],b))return!1;return!0}(r,i);case"MultiPoint":return function(b,k){for(var B=0,z=k.coordinates;B<z.length;B++)if(!ue(z[B],b,{ignoreBoundary:!0}))return!1;return!0}(r,i);default:throw new Error("feature2 "+c+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function He(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Ee(t,e){return t[0]===e[0]&&t[1]===e[1]}function Mr(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var xr=a(2676),Xe=a.n(xr);function ce(t){var e={type:"Feature"};return e.geometry=t,e}function pe(t){return t.type==="Feature"?t.geometry:t}function qe(t){return t.geometry.coordinates}function Je(t){return ce({type:"Polygon",coordinates:t})}function Ye(t){return ce({type:"MultiPolygon",coordinates:t})}function $e(t){return Array.isArray(t)?1+$e(t[0]):-1}function wr(t){t instanceof L.Polyline&&(t=t.toGeoJSON(15));var e=qe(t),r=$e(e),i=[];return r>1?e.forEach(function(n){i.push(function(c){return ce({type:"LineString",coordinates:c})}(n))}):i.push(t),i}function Cr(t){var e=[];return t.eachLayer(function(r){e.push(qe(r.toGeoJSON(15)))}),function(r){return ce({type:"MultiLineString",coordinates:r})}(e)}function Pr(t,e){return function(r){if(Array.isArray(r))return r}(t)||function(r,i){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var c,m,_=[],b=!0,k=!1;try{for(n=n.call(r);!(b=(c=n.next()).done)&&(_.push(c.value),!i||_.length!==i);b=!0);}catch(B){k=!0,m=B}finally{try{b||n.return==null||n.return()}finally{if(k)throw m}}return _}}(t,e)||function(r,i){if(r){if(typeof r=="string")return Ze(r,i);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(r,i)}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ze(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function Er(t){return function(e){if(Array.isArray(e))return Se(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,r){if(e){if(typeof e=="string")return Se(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Se(e,r)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Se(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}G.Cut=G.Polygon.extend({initialize:function(t){this._map=t,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var t=this;if(this._editedLayers=[],this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect)){var e=this._layer.getLatLngs(),r=L.polygon(e,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(i){var n=i.layer,c=i.originalLayer;t._fireCut(c,n,c),t._fireCut(t._map,n,c),c.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}},cut:function(t){var e=this,r=this._map._layers,i=t._latlngInfos||[];Object.keys(r).map(function(n){return r[n]}).filter(function(n){return n.pm}).filter(function(n){return!n._pmTempLayer}).filter(function(n){return!L.PM.optIn&&!n.options.pmIgnore||L.PM.optIn&&n.options.pmIgnore===!1}).filter(function(n){return n instanceof L.Polyline}).filter(function(n){return n!==t}).filter(function(n){return n.pm.options.allowCutting}).filter(function(n){return!(e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0)||e.options.layersToCut.indexOf(n)>-1}).filter(function(n){return!e._layerGroup.hasLayer(n)}).filter(function(n){try{var c=!!Ht(t.toGeoJSON(15),n.toGeoJSON(15)).features.length>0;return c||n instanceof L.Polyline&&!(n instanceof L.Polygon)?c:(m=t.toGeoJSON(15),_=n.toGeoJSON(15),b=pe(m),k=pe(_),!((B=Xe().intersection(b.coordinates,k.coordinates)).length===0||!(B.length===1?Je(B[0]):Ye(B))))}catch{return n instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var m,_,b,k,B}).forEach(function(n){var c;if(n instanceof L.Polygon){var m=(c=L.polygon(n.getLatLngs())).getLatLngs();i.forEach(function(T){if(T&&T.snapInfo){var F=T.latlng,J=e._calcClosestLayer(F,[c]);if(J&&J.segment&&J.distance<e.options.snapDistance){var et=J.segment;if(et&&et.length===2){var at=L.PM.Utils._getIndexFromSegment(m,et),pt=at.indexPath,_t=at.parentPath,gt=at.newIndex;(pt.length>1?ct()(m,_t):m).splice(gt,0,F)}}}})}else c=n;var _=e._cutLayer(t,c),b=L.geoJSON(_,n.options);if(b.getLayers().length===1){var k=b.getLayers();b=Pr(k,1)[0]}e._setPane(b,"layerPane");var B=b.addTo(e._map.pm._getContainingLayer());if(B.pm.enable(n.pm.options),B.pm.disable(),n._pmTempLayer=!0,t._pmTempLayer=!0,n.remove(),n.removeFrom(e._map.pm._getContainingLayer()),t.remove(),t.removeFrom(e._map.pm._getContainingLayer()),B.getLayers&&B.getLayers().length===0&&e._map.pm.removeLayer({target:B}),B instanceof L.LayerGroup&&B.eachLayer(function(T){e._addDrawnLayerProp(T)}),e._addDrawnLayerProp(B),e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0){var z=e.options.layersToCut.indexOf(n);z>-1&&e.options.layersToCut.splice(z,1)}e._editedLayers.push({layer:B,originalLayer:n})})},_cutLayer:function(t,e){var r,i,n,c,m,_,b=L.geoJSON();if(e instanceof L.Polygon)i=e.toGeoJSON(15),n=t.toGeoJSON(15),c=pe(i),m=pe(n),r=(_=Xe().difference(c.coordinates,m.coordinates)).length===0?null:_.length===1?Je(_[0]):Ye(_);else{var k=wr(e);k.forEach(function(B){var z=Lr(B,t.toGeoJSON(15));(z&&z.features.length>0?L.geoJSON(z):L.geoJSON(B)).getLayers().forEach(function(T){kr(t.toGeoJSON(15),T.toGeoJSON(15))||T.addTo(b)})}),r=k.length>1?Cr(b):b.toGeoJSON(15)}return r},_change:L.Util.falseFn}),G.Text=G.extend({initialize:function(t){this._map=t,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lt("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}},_createMarker:function(t){var e;if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var r=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(e=this.options.textOptions)!==null&&e!==void 0&&e.className){var i,n=this.options.textOptions.className.split(" ");(i=this.textArea.classList).add.apply(i,Er(n))}var c=this._createTextIcon(this.textArea),m=new L.Marker(r,{textMarker:!0,_textMarkerOverPM:!0,icon:c});if(this._setPane(m,"markerPane"),this._finishLayer(m),m.pm||(m.options.draggable=!1),m.addTo(this._map.pm._getContainingLayer()),m.pm){var _,b,k,B,z;m.pm.textArea=this.textArea,L.setOptions(m.pm,{removeIfEmpty:(_=(b=this.options.textOptions)===null||b===void 0?void 0:b.removeIfEmpty)===null||_===void 0||_});var T=(k=(B=this.options.textOptions)===null||B===void 0?void 0:B.focusAfterDraw)===null||k===void 0||k;m.pm._createTextMarker(T),(z=this.options.textOptions)!==null&&z!==void 0&&z.text&&m.pm.setText(this.options.textOptions.text)}this._fireCreate(m),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var t=document.createElement("textarea");return t.autofocus=!0,t.readOnly=!0,t.classList.add("pm-textarea","pm-disabled"),t},_createTextIcon:function(t){return L.divIcon({className:"pm-text-marker",html:t})}});const Sr={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,zt(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var t=this._getDOMElem();t&&(zt(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(t)):L.DomEvent.on(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,zt(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var t=this._getDOMElem();t&&(zt(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(t)):L.DomEvent.off(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(t){var e=t.touches?t.touches[0]:t,r={originalEvent:e,target:this._layer};return r.containerPoint=this._map.mouseEventToContainerPoint(e),r.latlng=this._map.containerPointToLatLng(r.containerPoint),this._dragMixinOnMouseDown(r),!1},_simulateMouseMoveEvent:function(t){var e=t.touches?t.touches[0]:t,r={originalEvent:e,target:this._layer};return r.containerPoint=this._map.mouseEventToContainerPoint(e),r.latlng=this._map.containerPointToLatLng(r.containerPoint),this._dragMixinOnMouseMove(r),!1},_simulateMouseUpEvent:function(t){var e={originalEvent:t.touches?t.touches[0]:t,target:this._layer};return t.type.indexOf("touch")===-1&&(e.containerPoint=this._map.mouseEventToContainerPoint(t),e.latlng=this._map.containerPointToLatLng(e.containerPoint)),this._dragMixinOnMouseUp(e),!1},_dragMixinOnMouseDown:function(t){if(!(t.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(t);var e=t._fromLayerSync,r=this._syncLayers("_dragMixinOnMouseDown",t);this._layer instanceof L.Marker&&(!this.options.snappable||e||r?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||e||r?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=t.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(t){this._overwriteEventIfItComesFromMarker(t);var e=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",t),this._dragging||(this._dragging=!0,L.DomUtil.addClass(e,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=t.latlng),this._onLayerDrag(t),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(t){var e=this,r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",t),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){e._dragging=!1,r&&L.DomUtil.removeClass(r,"leaflet-pm-dragging"),e._fireDragEnd(),e._fireEdit()},10),!0)},_onLayerDrag:function(t){var e=t.latlng,r=e.lat-this._tempDragCoord.lat,i=e.lng-this._tempDragCoord.lng,n=function B(z){return z.map(function(T){if(Array.isArray(T))return B(T);var F={lat:T.lat+r,lng:T.lng+i};return(T.alt||T.alt===0)&&(F.alt=T.alt),F})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var c=n([this._layer.getLatLng()]);this._layer.setLatLng(c[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var m=this._layer.getLatLng();this._layer._snapped&&(m=this._layer._orgLatLng);var _=n([m]);this._layer.setLatLng(_[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var b=n([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(b),this._fireChange(this._layer.getBounds(),"Edit")}else{var k=n(this._layer.getLatLngs());this._layer.setLatLngs(k),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=e,t.layer=this._layer,this._fireDrag(t)},addDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.addClass(t,"leaflet-pm-draggable")},removeDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.removeClass(t,"leaflet-pm-draggable")},_getDOMElem:function(){var t=null;return this._layer._path?t=this._layer._path:this._layer._renderer&&this._layer._renderer._container?t=this._layer._renderer._container:this._layer._image?t=this._layer._image:this._layer._icon&&(t=this._layer._icon),t},_overwriteEventIfItComesFromMarker:function(t){t.target.getLatLng&&(!t.target._radius||t.target._radius<=10)&&(t.containerPoint=this._map.mouseEventToContainerPoint(t.originalEvent),t.latlng=this._map.containerPointToLatLng(t.containerPoint))},_syncLayers:function(t,e){var r=this;if(this.enabled())return!1;if(!e._fromLayerSync&&this._layer===e.target&&this.options.syncLayersOnDrag){e._fromLayerSync=!0;var i=[];if(L.Util.isArray(this.options.syncLayersOnDrag))i=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(m){m instanceof L.LayerGroup&&(i=i.concat(m.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var n in this._parentLayerGroup){var c=this._parentLayerGroup[n];c.pm&&(i=c.pm.getLayers(!0))}return L.Util.isArray(i)&&i.length>0&&(i=i.filter(function(m){return!!m.pm}).filter(function(m){return!!m.pm.options.draggable})).forEach(function(m){m!==r._layer&&m.pm[t]&&(m._snapped=!1,m.pm[t](e))}),i.length>0}return!1},_stopDOMImageDrag:function(t){return t.preventDefault(),!1}};function We(t,e,r){var i=r.getMaxZoom();if(i===1/0&&(i=r.getZoom()),L.Util.isArray(t)){var n=[];return t.forEach(function(c){n.push(We(c,e,r))}),n}return t instanceof L.LatLng?function(c,m,_,b){return _.unproject(m.transform(_.project(c,b)),b)}(t,e,r,i):null}function Wt(t,e){e instanceof L.Layer&&(e=e.getLatLng());var r=t.getMaxZoom();return r===1/0&&(r=t.getZoom()),t.project(e,r)}function ge(t,e){var r=t.getMaxZoom();return r===1/0&&(r=t.getZoom()),t.unproject(e,r)}var Or={_onRotateStart:function(t){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Wt(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Wt(this._map,t.target.getLatLng()),this._initialRotateLatLng=Nt(this._layer),this._startAngle=this.getAngle();var e=Nt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,e),this._fireRotationStart(this._map,e)},_onRotate:function(t){var e=Wt(this._map,t.target.getLatLng()),r=this._rotationStartPoint,i=this._rotationOriginPoint,n=Math.atan2(e.y-i.y,e.x-i.x)-Math.atan2(r.y-i.y,r.x-i.x);this._layer.setLatLngs(this._rotateLayer(n,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var c=this;(function k(B){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(T>-1&&z.push(T),L.Util.isArray(B[0]))B.forEach(function(J,et){return k(J,z.slice(),et)});else{var F=ct()(c._markers,z);B.forEach(function(J,et){F[et].setLatLng(J)})}})(this._layer.getLatLngs());var m=Nt(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(n,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var _=180*n/Math.PI,b=(_=_<0?_+360:_)+this._startAngle;this._setAngle(b),this._rotationLayer.pm._setAngle(b),this._fireRotation(this._rotationLayer,_,m),this._fireRotation(this._map,_,m),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var t=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var e=Nt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Nt(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,t,e),this._fireRotationEnd(this._map,t,e),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(t,e,r,i,n){var c=Wt(n,r);return this._matrix=i.clone().rotate(t,c).flip(),We(e,this._matrix,n)},_setAngle:function(t){t=t<0?t+360:t,this._angle=t%360},_getRotationCenter:function(){var t=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),e=t.getCenter();return t.removeFrom(this._layer._map),e},enableRotate:function(){this.options.allowRotation?(this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}).addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Nt(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(t){var e=this.getAngle(),r=this._layer.getLatLngs(),i=t*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(i,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+t),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(i,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var n=this.getAngle()-e;n=n<0?n+360:n,this._startAngle=e,this._fireRotation(this._layer,n,r,this._layer),this._fireRotation(this._map,n,r,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(t){var e=t-this.getAngle();this.rotateLayer(e)},getAngle:function(){return this._angle||0}};const Dr=Or,Mt=L.Class.extend({includes:[Sr,w,Dr,tt],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(t){L.Util.setOptions(this,t)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(t,e){e==="layerPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":e==="vertexPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":e==="markerPane"&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(t,e){var r=e.target,i={layer:this._layer,marker:r,event:e},n="";return t==="move"?n="moveVertexValidation":t==="add"?n="addVertexValidation":t==="remove"&&(n="removeVertexValidation"),this.options[n]&&typeof this.options[n]=="function"&&!this.options[n](i)?(t==="move"&&(r._cancelDragEventChain=r.getLatLng()),!1):(r._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(t){return!t._cancelDragEventChain||(t._latlng=t._cancelDragEventChain,t.update(),!1)},_vertexValidationDragEnd:function(t){return!t._cancelDragEventChain||(t._cancelDragEventChain=null,!1)}});function de(t){return function(e){if(Array.isArray(e))return Oe(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,r){if(e){if(typeof e=="string")return Oe(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Oe(e,r)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Oe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}Mt.LayerGroup=L.Class.extend({initialize:function(t){var e=this;this._layerGroup=t,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(r){return e._initLayer(r)}),this._layerGroup.on("layeradd",L.Util.throttle(function(r){if(!r.layer._pmTempLayer){e._layers=e.getLayers();var i=e._layers.filter(function(n){return!n.pm._parentLayerGroup||!(e._layerGroup._leaflet_id in n.pm._parentLayerGroup)});i.forEach(function(n){e._initLayer(n)}),i.length>0&&e._getMap()&&e._getMap().pm.globalEditModeEnabled()&&e.enabled()&&e.enable(e.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(r){e._removeLayerFromGroup(r.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(r){r.target._pmTempLayer||(e._layers=e.getLayers())},100,this),this)},enable:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach(function(r){r instanceof L.LayerGroup?e.indexOf(r._leaflet_id)===-1&&(e.push(r._leaflet_id),r.pm.enable(t,e)):r.pm.enable(t)})},disable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(e){e instanceof L.LayerGroup?t.indexOf(e._leaflet_id)===-1&&(t.push(e._leaflet_id),e.pm.disable(t)):e.pm.disable()})},enabled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.length===0&&(this._layers=this.getLayers());var e=this._layers.find(function(r){return r instanceof L.LayerGroup?t.indexOf(r._leaflet_id)===-1&&(t.push(r._leaflet_id),r.pm.enabled(t)):r.pm.enabled()});return!!e},toggleEdit:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach(function(r){r instanceof L.LayerGroup?e.indexOf(r._leaflet_id)===-1&&(e.push(r._leaflet_id),r.pm.toggleEdit(t,e)):r.pm.toggleEdit(t)})},_initLayer:function(t){var e=L.Util.stamp(this._layerGroup);t.pm._parentLayerGroup||(t.pm._parentLayerGroup={}),t.pm._parentLayerGroup[e]=this._layerGroup},_removeLayerFromGroup:function(t){if(t.pm&&t.pm._layerGroup){var e=L.Util.stamp(this._layerGroup);delete t.pm._layerGroup[e]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var t=this._layers.find(function(e){return e.pm.dragging()});return!!t}return!1},getOptions:function(){return this.options},_getMap:function(){var t;return this._map||((t=this._layers.find(function(e){return!!e._map}))===null||t===void 0?void 0:t._map)||null},getLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],n=[];return t?this._layerGroup.getLayers().forEach(function(c){n.push(c),c instanceof L.LayerGroup&&i.indexOf(c._leaflet_id)===-1&&(i.push(c._leaflet_id),n=n.concat(c.pm.getLayers(!0,!0,!0,i)))}):n=this._layerGroup.getLayers(),r&&(n=n.filter(function(c){return!(c instanceof L.LayerGroup)})),e&&(n=(n=(n=n.filter(function(c){return!!c.pm})).filter(function(c){return!c._pmTempLayer})).filter(function(c){return!L.PM.optIn&&!c.options.pmIgnore||L.PM.optIn&&c.options.pmIgnore===!1})),n},setOptions:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this.options=t,this._layers.forEach(function(r){r.pm&&(r instanceof L.LayerGroup?e.indexOf(r._leaflet_id)===-1&&(e.push(r._leaflet_id),r.pm.setOptions(t,e)):r.pm.setOptions(t))})}}),Mt.Marker=Mt.extend({_shape:"Marker",initialize:function(t){this._layer=t,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(t){var e=t.target;e.remove(),this._fireRemove(e),this._fireRemove(this._map,e)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)}});const Br={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.applyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.applyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var t=[].concat(de(this._markerGroup.getLayers()),de(this.markerCache));this.markerCache=t.filter(function(e,r,i){return i.indexOf(e)===r})},renderLimits:function(t){var e=this;this.markerCache.forEach(function(r){t.includes(r)?e._markerGroup.addLayer(r):e._markerGroup.removeLayer(r)})},applyLimitFilters:function(t){var e=t.latlng,r=e===void 0?{lat:0,lng:0}:e;if(!this._preventRenderMarkers){var i=de(this._filterClosestMarkers(r));this.renderLimits(i)}},_filterClosestMarkers:function(t){var e=de(this.markerCache),r=this.options.limitMarkersToCount;return e.sort(function(i,n){return i._latlng.distanceTo(t)-n._latlng.distanceTo(t)}),e.filter(function(i,n){return!(r>-1)||n<r})},_preventRenderMarkers:!1,_preventRenderingMarkers:function(t){this._preventRenderMarkers=!!t}};function Rr(t,e){return function(r){if(Array.isArray(r))return r}(t)||function(r,i){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var c,m,_=[],b=!0,k=!1;try{for(n=n.call(r);!(b=(c=n.next()).done)&&(_.push(c.value),!i||_.length!==i);b=!0);}catch(B){k=!0,m=B}finally{try{b||n.return==null||n.return()}finally{if(k)throw m}}return _}}(t,e)||function(r,i){if(r){if(typeof r=="string")return Qe(r,i);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qe(r,i)}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function Tr(t){return function(e){if(Array.isArray(e))return De(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,r){if(e){if(typeof e=="string")return De(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return De(e,r)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function De(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}Mt.Line=Mt.extend({includes:[Br],_shape:"Line",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this.hasSelfIntersection()&&L.DomUtil.removeClass(t,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){return this.enabled()?this.disable():this.enable(t),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var t=this,e=this._map,r=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,this._markers=function i(n){if(Array.isArray(n[0]))return n.map(i,t);var c=n.map(t._createMarker,t);return t.options.hideMiddleMarkers!==!0&&n.map(function(m,_){var b=t.isPolygon()?(_+1)%n.length:_+1;return t._createMiddleMarker(c[_],c[b])}),c}(r),this.filterMarkerGroup(),e.addLayer(this._markerGroup)},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this.options.rotate?(e.on("dragstart",this._onRotateStart,this),e.on("drag",this._onRotate,this),e.on("dragend",this._onRotateEnd,this)):(e.on("click",this._onVertexClick,this),e.on("dragstart",this._onMarkerDragStart,this),e.on("move",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||e.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(e),e},_createMiddleMarker:function(t,e){if(!t||!e)return!1;var r=L.PM.Utils.calcMiddleLatLng(this._map,t.getLatLng(),e.getLatLng()),i=this._createMarker(r),n=L.divIcon({className:"marker-icon marker-icon-middle"});return i.setIcon(n),i.leftM=t,i.rightM=e,t._middleMarkerNext=i,e._middleMarkerPrev=i,i.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),i.on("movestart",this._onMiddleMarkerMoveStart,this),i},_onMiddleMarkerClick:function(t){var e=t.target;if(this._vertexValidation("add",t)){var r=L.divIcon({className:"marker-icon"});e.setIcon(r),this._addMarker(e,e.leftM,e.rightM)}},_onMiddleMarkerMoveStart:function(t){var e=t.target;e.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",t)?(e._dragging=!0,this._addMarker(e,e.leftM,e.rightM)):e.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(t){var e=t.target;this._vertexValidationDrag(e)},_onMiddleMarkerMoveEnd:function(t){var e=t.target;if(e.off("move",this._onMiddleMarkerMovePrevent,this),e.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(e)){var r=L.divIcon({className:"marker-icon"});e.setIcon(r),setTimeout(function(){delete e._dragging},100)}},_addMarker:function(t,e,r){t.off("movestart",this._onMiddleMarkerMoveStart,this),t.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var i=t.getLatLng(),n=this._layer._latlngs;delete t.leftM,delete t.rightM;var c=L.PM.Utils.findDeepMarkerIndex(this._markers,e),m=c.indexPath,_=c.index,b=c.parentPath,k=m.length>1?ct()(n,b):n,B=m.length>1?ct()(this._markers,b):this._markers;k.splice(_+1,0,i),B.splice(_+1,0,t),this._layer.setLatLngs(n),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(e,t),this._createMiddleMarker(t,r)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(t,L.PM.Utils.findDeepMarkerIndex(this._markers,t).indexPath,i),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return xt(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(t){var e=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;t?this._flashLayer():(e.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(xt(this._layer.toGeoJSON(15)))}else e.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var t=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){t._layer.setStyle({color:t.cachedColor}),t.isRed=!1},200)},_updateDisabledMarkerStyle:function(t,e){var r=this;t.forEach(function(i){Array.isArray(i)?r._updateDisabledMarkerStyle(i,e):i._icon&&(e&&!r._checkMarkerAllowedToDrag(i)?L.DomUtil.addClass(i._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(i._icon,"vertexmarker-disabled"))})},_removeMarker:function(t){var e=t.target;if(this._vertexValidation("remove",t)){if(!this.options.allowSelfIntersection){var r=this._layer.getLatLngs();this._coordsBeforeEdit=JSON.parse(JSON.stringify(r))}var i=this._layer.getLatLngs(),n=L.PM.Utils.findDeepMarkerIndex(this._markers,e),c=n.indexPath,m=n.index,_=n.parentPath;if(c){var b=c.length>1?ct()(i,_):i,k=c.length>1?ct()(this._markers,_):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(b.length<=2||this.isPolygon()&&b.length<=3)){b.splice(m,1),this._layer.setLatLngs(i),this.isPolygon()&&b.length<=2&&b.splice(0,b.length);var B=!1;if(b.length<=1&&(b.splice(0,b.length),_.length>1&&c.length>1&&(i=Yt(i)),this._layer.setLatLngs(i),this.disable(),this.enable(this.options),B=!0),mt(i)||this._layer.remove(),i=Yt(i),this._layer.setLatLngs(i),this._markers=Yt(this._markers),!B&&(k=c.length>1?ct()(this._markers,_):this._markers,e._middleMarkerPrev&&this._markerGroup.removeLayer(e._middleMarkerPrev),e._middleMarkerNext&&this._markerGroup.removeLayer(e._middleMarkerNext),this._markerGroup.removeLayer(e),k)){var z,T;if(this.isPolygon()?(z=(m+1)%k.length,T=(m+(k.length-1))%k.length):(T=m-1<0?void 0:m-1,z=m+1>=k.length?void 0:m+1),z!==T){var F=k[T],J=k[z];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(F,J)}k.splice(m,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(e,c),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(t){var e=this._layer.getLatLngs(),r=t.getLatLng(),i=L.PM.Utils.findDeepMarkerIndex(this._markers,t),n=i.indexPath,c=i.index,m=i.parentPath;(n.length>1?ct()(e,m):e).splice(c,1,r),this._layer.setLatLngs(e)},_getNeighborMarkers:function(t){var e=L.PM.Utils.findDeepMarkerIndex(this._markers,t),r=e.indexPath,i=e.index,n=e.parentPath,c=r.length>1?ct()(this._markers,n):this._markers,m=(i+1)%c.length;return{prevMarker:c[(i+(c.length-1))%c.length],nextMarker:c[m]}},_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),r=e.prevMarker,i=e.nextMarker,n=L.polyline([r.getLatLng(),t.getLatLng()]),c=L.polyline([t.getLatLng(),i.getLatLng()]),m=Ht(this._layer.toGeoJSON(15),n.toGeoJSON(15)).features.length,_=Ht(this._layer.toGeoJSON(15),c.toGeoJSON(15)).features.length;return t.getLatLng()===this._markers[0][0].getLatLng()?_+=1:t.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(m+=1),!(m<=2&&_<=2)},_onMarkerDragStart:function(t){var e=t.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",t)){var r=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath;this._fireMarkerDragStart(t,r),this.options.allowSelfIntersection||(this._coordsBeforeEdit=this._layer.getLatLngs()),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(e):this._markerAllowedToDrag=null}},_onMarkerDrag:function(t){var e=t.target;if(this._vertexValidationDrag(e)){var r=L.PM.Utils.findDeepMarkerIndex(this._markers,e),i=r.indexPath,n=r.index,c=r.parentPath;if(i){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(e);var m=i.length>1?ct()(this._markers,c):this._markers,_=(n+1)%m.length,b=(n+(m.length-1))%m.length,k=e.getLatLng(),B=m[b].getLatLng(),z=m[_].getLatLng();if(e._middleMarkerNext){var T=L.PM.Utils.calcMiddleLatLng(this._map,k,z);e._middleMarkerNext.setLatLng(T)}if(e._middleMarkerPrev){var F=L.PM.Utils.calcMiddleLatLng(this._map,k,B);e._middleMarkerPrev.setLatLng(F)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(t,i),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(t){var e=t.target;if(this._vertexValidationDragEnd(e)){var r=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath,i=this.hasSelfIntersection();i&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(i=!1);var n=!this.options.allowSelfIntersection&&i;if(this._fireMarkerDragEnd(t,r,n),n)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(t,r);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(t){var e=t.target;if(!e._dragging){var r=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath;this._fireVertexClick(t,r)}}}),Mt.Polygon=Mt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),r=e.prevMarker,i=e.nextMarker,n=L.polyline([r.getLatLng(),t.getLatLng()]),c=L.polyline([t.getLatLng(),i.getLatLng()]),m=Ht(this._layer.toGeoJSON(15),n.toGeoJSON(15)).features.length,_=Ht(this._layer.toGeoJSON(15),c.toGeoJSON(15)).features.length;return!(m<=2&&_<=2)}}),Mt.Rectangle=Mt.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var t=this,e=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,e.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this);var i=Rr(this._markers,1);this._cornerMarkers=i[0],this._layer.getLatLngs()[0].forEach(function(n,c){var m=t._cornerMarkers.find(function(_){return _._index===c});m&&m.setLatLng(n)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(t,e){var r=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=t,r._index=e,r._pmTempLayer=!0,this._markerGroup.addLayer(r),r},_addMarkerEvents:function(){var t=this;this._markers[0].forEach(function(e){e.on("dragstart",t._onMarkerDragStart,t),e.on("drag",t._onMarkerDrag,t),e.on("dragend",t._onMarkerDragEnd,t),t.options.preventMarkerRemoval||e.on("contextmenu",t._removeMarker,t)})},_removeMarker:function(){return null},_onMarkerDragStart:function(t){if(this._vertexValidation("move",t)){var e=t.target,r=this._cornerMarkers;e._oppositeCornerLatLng=r.find(function(i){return i._index===(e._index+2)%4}).getLatLng(),e._snapped=!1,this._fireMarkerDragStart(t)}},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&e._index!==void 0&&(this._adjustRectangleForMarkerMove(e),this._fireMarkerDrag(t),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._cornerMarkers.forEach(function(r){delete r._oppositeCornerLatLng}),this._fireMarkerDragEnd(t),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(t){L.extend(t._origLatLng,t._latlng);var e=L.PM.Utils._getRotatedRectangle(t.getLatLng(),t._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(e),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var t=this,e=this._layer.getLatLngs()[0];e&&e.length!==4&&e.length>0?(e.forEach(function(r,i){t._cornerMarkers[i].setLatLng(r)}),this._cornerMarkers.slice(e.length).forEach(function(r){r.setLatLng(e[0])})):e&&e.length?this._cornerMarkers.forEach(function(r){r.setLatLng(e[r._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){var t=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(t[0],t[2],this._angle||0,this._map)}}),Mt.Circle=Mt.extend({_shape:"Circle",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){if(this.enabled()&&!this._dragging){this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers();var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),r=this._layer._radius,i=this._getLatLngOnCircle(e,r);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(i),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(t,e){var r=t.getLatLng(),i=e.getLatLng();this._hintline=L.polyline([r,i],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"),e.on("drag",this._moveCircle,this),e.on("dragstart",this._onCircleDragStart,this),e.on("drag",this._onCircleDrag,this),e.on("dragend",this._onCircleDragEnd,this),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(t){if(!t.target._cancelDragEventChain){var e=t.latlng;this._layer.setLatLng(e);var r=this._layer._radius,i=this._getLatLngOnCircle(e,r);this._outerMarker._latlng=i,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),r=this._map.distance(t,e);this.options.minRadiusCircle&&r<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(r),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_disableSnapping:function(){var t=this;this._markers.forEach(function(e){e.off("move",t._syncHintLine,t),e.off("move",t._syncCircleRadius,t),e.off("drag",t._handleSnapping,t),e.off("dragend",t._cleanupSnapping,t)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(t))},_onCircleDragStart:function(t){this._vertexValidationDrag(t.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(t){this._vertexValidationReset||this._fireDrag(t)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var t=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!t).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!t),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(t,e){var r=this._map.project(t),i=L.point(r.x+e,r.y);return this._map.unproject(i)},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),r=this._map.distance(t,e);return this.options.minRadiusCircle&&r<this.options.minRadiusCircle?e=At(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle&&(e=At(this._map,t,e,this.options.maxRadiusCircle)),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),r=this._map.distance(t,e);(this.options.minRadiusCircle&&r<this.options.minRadiusCircle||this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),Mt.CircleMarker=Mt.extend({_shape:"CircleMarker",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),r=this._layer._radius,i=this._getLatLngOnCircle(e,r);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(i),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(t,e){var r=this._map.project(t),i=L.point(r.x+e,r.y);return this._map.unproject(i)},_createHintLine:function(t,e){var r=t.getLatLng(),i=e.getLatLng();this._hintline=L.polyline([r,i],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return this.options.draggable?L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"):e.dragging.disable(),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_moveCircle:function(){var t=this._centerMarker.getLatLng();this._layer.setLatLng(t);var e=this._layer._radius,r=this._getLatLngOnCircle(t,e);this._outerMarker._latlng=r,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var t=this._layer.getLatLng(),e=this._layer._radius,r=this._getLatLngOnCircle(t,e);this._outerMarker.setLatLng(r),this._centerMarker.setLatLng(t),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),r=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(r),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;e instanceof L.Marker&&!this._vertexValidationDrag(e)||this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var e=t.target;this._vertexValidationDragEnd(e)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(t))},_initSnappableMarkersDrag:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var t=this._layer._map||this._map;if(t){var e=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),t,this._layer.getLatLng()),r=L.circle(this._layer.getLatLng(),this._layer.options);r.setRadius(e);var i=t&&t.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(r,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(r,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),r=this._map.project(t).distanceTo(this._map.project(e));return this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?e=At(this._map,t,e,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,t)):this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker&&(e=At(this._map,t,e,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,t))),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),r=this._map.project(t).distanceTo(this._map.project(e));(this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),Mt.ImageOverlay=Mt.extend({_shape:"ImageOverlay",initialize:function(t){this._layer=t,this._enabled=!1},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enabled:function(){return this._enabled},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),Mt.Text=Mt.extend({_shape:"Text",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var t=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),t.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var t=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,e=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(t,"px"),this.textArea.style.width="".concat(e,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var t=this;this._disableOnBlurActive=!0,setTimeout(function(){t.enabled()&&L.DomEvent.on(document,"click",t._documentClick,t)},100)},_documentClick:function(t){t.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._hasFocus=t.type==="focus",this._hasFocus?this._applyFocus():this._removeFocus()},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(t){this.textArea.value=t,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var t,e=this.options.className.split(" ");(t=this.textArea.classList).add.apply(t,Tr(e))}var r=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(r),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),t===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(t){t.preventDefault()}});var Be=function(t,e,r,i,n,c){this._matrix=[t,e,r,i,n,c]};Be.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},Be.prototype={transform:function(t){return this._transform(t.clone())},_transform:function(t){var e=this._matrix,r=t.x,i=t.y;return t.x=e[0]*r+e[1]*i+e[4],t.y=e[2]*r+e[3]*i+e[5],t},untransform:function(t){var e=this._matrix;return new L.Point((t.x/e[0]-e[4])/e[0],(t.y/e[2]-e[5])/e[2])},clone:function(){var t=this._matrix;return new L.PM.Matrix(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(t){return t===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof t=="number"?(e=t,r=t):(e=t.x,r=t.y),this._add(1,0,0,1,e,r));var e,r},scale:function(t,e){return t===void 0?new L.Point(this._matrix[0],this._matrix[3]):(e=e||L.point(0,0),typeof t=="number"?(r=t,i=t):(r=t.x,i=t.y),this._add(r,0,0,i,e.x,e.y)._add(1,0,0,1,-e.x,-e.y));var r,i},rotate:function(t,e){var r=Math.cos(t),i=Math.sin(t);return e=e||new L.Point(0,0),this._add(r,i,-i,r,e.x,e.y)._add(1,0,0,1,-e.x,-e.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(t,e,r,i,n,c){var m,_=[[],[],[]],b=this._matrix,k=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],B=[[t,r,n],[e,i,c],[0,0,1]];t&&t instanceof L.PM.Matrix&&(B=[[(b=t._matrix)[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(var z=0;z<3;z+=1)for(var T=0;T<3;T+=1){m=0;for(var F=0;F<3;F+=1)m+=k[z][F]*B[F][T];_[z][T]=m}return this._matrix=[_[0][0],_[1][0],_[0][1],_[1][1],_[0][2],_[1][2]],this}};const Ir=Be;var jr={calcMiddleLatLng:function(t,e,r){var i=t.project(e),n=t.project(r);return t.unproject(i._add(n)._divideBy(2))},findLayers:function(t){var e=[];return t.eachLayer(function(r){(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&e.push(r)}),e=(e=(e=e.filter(function(r){return!!r.pm})).filter(function(r){return!r._pmTempLayer})).filter(function(r){return!L.PM.optIn&&!r.options.pmIgnore||L.PM.optIn&&r.options.pmIgnore===!1})},circleToPolygon:function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],i=t.getLatLng(),n=t.getRadius(),c=te(i,n,e,0,r),m=[],_=0;_<c.length;_+=1){var b=[c[_].lat,c[_].lng];m.push(b)}return L.polygon(m,t.options)},disablePopup:function(t){t.getPopup()&&(t._tempPopupCopy=t.getPopup(),t.unbindPopup())},enablePopup:function(t){t._tempPopupCopy&&(t.bindPopup(t._tempPopupCopy),delete t._tempPopupCopy)},_fireEvent:function(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];t.fire(e,r,i);var n=this.getAllParentGroups(t),c=n.groups;c.forEach(function(m){m.fire(e,r,i)})},getAllParentGroups:function(t){var e=[],r=[];return!t._pmLastGroupFetch||!t._pmLastGroupFetch.time||new Date().getTime()-t._pmLastGroupFetch.time>1e3?(function i(n){for(var c in n._eventParents)if(e.indexOf(c)===-1){e.push(c);var m=n._eventParents[c];r.push(m),i(m)}}(t),t._pmLastGroupFetch={time:new Date().getTime(),groups:r,groupIds:e},{groupIds:e,groups:r}):{groups:t._pmLastGroupFetch.groups,groupIds:t._pmLastGroupFetch.groupIds}},createGeodesicPolygon:te,getTranslation:lt,findDeepCoordIndex:function(t,e){var r;t.some(function n(c){return function(m,_){var b=c.concat(_);return m.lat&&m.lat===e.lat&&m.lng===e.lng?(r=b,!0):Array.isArray(m)&&m.some(n(b))}}([]));var i={};return r&&(i={indexPath:r,index:r[r.length-1],parentPath:r.slice(0,r.length-1)}),i},findDeepMarkerIndex:function(t,e){var r;t.some(function n(c){return function(m,_){var b=c.concat(_);return m._leaflet_id===e._leaflet_id?(r=b,!0):Array.isArray(m)&&m.some(n(b))}}([]));var i={};return r&&(i={indexPath:r,index:r[r.length-1],parentPath:r.slice(0,r.length-1)}),i},_getIndexFromSegment:function(t,e){if(e&&e.length===2){var r=this.findDeepCoordIndex(t,e[0]),i=this.findDeepCoordIndex(t,e[1]),n=Math.max(r.index,i.index);return r.index!==0&&i.index!==0||n===1||(n+=1),{indexA:r,indexB:i,newIndex:n,indexPath:r.indexPath,parentPath:r.parentPath}}return null},_getRotatedRectangle:function(t,e,r,i){var n=Wt(i,t),c=Wt(i,e),m=r*Math.PI/180,_=Math.cos(m),b=Math.sin(m),k=(c.x-n.x)*_+(c.y-n.y)*b,B=(c.y-n.y)*_-(c.x-n.x)*b,z=k*_+n.x,T=k*b+n.y,F=-B*b+n.x,J=B*_+n.y;return[ge(i,n),ge(i,{x:z,y:T}),ge(i,c),ge(i,{x:F,y:J})]},pxRadiusToMeterRadius:function(t,e,r){var i=e.project(r),n=L.point(i.x+t,i.y);return e.distance(e.unproject(n),r)}};const Gr=jr;L.PM=L.PM||{version:"2.13.1",Map:ye,Toolbar:v,Draw:G,Edit:Mt,Utils:Gr,Matrix:Ir,activeLang:"en",optIn:!1,initialize:function(t){this.addInitHooks(t)},setOptIn:function(t){this.optIn=!!t},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this))}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(t){var e=this;t instanceof L.LayerGroup&&t.eachLayer(function(r){e.reInitLayer(r)}),t.pm||L.PM.optIn&&t.options.pmIgnore!==!1||t.options.pmIgnore||(t instanceof L.Map?t.pm=new L.PM.Map(t):t instanceof L.Marker?t.options.textMarker?(t.pm=new L.PM.Edit.Text(t),t.pm._initTextMarker(),t.pm._createTextMarker(!1)):t.pm=new L.PM.Edit.Marker(t):t instanceof L.Circle?t.pm=new L.PM.Edit.Circle(t):t instanceof L.CircleMarker?t.pm=new L.PM.Edit.CircleMarker(t):t instanceof L.Rectangle?t.pm=new L.PM.Edit.Rectangle(t):t instanceof L.Polygon?t.pm=new L.PM.Edit.Polygon(t):t instanceof L.Polyline?t.pm=new L.PM.Edit.Line(t):t instanceof L.LayerGroup?t.pm=new L.PM.Edit.LayerGroup(t):t instanceof L.ImageOverlay&&(t.pm=new L.PM.Edit.ImageOverlay(t)))}},L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(l){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),a=h.length>>>0,u=arguments[1],p=0;p<a;p++)if(l.call(u,h[p],p,h))return p;return-1},Array.prototype.find=Array.prototype.find||function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),a=h.length>>>0,u=arguments[1],p=0;p<a;p++){var y=h[p];if(l.call(u,y,p,h))return y}},typeof Object.assign!="function"&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");l=Object(l);for(var h=1;h<arguments.length;h++){var a=arguments[h];if(a!=null)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(l[u]=a[u])}return l}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(l){l.hasOwnProperty("remove")||Object.defineProperty(l,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(l,h){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),u=a.length>>>0;if(u===0)return!1;for(var p,y,d=0|h,C=Math.max(d>=0?d:u-Math.abs(d),0);C<u;){if((p=a[C])===(y=l)||typeof p=="number"&&typeof y=="number"&&isNaN(p)&&isNaN(y))return!0;C++}return!1}})},1787:(l,h,a)=>{var u=a(2582),p=a(4102),y=a(1540),d=a(9705).Z,C=y.featureEach,j=(y.coordEach,p.polygon,p.featureCollection);function A(K){var R=new u(K);return R.insert=function(E){if(E.type!=="Feature")throw new Error("invalid feature");return E.bbox=E.bbox?E.bbox:d(E),u.prototype.insert.call(this,E)},R.load=function(E){var I=[];return Array.isArray(E)?E.forEach(function(P){if(P.type!=="Feature")throw new Error("invalid features");P.bbox=P.bbox?P.bbox:d(P),I.push(P)}):C(E,function(P){if(P.type!=="Feature")throw new Error("invalid features");P.bbox=P.bbox?P.bbox:d(P),I.push(P)}),u.prototype.load.call(this,I)},R.remove=function(E,I){if(E.type!=="Feature")throw new Error("invalid feature");return E.bbox=E.bbox?E.bbox:d(E),u.prototype.remove.call(this,E,I)},R.clear=function(){return u.prototype.clear.call(this)},R.search=function(E){var I=u.prototype.search.call(this,this.toBBox(E));return j(I)},R.collides=function(E){return u.prototype.collides.call(this,this.toBBox(E))},R.all=function(){var E=u.prototype.all.call(this);return j(E)},R.toJSON=function(){return u.prototype.toJSON.call(this)},R.fromJSON=function(E){return u.prototype.fromJSON.call(this,E)},R.toBBox=function(E){var I;if(E.bbox)I=E.bbox;else if(Array.isArray(E)&&E.length===4)I=E;else if(Array.isArray(E)&&E.length===6)I=[E[0],E[1],E[3],E[4]];else if(E.type==="Feature")I=d(E);else{if(E.type!=="FeatureCollection")throw new Error("invalid geojson");I=d(E)}return{minX:I[0],minY:I[1],maxX:I[2],maxY:I[3]}},R}l.exports=A,l.exports.default=A},1989:(l,h,a)=>{var u=a(1789),p=a(401),y=a(7667),d=a(1327),C=a(1866);function j(A){var K=-1,R=A==null?0:A.length;for(this.clear();++K<R;){var E=A[K];this.set(E[0],E[1])}}j.prototype.clear=u,j.prototype.delete=p,j.prototype.get=y,j.prototype.has=d,j.prototype.set=C,l.exports=j},8407:(l,h,a)=>{var u=a(7040),p=a(4125),y=a(2117),d=a(7518),C=a(4705);function j(A){var K=-1,R=A==null?0:A.length;for(this.clear();++K<R;){var E=A[K];this.set(E[0],E[1])}}j.prototype.clear=u,j.prototype.delete=p,j.prototype.get=y,j.prototype.has=d,j.prototype.set=C,l.exports=j},7071:(l,h,a)=>{var u=a(852)(a(5639),"Map");l.exports=u},3369:(l,h,a)=>{var u=a(4785),p=a(1285),y=a(6e3),d=a(9916),C=a(5265);function j(A){var K=-1,R=A==null?0:A.length;for(this.clear();++K<R;){var E=A[K];this.set(E[0],E[1])}}j.prototype.clear=u,j.prototype.delete=p,j.prototype.get=y,j.prototype.has=d,j.prototype.set=C,l.exports=j},6384:(l,h,a)=>{var u=a(8407),p=a(7465),y=a(3779),d=a(7599),C=a(4758),j=a(4309);function A(K){var R=this.__data__=new u(K);this.size=R.size}A.prototype.clear=p,A.prototype.delete=y,A.prototype.get=d,A.prototype.has=C,A.prototype.set=j,l.exports=A},2705:(l,h,a)=>{var u=a(5639).Symbol;l.exports=u},1149:(l,h,a)=>{var u=a(5639).Uint8Array;l.exports=u},6874:l=>{l.exports=function(h,a,u){switch(u.length){case 0:return h.call(a);case 1:return h.call(a,u[0]);case 2:return h.call(a,u[0],u[1]);case 3:return h.call(a,u[0],u[1],u[2])}return h.apply(a,u)}},4636:(l,h,a)=>{var u=a(2545),p=a(5694),y=a(1469),d=a(4144),C=a(5776),j=a(6719),A=Object.prototype.hasOwnProperty;l.exports=function(K,R){var E=y(K),I=!E&&p(K),P=!E&&!I&&d(K),S=!E&&!I&&!P&&j(K),D=E||I||P||S,f=D?u(K.length,String):[],x=f.length;for(var O in K)!R&&!A.call(K,O)||D&&(O=="length"||P&&(O=="offset"||O=="parent")||S&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||C(O,x))||f.push(O);return f}},9932:l=>{l.exports=function(h,a){for(var u=-1,p=h==null?0:h.length,y=Array(p);++u<p;)y[u]=a(h[u],u,h);return y}},6556:(l,h,a)=>{var u=a(9465),p=a(7813);l.exports=function(y,d,C){(C!==void 0&&!p(y[d],C)||C===void 0&&!(d in y))&&u(y,d,C)}},4865:(l,h,a)=>{var u=a(9465),p=a(7813),y=Object.prototype.hasOwnProperty;l.exports=function(d,C,j){var A=d[C];y.call(d,C)&&p(A,j)&&(j!==void 0||C in d)||u(d,C,j)}},8470:(l,h,a)=>{var u=a(7813);l.exports=function(p,y){for(var d=p.length;d--;)if(u(p[d][0],y))return d;return-1}},9465:(l,h,a)=>{var u=a(8777);l.exports=function(p,y,d){y=="__proto__"&&u?u(p,y,{configurable:!0,enumerable:!0,value:d,writable:!0}):p[y]=d}},3118:(l,h,a)=>{var u=a(3218),p=Object.create,y=function(){function d(){}return function(C){if(!u(C))return{};if(p)return p(C);d.prototype=C;var j=new d;return d.prototype=void 0,j}}();l.exports=y},8483:(l,h,a)=>{var u=a(5063)();l.exports=u},7786:(l,h,a)=>{var u=a(1811),p=a(327);l.exports=function(y,d){for(var C=0,j=(d=u(d,y)).length;y!=null&&C<j;)y=y[p(d[C++])];return C&&C==j?y:void 0}},4239:(l,h,a)=>{var u=a(2705),p=a(9607),y=a(2333),d=u?u.toStringTag:void 0;l.exports=function(C){return C==null?C===void 0?"[object Undefined]":"[object Null]":d&&d in Object(C)?p(C):y(C)}},8565:l=>{var h=Object.prototype.hasOwnProperty;l.exports=function(a,u){return a!=null&&h.call(a,u)}},9454:(l,h,a)=>{var u=a(4239),p=a(7005);l.exports=function(y){return p(y)&&u(y)=="[object Arguments]"}},8458:(l,h,a)=>{var u=a(3560),p=a(5346),y=a(3218),d=a(346),C=/^\[object .+?Constructor\]$/,j=Function.prototype,A=Object.prototype,K=j.toString,R=A.hasOwnProperty,E=RegExp("^"+K.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");l.exports=function(I){return!(!y(I)||p(I))&&(u(I)?E:C).test(d(I))}},8749:(l,h,a)=>{var u=a(4239),p=a(1780),y=a(7005),d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Arguments]"]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d["[object Map]"]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1,l.exports=function(C){return y(C)&&p(C.length)&&!!d[u(C)]}},313:(l,h,a)=>{var u=a(3218),p=a(5726),y=a(3498),d=Object.prototype.hasOwnProperty;l.exports=function(C){if(!u(C))return y(C);var j=p(C),A=[];for(var K in C)(K!="constructor"||!j&&d.call(C,K))&&A.push(K);return A}},2980:(l,h,a)=>{var u=a(6384),p=a(6556),y=a(8483),d=a(9783),C=a(3218),j=a(1704),A=a(6390);l.exports=function K(R,E,I,P,S){R!==E&&y(E,function(D,f){if(S||(S=new u),C(D))d(R,E,f,I,K,P,S);else{var x=P?P(A(R,f),D,f+"",R,E,S):void 0;x===void 0&&(x=D),p(R,f,x)}},j)}},9783:(l,h,a)=>{var u=a(6556),p=a(4626),y=a(7133),d=a(278),C=a(8517),j=a(5694),A=a(1469),K=a(9246),R=a(4144),E=a(3560),I=a(3218),P=a(8630),S=a(6719),D=a(6390),f=a(9881);l.exports=function(x,O,V,Y,X,$,Q){var Z=D(x,V),W=D(O,V),ut=Q.get(W);if(ut)u(x,V,ut);else{var tt=$?$(Z,W,V+"",x,O,Q):void 0,ht=tt===void 0;if(ht){var vt=A(W),ct=!vt&&R(W),Lt=!vt&&!ct&&S(W);tt=W,vt||ct||Lt?A(Z)?tt=Z:K(Z)?tt=d(Z):ct?(ht=!1,tt=p(W,!0)):Lt?(ht=!1,tt=y(W,!0)):tt=[]:P(W)||j(W)?(tt=Z,j(Z)?tt=f(Z):I(Z)&&!E(Z)||(tt=C(W))):ht=!1}ht&&(Q.set(W,tt),X(tt,W,Y,$,Q),Q.delete(W)),u(x,V,tt)}}},5976:(l,h,a)=>{var u=a(6557),p=a(5357),y=a(61);l.exports=function(d,C){return y(p(d,C,u),d+"")}},6560:(l,h,a)=>{var u=a(5703),p=a(8777),y=a(6557),d=p?function(C,j){return p(C,"toString",{configurable:!0,enumerable:!1,value:u(j),writable:!0})}:y;l.exports=d},2545:l=>{l.exports=function(h,a){for(var u=-1,p=Array(h);++u<h;)p[u]=a(u);return p}},531:(l,h,a)=>{var u=a(2705),p=a(9932),y=a(1469),d=a(3448),C=u?u.prototype:void 0,j=C?C.toString:void 0;l.exports=function A(K){if(typeof K=="string")return K;if(y(K))return p(K,A)+"";if(d(K))return j?j.call(K):"";var R=K+"";return R=="0"&&1/K==-1/0?"-0":R}},1717:l=>{l.exports=function(h){return function(a){return h(a)}}},1811:(l,h,a)=>{var u=a(1469),p=a(5403),y=a(5514),d=a(9833);l.exports=function(C,j){return u(C)?C:p(C,j)?[C]:y(d(C))}},4318:(l,h,a)=>{var u=a(1149);l.exports=function(p){var y=new p.constructor(p.byteLength);return new u(y).set(new u(p)),y}},4626:(l,h,a)=>{l=a.nmd(l);var u=a(5639),p=h&&!h.nodeType&&h,y=p&&l&&!l.nodeType&&l,d=y&&y.exports===p?u.Buffer:void 0,C=d?d.allocUnsafe:void 0;l.exports=function(j,A){if(A)return j.slice();var K=j.length,R=C?C(K):new j.constructor(K);return j.copy(R),R}},7133:(l,h,a)=>{var u=a(4318);l.exports=function(p,y){var d=y?u(p.buffer):p.buffer;return new p.constructor(d,p.byteOffset,p.length)}},278:l=>{l.exports=function(h,a){var u=-1,p=h.length;for(a||(a=Array(p));++u<p;)a[u]=h[u];return a}},8363:(l,h,a)=>{var u=a(4865),p=a(9465);l.exports=function(y,d,C,j){var A=!C;C||(C={});for(var K=-1,R=d.length;++K<R;){var E=d[K],I=j?j(C[E],y[E],E,C,y):void 0;I===void 0&&(I=y[E]),A?p(C,E,I):u(C,E,I)}return C}},4429:(l,h,a)=>{var u=a(5639)["__core-js_shared__"];l.exports=u},1463:(l,h,a)=>{var u=a(5976),p=a(6612);l.exports=function(y){return u(function(d,C){var j=-1,A=C.length,K=A>1?C[A-1]:void 0,R=A>2?C[2]:void 0;for(K=y.length>3&&typeof K=="function"?(A--,K):void 0,R&&p(C[0],C[1],R)&&(K=A<3?void 0:K,A=1),d=Object(d);++j<A;){var E=C[j];E&&y(d,E,j,K)}return d})}},5063:l=>{l.exports=function(h){return function(a,u,p){for(var y=-1,d=Object(a),C=p(a),j=C.length;j--;){var A=C[h?j:++y];if(u(d[A],A,d)===!1)break}return a}}},8777:(l,h,a)=>{var u=a(852),p=function(){try{var y=u(Object,"defineProperty");return y({},"",{}),y}catch{}}();l.exports=p},1957:(l,h,a)=>{var u=typeof a.g=="object"&&a.g&&a.g.Object===Object&&a.g;l.exports=u},5050:(l,h,a)=>{var u=a(7019);l.exports=function(p,y){var d=p.__data__;return u(y)?d[typeof y=="string"?"string":"hash"]:d.map}},852:(l,h,a)=>{var u=a(8458),p=a(7801);l.exports=function(y,d){var C=p(y,d);return u(C)?C:void 0}},5924:(l,h,a)=>{var u=a(5569)(Object.getPrototypeOf,Object);l.exports=u},9607:(l,h,a)=>{var u=a(2705),p=Object.prototype,y=p.hasOwnProperty,d=p.toString,C=u?u.toStringTag:void 0;l.exports=function(j){var A=y.call(j,C),K=j[C];try{j[C]=void 0;var R=!0}catch{}var E=d.call(j);return R&&(A?j[C]=K:delete j[C]),E}},7801:l=>{l.exports=function(h,a){return h==null?void 0:h[a]}},222:(l,h,a)=>{var u=a(1811),p=a(5694),y=a(1469),d=a(5776),C=a(1780),j=a(327);l.exports=function(A,K,R){for(var E=-1,I=(K=u(K,A)).length,P=!1;++E<I;){var S=j(K[E]);if(!(P=A!=null&&R(A,S)))break;A=A[S]}return P||++E!=I?P:!!(I=A==null?0:A.length)&&C(I)&&d(S,I)&&(y(A)||p(A))}},1789:(l,h,a)=>{var u=a(4536);l.exports=function(){this.__data__=u?u(null):{},this.size=0}},401:l=>{l.exports=function(h){var a=this.has(h)&&delete this.__data__[h];return this.size-=a?1:0,a}},7667:(l,h,a)=>{var u=a(4536),p=Object.prototype.hasOwnProperty;l.exports=function(y){var d=this.__data__;if(u){var C=d[y];return C==="__lodash_hash_undefined__"?void 0:C}return p.call(d,y)?d[y]:void 0}},1327:(l,h,a)=>{var u=a(4536),p=Object.prototype.hasOwnProperty;l.exports=function(y){var d=this.__data__;return u?d[y]!==void 0:p.call(d,y)}},1866:(l,h,a)=>{var u=a(4536);l.exports=function(p,y){var d=this.__data__;return this.size+=this.has(p)?0:1,d[p]=u&&y===void 0?"__lodash_hash_undefined__":y,this}},8517:(l,h,a)=>{var u=a(3118),p=a(5924),y=a(5726);l.exports=function(d){return typeof d.constructor!="function"||y(d)?{}:u(p(d))}},5776:l=>{var h=/^(?:0|[1-9]\d*)$/;l.exports=function(a,u){var p=typeof a;return!!(u=u??9007199254740991)&&(p=="number"||p!="symbol"&&h.test(a))&&a>-1&&a%1==0&&a<u}},6612:(l,h,a)=>{var u=a(7813),p=a(8612),y=a(5776),d=a(3218);l.exports=function(C,j,A){if(!d(A))return!1;var K=typeof j;return!!(K=="number"?p(A)&&y(j,A.length):K=="string"&&j in A)&&u(A[j],C)}},5403:(l,h,a)=>{var u=a(1469),p=a(3448),y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;l.exports=function(C,j){if(u(C))return!1;var A=typeof C;return!(A!="number"&&A!="symbol"&&A!="boolean"&&C!=null&&!p(C))||d.test(C)||!y.test(C)||j!=null&&C in Object(j)}},7019:l=>{l.exports=function(h){var a=typeof h;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?h!=="__proto__":h===null}},5346:(l,h,a)=>{var u,p=a(4429),y=(u=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"";l.exports=function(d){return!!y&&y in d}},5726:l=>{var h=Object.prototype;l.exports=function(a){var u=a&&a.constructor;return a===(typeof u=="function"&&u.prototype||h)}},7040:l=>{l.exports=function(){this.__data__=[],this.size=0}},4125:(l,h,a)=>{var u=a(8470),p=Array.prototype.splice;l.exports=function(y){var d=this.__data__,C=u(d,y);return!(C<0)&&(C==d.length-1?d.pop():p.call(d,C,1),--this.size,!0)}},2117:(l,h,a)=>{var u=a(8470);l.exports=function(p){var y=this.__data__,d=u(y,p);return d<0?void 0:y[d][1]}},7518:(l,h,a)=>{var u=a(8470);l.exports=function(p){return u(this.__data__,p)>-1}},4705:(l,h,a)=>{var u=a(8470);l.exports=function(p,y){var d=this.__data__,C=u(d,p);return C<0?(++this.size,d.push([p,y])):d[C][1]=y,this}},4785:(l,h,a)=>{var u=a(1989),p=a(8407),y=a(7071);l.exports=function(){this.size=0,this.__data__={hash:new u,map:new(y||p),string:new u}}},1285:(l,h,a)=>{var u=a(5050);l.exports=function(p){var y=u(this,p).delete(p);return this.size-=y?1:0,y}},6e3:(l,h,a)=>{var u=a(5050);l.exports=function(p){return u(this,p).get(p)}},9916:(l,h,a)=>{var u=a(5050);l.exports=function(p){return u(this,p).has(p)}},5265:(l,h,a)=>{var u=a(5050);l.exports=function(p,y){var d=u(this,p),C=d.size;return d.set(p,y),this.size+=d.size==C?0:1,this}},4523:(l,h,a)=>{var u=a(8306);l.exports=function(p){var y=u(p,function(C){return d.size===500&&d.clear(),C}),d=y.cache;return y}},4536:(l,h,a)=>{var u=a(852)(Object,"create");l.exports=u},3498:l=>{l.exports=function(h){var a=[];if(h!=null)for(var u in Object(h))a.push(u);return a}},1167:(l,h,a)=>{l=a.nmd(l);var u=a(1957),p=h&&!h.nodeType&&h,y=p&&l&&!l.nodeType&&l,d=y&&y.exports===p&&u.process,C=function(){try{var j=y&&y.require&&y.require("util").types;return j||d&&d.binding&&d.binding("util")}catch{}}();l.exports=C},2333:l=>{var h=Object.prototype.toString;l.exports=function(a){return h.call(a)}},5569:l=>{l.exports=function(h,a){return function(u){return h(a(u))}}},5357:(l,h,a)=>{var u=a(6874),p=Math.max;l.exports=function(y,d,C){return d=p(d===void 0?y.length-1:d,0),function(){for(var j=arguments,A=-1,K=p(j.length-d,0),R=Array(K);++A<K;)R[A]=j[d+A];A=-1;for(var E=Array(d+1);++A<d;)E[A]=j[A];return E[d]=C(R),u(y,this,E)}}},5639:(l,h,a)=>{var u=a(1957),p=typeof self=="object"&&self&&self.Object===Object&&self,y=u||p||Function("return this")();l.exports=y},6390:l=>{l.exports=function(h,a){if((a!=="constructor"||typeof h[a]!="function")&&a!="__proto__")return h[a]}},61:(l,h,a)=>{var u=a(6560),p=a(1275)(u);l.exports=p},1275:l=>{var h=Date.now;l.exports=function(a){var u=0,p=0;return function(){var y=h(),d=16-(y-p);if(p=y,d>0){if(++u>=800)return arguments[0]}else u=0;return a.apply(void 0,arguments)}}},7465:(l,h,a)=>{var u=a(8407);l.exports=function(){this.__data__=new u,this.size=0}},3779:l=>{l.exports=function(h){var a=this.__data__,u=a.delete(h);return this.size=a.size,u}},7599:l=>{l.exports=function(h){return this.__data__.get(h)}},4758:l=>{l.exports=function(h){return this.__data__.has(h)}},4309:(l,h,a)=>{var u=a(8407),p=a(7071),y=a(3369);l.exports=function(d,C){var j=this.__data__;if(j instanceof u){var A=j.__data__;if(!p||A.length<199)return A.push([d,C]),this.size=++j.size,this;j=this.__data__=new y(A)}return j.set(d,C),this.size=j.size,this}},5514:(l,h,a)=>{var u=a(4523),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/\\(\\)?/g,d=u(function(C){var j=[];return C.charCodeAt(0)===46&&j.push(""),C.replace(p,function(A,K,R,E){j.push(R?E.replace(y,"$1"):K||A)}),j});l.exports=d},327:(l,h,a)=>{var u=a(3448);l.exports=function(p){if(typeof p=="string"||u(p))return p;var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}},346:l=>{var h=Function.prototype.toString;l.exports=function(a){if(a!=null){try{return h.call(a)}catch{}try{return a+""}catch{}}return""}},5703:l=>{l.exports=function(h){return function(){return h}}},7813:l=>{l.exports=function(h,a){return h===a||h!=h&&a!=a}},7361:(l,h,a)=>{var u=a(7786);l.exports=function(p,y,d){var C=p==null?void 0:u(p,y);return C===void 0?d:C}},8721:(l,h,a)=>{var u=a(8565),p=a(222);l.exports=function(y,d){return y!=null&&p(y,d,u)}},6557:l=>{l.exports=function(h){return h}},5694:(l,h,a)=>{var u=a(9454),p=a(7005),y=Object.prototype,d=y.hasOwnProperty,C=y.propertyIsEnumerable,j=u(function(){return arguments}())?u:function(A){return p(A)&&d.call(A,"callee")&&!C.call(A,"callee")};l.exports=j},1469:l=>{var h=Array.isArray;l.exports=h},8612:(l,h,a)=>{var u=a(3560),p=a(1780);l.exports=function(y){return y!=null&&p(y.length)&&!u(y)}},9246:(l,h,a)=>{var u=a(8612),p=a(7005);l.exports=function(y){return p(y)&&u(y)}},4144:(l,h,a)=>{l=a.nmd(l);var u=a(5639),p=a(5062),y=h&&!h.nodeType&&h,d=y&&l&&!l.nodeType&&l,C=d&&d.exports===y?u.Buffer:void 0,j=(C?C.isBuffer:void 0)||p;l.exports=j},3560:(l,h,a)=>{var u=a(4239),p=a(3218);l.exports=function(y){if(!p(y))return!1;var d=u(y);return d=="[object Function]"||d=="[object GeneratorFunction]"||d=="[object AsyncFunction]"||d=="[object Proxy]"}},1780:l=>{l.exports=function(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=9007199254740991}},3218:l=>{l.exports=function(h){var a=typeof h;return h!=null&&(a=="object"||a=="function")}},7005:l=>{l.exports=function(h){return h!=null&&typeof h=="object"}},8630:(l,h,a)=>{var u=a(4239),p=a(5924),y=a(7005),d=Function.prototype,C=Object.prototype,j=d.toString,A=C.hasOwnProperty,K=j.call(Object);l.exports=function(R){if(!y(R)||u(R)!="[object Object]")return!1;var E=p(R);if(E===null)return!0;var I=A.call(E,"constructor")&&E.constructor;return typeof I=="function"&&I instanceof I&&j.call(I)==K}},3448:(l,h,a)=>{var u=a(4239),p=a(7005);l.exports=function(y){return typeof y=="symbol"||p(y)&&u(y)=="[object Symbol]"}},6719:(l,h,a)=>{var u=a(8749),p=a(1717),y=a(1167),d=y&&y.isTypedArray,C=d?p(d):u;l.exports=C},1704:(l,h,a)=>{var u=a(4636),p=a(313),y=a(8612);l.exports=function(d){return y(d)?u(d,!0):p(d)}},8306:(l,h,a)=>{var u=a(3369);function p(y,d){if(typeof y!="function"||d!=null&&typeof d!="function")throw new TypeError("Expected a function");var C=function(){var j=arguments,A=d?d.apply(this,j):j[0],K=C.cache;if(K.has(A))return K.get(A);var R=y.apply(this,j);return C.cache=K.set(A,R)||K,R};return C.cache=new(p.Cache||u),C}p.Cache=u,l.exports=p},2492:(l,h,a)=>{var u=a(2980),p=a(1463)(function(y,d,C){u(y,d,C)});l.exports=p},5062:l=>{l.exports=function(){return!1}},9881:(l,h,a)=>{var u=a(8363),p=a(1704);l.exports=function(y){return u(y,p(y))}},9833:(l,h,a)=>{var u=a(531);l.exports=function(p){return p==null?"":u(p)}},2676:function(l){l.exports=function(){function h(v,o){if(!(v instanceof o))throw new TypeError("Cannot call a class as a function")}function a(v,o){for(var s=0;s<o.length;s++){var g=o[s];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}function u(v,o,s){return o&&a(v.prototype,o),s&&a(v,s),v}var p=function(){function v(o,s){this.next=null,this.key=o,this.data=s,this.left=null,this.right=null}return v}();function y(v,o){return v>o?1:v<o?-1:0}function d(v,o,s){for(var g=new p(null,null),M=g,w=g;;){var G=s(v,o.key);if(G<0){if(o.left===null)break;if(s(v,o.left.key)<0){var N=o.left;if(o.left=N.right,N.right=o,(o=N).left===null)break}w.left=o,w=o,o=o.left}else{if(!(G>0)||o.right===null||s(v,o.right.key)>0&&(N=o.right,o.right=N.left,N.left=o,(o=N).right===null))break;M.right=o,M=o,o=o.right}}return M.right=o.left,w.left=o.right,o.left=g.right,o.right=g.left,o}function C(v,o,s,g){var M=new p(v,o);if(s===null)return M.left=M.right=null,M;var w=g(v,(s=d(v,s,g)).key);return w<0?(M.left=s.left,M.right=s,s.left=null):w>=0&&(M.right=s.right,M.left=s,s.right=null),M}function j(v,o,s){var g=null,M=null;if(o){var w=s((o=d(v,o,s)).key,v);w===0?(g=o.left,M=o.right):w<0?(M=o.right,o.right=null,g=o):(g=o.left,o.left=null,M=o)}return{left:g,right:M}}function A(v,o,s){return o===null?v:(v===null||((o=d(v.key,o,s)).left=v),o)}function K(v,o,s,g,M){if(v){g(o+(s?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+M(v)+`
`);var w=o+(s?"    ":"\u2502   ");v.left&&K(v.left,w,!1,g,M),v.right&&K(v.right,w,!0,g,M)}}var R=function(){function v(o){o===void 0&&(o=y),this._root=null,this._size=0,this._comparator=o}return v.prototype.insert=function(o,s){return this._size++,this._root=C(o,s,this._root,this._comparator)},v.prototype.add=function(o,s){var g=new p(o,s);this._root===null&&(g.left=g.right=null,this._size++,this._root=g);var M=this._comparator,w=d(o,this._root,M),G=M(o,w.key);return G===0?this._root=w:(G<0?(g.left=w.left,g.right=w,w.left=null):G>0&&(g.right=w.right,g.left=w,w.right=null),this._size++,this._root=g),this._root},v.prototype.remove=function(o){this._root=this._remove(o,this._root,this._comparator)},v.prototype._remove=function(o,s,g){var M;return s===null?null:g(o,(s=d(o,s,g)).key)===0?(s.left===null?M=s.right:(M=d(o,s.left,g)).right=s.right,this._size--,M):s},v.prototype.pop=function(){var o=this._root;if(o){for(;o.left;)o=o.left;return this._root=d(o.key,this._root,this._comparator),this._root=this._remove(o.key,this._root,this._comparator),{key:o.key,data:o.data}}return null},v.prototype.findStatic=function(o){for(var s=this._root,g=this._comparator;s;){var M=g(o,s.key);if(M===0)return s;s=M<0?s.left:s.right}return null},v.prototype.find=function(o){return this._root&&(this._root=d(o,this._root,this._comparator),this._comparator(o,this._root.key)!==0)?null:this._root},v.prototype.contains=function(o){for(var s=this._root,g=this._comparator;s;){var M=g(o,s.key);if(M===0)return!0;s=M<0?s.left:s.right}return!1},v.prototype.forEach=function(o,s){for(var g=this._root,M=[],w=!1;!w;)g!==null?(M.push(g),g=g.left):M.length!==0?(g=M.pop(),o.call(s,g),g=g.right):w=!0;return this},v.prototype.range=function(o,s,g,M){for(var w=[],G=this._comparator,N=this._root;w.length!==0||N;)if(N)w.push(N),N=N.left;else{if(G((N=w.pop()).key,s)>0)break;if(G(N.key,o)>=0&&g.call(M,N))return this;N=N.right}return this},v.prototype.keys=function(){var o=[];return this.forEach(function(s){var g=s.key;return o.push(g)}),o},v.prototype.values=function(){var o=[];return this.forEach(function(s){var g=s.data;return o.push(g)}),o},v.prototype.min=function(){return this._root?this.minNode(this._root).key:null},v.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},v.prototype.minNode=function(o){if(o===void 0&&(o=this._root),o)for(;o.left;)o=o.left;return o},v.prototype.maxNode=function(o){if(o===void 0&&(o=this._root),o)for(;o.right;)o=o.right;return o},v.prototype.at=function(o){for(var s=this._root,g=!1,M=0,w=[];!g;)if(s)w.push(s),s=s.left;else if(w.length>0){if(s=w.pop(),M===o)return s;M++,s=s.right}else g=!0;return null},v.prototype.next=function(o){var s=this._root,g=null;if(o.right){for(g=o.right;g.left;)g=g.left;return g}for(var M=this._comparator;s;){var w=M(o.key,s.key);if(w===0)break;w<0?(g=s,s=s.left):s=s.right}return g},v.prototype.prev=function(o){var s=this._root,g=null;if(o.left!==null){for(g=o.left;g.right;)g=g.right;return g}for(var M=this._comparator;s;){var w=M(o.key,s.key);if(w===0)break;w<0?s=s.left:(g=s,s=s.right)}return g},v.prototype.clear=function(){return this._root=null,this._size=0,this},v.prototype.toList=function(){return P(this._root)},v.prototype.load=function(o,s,g){s===void 0&&(s=[]),g===void 0&&(g=!1);var M=o.length,w=this._comparator;if(g&&f(o,s,0,M-1,w),this._root===null)this._root=E(o,s,0,M),this._size=M;else{var G=D(this.toList(),I(o,s),w);M=this._size+M,this._root=S({head:G},0,M)}return this},v.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(v.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),v.prototype.toString=function(o){o===void 0&&(o=function(g){return String(g.key)});var s=[];return K(this._root,"",!0,function(g){return s.push(g)},o),s.join("")},v.prototype.update=function(o,s,g){var M=this._comparator,w=j(o,this._root,M),G=w.left,N=w.right;M(o,s)<0?N=C(s,g,N,M):G=C(s,g,G,M),this._root=A(G,N,M)},v.prototype.split=function(o){return j(o,this._root,this._comparator)},v}();function E(v,o,s,g){var M=g-s;if(M>0){var w=s+Math.floor(M/2),G=v[w],N=o[w],q=new p(G,N);return q.left=E(v,o,s,w),q.right=E(v,o,w+1,g),q}return null}function I(v,o){for(var s=new p(null,null),g=s,M=0;M<v.length;M++)g=g.next=new p(v[M],o[M]);return g.next=null,s.next}function P(v){for(var o=v,s=[],g=!1,M=new p(null,null),w=M;!g;)o?(s.push(o),o=o.left):s.length>0?o=(o=w=w.next=s.pop()).right:g=!0;return w.next=null,M.next}function S(v,o,s){var g=s-o;if(g>0){var M=o+Math.floor(g/2),w=S(v,o,M),G=v.head;return G.left=w,v.head=v.head.next,G.right=S(v,M+1,s),G}return null}function D(v,o,s){for(var g=new p(null,null),M=g,w=v,G=o;w!==null&&G!==null;)s(w.key,G.key)<0?(M.next=w,w=w.next):(M.next=G,G=G.next),M=M.next;return w!==null?M.next=w:G!==null&&(M.next=G),g.next}function f(v,o,s,g,M){if(!(s>=g)){for(var w=v[s+g>>1],G=s-1,N=g+1;;){do G++;while(M(v[G],w)<0);do N--;while(M(v[N],w)>0);if(G>=N)break;var q=v[G];v[G]=v[N],v[N]=q,q=o[G],o[G]=o[N],o[N]=q}f(v,o,s,N,M),f(v,o,N+1,g,M)}}var x=function(v,o){return v.ll.x<=o.x&&o.x<=v.ur.x&&v.ll.y<=o.y&&o.y<=v.ur.y},O=function(v,o){if(o.ur.x<v.ll.x||v.ur.x<o.ll.x||o.ur.y<v.ll.y||v.ur.y<o.ll.y)return null;var s=v.ll.x<o.ll.x?o.ll.x:v.ll.x,g=v.ur.x<o.ur.x?v.ur.x:o.ur.x;return{ll:{x:s,y:v.ll.y<o.ll.y?o.ll.y:v.ll.y},ur:{x:g,y:v.ur.y<o.ur.y?v.ur.y:o.ur.y}}},V=Number.EPSILON;V===void 0&&(V=Math.pow(2,-52));var Y=V*V,X=function(v,o){if(-V<v&&v<V&&-V<o&&o<V)return 0;var s=v-o;return s*s<Y*v*o?0:v<o?-1:1},$=function(){function v(){h(this,v),this.reset()}return u(v,[{key:"reset",value:function(){this.xRounder=new Q,this.yRounder=new Q}},{key:"round",value:function(o,s){return{x:this.xRounder.round(o),y:this.yRounder.round(s)}}}]),v}(),Q=function(){function v(){h(this,v),this.tree=new R,this.round(0)}return u(v,[{key:"round",value:function(o){var s=this.tree.add(o),g=this.tree.prev(s);if(g!==null&&X(s.key,g.key)===0)return this.tree.remove(o),g.key;var M=this.tree.next(s);return M!==null&&X(s.key,M.key)===0?(this.tree.remove(o),M.key):o}}]),v}(),Z=new $,W=function(v,o){return v.x*o.y-v.y*o.x},ut=function(v,o){return v.x*o.x+v.y*o.y},tt=function(v,o,s){var g={x:o.x-v.x,y:o.y-v.y},M={x:s.x-v.x,y:s.y-v.y},w=W(g,M);return X(w,0)},ht=function(v){return Math.sqrt(ut(v,v))},vt=function(v,o,s){var g={x:o.x-v.x,y:o.y-v.y},M={x:s.x-v.x,y:s.y-v.y};return W(M,g)/ht(M)/ht(g)},ct=function(v,o,s){var g={x:o.x-v.x,y:o.y-v.y},M={x:s.x-v.x,y:s.y-v.y};return ut(M,g)/ht(M)/ht(g)},Lt=function(v,o,s){return o.y===0?null:{x:v.x+o.x/o.y*(s-v.y),y:s}},St=function(v,o,s){return o.x===0?null:{x:s,y:v.y+o.y/o.x*(s-v.x)}},lt=function(v,o,s,g){if(o.x===0)return St(s,g,v.x);if(g.x===0)return St(v,o,s.x);if(o.y===0)return Lt(s,g,v.y);if(g.y===0)return Lt(v,o,s.y);var M=W(o,g);if(M==0)return null;var w={x:s.x-v.x,y:s.y-v.y},G=W(w,o)/M,N=W(w,g)/M;return{x:(v.x+N*o.x+(s.x+G*g.x))/2,y:(v.y+N*o.y+(s.y+G*g.y))/2}},mt=function(){function v(o,s){h(this,v),o.events===void 0?o.events=[this]:o.events.push(this),this.point=o,this.isLeft=s}return u(v,null,[{key:"compare",value:function(o,s){var g=v.comparePoints(o.point,s.point);return g!==0?g:(o.point!==s.point&&o.link(s),o.isLeft!==s.isLeft?o.isLeft?1:-1:$t.compare(o.segment,s.segment))}},{key:"comparePoints",value:function(o,s){return o.x<s.x?-1:o.x>s.x?1:o.y<s.y?-1:o.y>s.y?1:0}}]),u(v,[{key:"link",value:function(o){if(o.point===this.point)throw new Error("Tried to link already linked events");for(var s=o.point.events,g=0,M=s.length;g<M;g++){var w=s[g];this.point.events.push(w),w.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var o=this.point.events.length,s=0;s<o;s++){var g=this.point.events[s];if(g.segment.consumedBy===void 0)for(var M=s+1;M<o;M++){var w=this.point.events[M];w.consumedBy===void 0&&g.otherSE.point.events===w.otherSE.point.events&&g.segment.consume(w.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var o=[],s=0,g=this.point.events.length;s<g;s++){var M=this.point.events[s];M!==this&&!M.segment.ringOut&&M.segment.isInResult()&&o.push(M)}return o}},{key:"getLeftmostComparator",value:function(o){var s=this,g=new Map,M=function(w){var G=w.otherSE;g.set(w,{sine:vt(s.point,o.point,G.point),cosine:ct(s.point,o.point,G.point)})};return function(w,G){g.has(w)||M(w),g.has(G)||M(G);var N=g.get(w),q=N.sine,rt=N.cosine,ot=g.get(G),st=ot.sine,it=ot.cosine;return q>=0&&st>=0?rt<it?1:rt>it?-1:0:q<0&&st<0?rt<it?-1:rt>it?1:0:st<q?-1:st>q?1:0}}}]),v}(),Yt=0,$t=function(){function v(o,s,g,M){h(this,v),this.id=++Yt,this.leftSE=o,o.segment=this,o.otherSE=s,this.rightSE=s,s.segment=this,s.otherSE=o,this.rings=g,this.windings=M}return u(v,null,[{key:"compare",value:function(o,s){var g=o.leftSE.point.x,M=s.leftSE.point.x,w=o.rightSE.point.x,G=s.rightSE.point.x;if(G<g)return 1;if(w<M)return-1;var N=o.leftSE.point.y,q=s.leftSE.point.y,rt=o.rightSE.point.y,ot=s.rightSE.point.y;if(g<M){if(q<N&&q<rt)return 1;if(q>N&&q>rt)return-1;var st=o.comparePoint(s.leftSE.point);if(st<0)return 1;if(st>0)return-1;var it=s.comparePoint(o.rightSE.point);return it!==0?it:-1}if(g>M){if(N<q&&N<ot)return-1;if(N>q&&N>ot)return 1;var bt=s.comparePoint(o.leftSE.point);if(bt!==0)return bt;var dt=o.comparePoint(s.rightSE.point);return dt<0?1:dt>0?-1:1}if(N<q)return-1;if(N>q)return 1;if(w<G){var yt=s.comparePoint(o.rightSE.point);if(yt!==0)return yt}if(w>G){var ft=o.comparePoint(s.rightSE.point);if(ft<0)return 1;if(ft>0)return-1}if(w!==G){var kt=rt-N,xt=w-g,Ot=ot-q,wt=G-M;if(kt>xt&&Ot<wt)return 1;if(kt<xt&&Ot>wt)return-1}return w>G?1:w<G||rt<ot?-1:rt>ot?1:o.id<s.id?-1:o.id>s.id?1:0}}]),u(v,[{key:"replaceRightSE",value:function(o){this.rightSE=o,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var o=this.leftSE.point.y,s=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:o<s?o:s},ur:{x:this.rightSE.point.x,y:o>s?o:s}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(o){return o.x===this.leftSE.point.x&&o.y===this.leftSE.point.y||o.x===this.rightSE.point.x&&o.y===this.rightSE.point.y}},{key:"comparePoint",value:function(o){if(this.isAnEndpoint(o))return 0;var s=this.leftSE.point,g=this.rightSE.point,M=this.vector();if(s.x===g.x)return o.x===s.x?0:o.x<s.x?1:-1;var w=(o.y-s.y)/M.y,G=s.x+w*M.x;if(o.x===G)return 0;var N=(o.x-s.x)/M.x,q=s.y+N*M.y;return o.y===q?0:o.y<q?-1:1}},{key:"getIntersection",value:function(o){var s=this.bbox(),g=o.bbox(),M=O(s,g);if(M===null)return null;var w=this.leftSE.point,G=this.rightSE.point,N=o.leftSE.point,q=o.rightSE.point,rt=x(s,N)&&this.comparePoint(N)===0,ot=x(g,w)&&o.comparePoint(w)===0,st=x(s,q)&&this.comparePoint(q)===0,it=x(g,G)&&o.comparePoint(G)===0;if(ot&&rt)return it&&!st?G:!it&&st?q:null;if(ot)return st&&w.x===q.x&&w.y===q.y?null:w;if(rt)return it&&G.x===N.x&&G.y===N.y?null:N;if(it&&st)return null;if(it)return G;if(st)return q;var bt=lt(w,this.vector(),N,o.vector());return bt===null?null:x(M,bt)?Z.round(bt.x,bt.y):null}},{key:"split",value:function(o){var s=[],g=o.events!==void 0,M=new mt(o,!0),w=new mt(o,!1),G=this.rightSE;this.replaceRightSE(w),s.push(w),s.push(M);var N=new v(M,G,this.rings.slice(),this.windings.slice());return mt.comparePoints(N.leftSE.point,N.rightSE.point)>0&&N.swapEvents(),mt.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),g&&(M.checkForConsuming(),w.checkForConsuming()),s}},{key:"swapEvents",value:function(){var o=this.rightSE;this.rightSE=this.leftSE,this.leftSE=o,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var s=0,g=this.windings.length;s<g;s++)this.windings[s]*=-1}},{key:"consume",value:function(o){for(var s=this,g=o;s.consumedBy;)s=s.consumedBy;for(;g.consumedBy;)g=g.consumedBy;var M=v.compare(s,g);if(M!==0){if(M>0){var w=s;s=g,g=w}if(s.prev===g){var G=s;s=g,g=G}for(var N=0,q=g.rings.length;N<q;N++){var rt=g.rings[N],ot=g.windings[N],st=s.rings.indexOf(rt);st===-1?(s.rings.push(rt),s.windings.push(ot)):s.windings[st]+=ot}g.rings=null,g.windings=null,g.consumedBy=s,g.leftSE.consumedBy=s.leftSE,g.rightSE.consumedBy=s.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var o=this.prev.consumedBy||this.prev;this._beforeState=o.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var o=this.beforeState();this._afterState={rings:o.rings.slice(0),windings:o.windings.slice(0),multiPolys:[]};for(var s=this._afterState.rings,g=this._afterState.windings,M=this._afterState.multiPolys,w=0,G=this.rings.length;w<G;w++){var N=this.rings[w],q=this.windings[w],rt=s.indexOf(N);rt===-1?(s.push(N),g.push(q)):g[rt]+=q}for(var ot=[],st=[],it=0,bt=s.length;it<bt;it++)if(g[it]!==0){var dt=s[it],yt=dt.poly;if(st.indexOf(yt)===-1)if(dt.isExterior)ot.push(yt);else{st.indexOf(yt)===-1&&st.push(yt);var ft=ot.indexOf(dt.poly);ft!==-1&&ot.splice(ft,1)}}for(var kt=0,xt=ot.length;kt<xt;kt++){var Ot=ot[kt].multiPoly;M.indexOf(Ot)===-1&&M.push(Ot)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var o=this.beforeState().multiPolys,s=this.afterState().multiPolys;switch(Bt.type){case"union":var g=o.length===0,M=s.length===0;this._isInResult=g!==M;break;case"intersection":var w,G;o.length<s.length?(w=o.length,G=s.length):(w=s.length,G=o.length),this._isInResult=G===Bt.numMultiPolys&&w<G;break;case"xor":var N=Math.abs(o.length-s.length);this._isInResult=N%2==1;break;case"difference":var q=function(rt){return rt.length===1&&rt[0].isSubject};this._isInResult=q(o)!==q(s);break;default:throw new Error("Unrecognized operation type found ".concat(Bt.type))}return this._isInResult}}],[{key:"fromRing",value:function(o,s,g){var M,w,G,N=mt.comparePoints(o,s);if(N<0)M=o,w=s,G=1;else{if(!(N>0))throw new Error("Tried to create degenerate segment at [".concat(o.x,", ").concat(o.y,"]"));M=s,w=o,G=-1}return new v(new mt(M,!0),new mt(w,!1),[g],[G])}}]),v}(),te=function(){function v(o,s,g){if(h(this,v),!Array.isArray(o)||o.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=s,this.isExterior=g,this.segments=[],typeof o[0][0]!="number"||typeof o[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var M=Z.round(o[0][0],o[0][1]);this.bbox={ll:{x:M.x,y:M.y},ur:{x:M.x,y:M.y}};for(var w=M,G=1,N=o.length;G<N;G++){if(typeof o[G][0]!="number"||typeof o[G][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var q=Z.round(o[G][0],o[G][1]);q.x===w.x&&q.y===w.y||(this.segments.push($t.fromRing(w,q,this)),q.x<this.bbox.ll.x&&(this.bbox.ll.x=q.x),q.y<this.bbox.ll.y&&(this.bbox.ll.y=q.y),q.x>this.bbox.ur.x&&(this.bbox.ur.x=q.x),q.y>this.bbox.ur.y&&(this.bbox.ur.y=q.y),w=q)}M.x===w.x&&M.y===w.y||this.segments.push($t.fromRing(w,M,this))}return u(v,[{key:"getSweepEvents",value:function(){for(var o=[],s=0,g=this.segments.length;s<g;s++){var M=this.segments[s];o.push(M.leftSE),o.push(M.rightSE)}return o}}]),v}(),At=function(){function v(o,s){if(h(this,v),!Array.isArray(o))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new te(o[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var g=1,M=o.length;g<M;g++){var w=new te(o[g],this,!1);w.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=w.bbox.ll.x),w.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=w.bbox.ll.y),w.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=w.bbox.ur.x),w.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=w.bbox.ur.y),this.interiorRings.push(w)}this.multiPoly=s}return u(v,[{key:"getSweepEvents",value:function(){for(var o=this.exteriorRing.getSweepEvents(),s=0,g=this.interiorRings.length;s<g;s++)for(var M=this.interiorRings[s].getSweepEvents(),w=0,G=M.length;w<G;w++)o.push(M[w]);return o}}]),v}(),Nt=function(){function v(o,s){if(h(this,v),!Array.isArray(o))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof o[0][0][0]=="number"&&(o=[o])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var g=0,M=o.length;g<M;g++){var w=new At(o[g],this);w.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=w.bbox.ll.x),w.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=w.bbox.ll.y),w.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=w.bbox.ur.x),w.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=w.bbox.ur.y),this.polys.push(w)}this.isSubject=s}return u(v,[{key:"getSweepEvents",value:function(){for(var o=[],s=0,g=this.polys.length;s<g;s++)for(var M=this.polys[s].getSweepEvents(),w=0,G=M.length;w<G;w++)o.push(M[w]);return o}}]),v}(),oe=function(){function v(o){h(this,v),this.events=o;for(var s=0,g=o.length;s<g;s++)o[s].segment.ringOut=this;this.poly=null}return u(v,null,[{key:"factory",value:function(o){for(var s=[],g=0,M=o.length;g<M;g++){var w=o[g];if(w.isInResult()&&!w.ringOut){for(var G=null,N=w.leftSE,q=w.rightSE,rt=[N],ot=N.point,st=[];G=N,N=q,rt.push(N),N.point!==ot;)for(;;){var it=N.getAvailableLinkedEvents();if(it.length===0){var bt=rt[0].point,dt=rt[rt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(bt.x,",")+" ".concat(bt.y,"]. Last matching segment found ends at")+" [".concat(dt.x,", ").concat(dt.y,"]."))}if(it.length===1){q=it[0].otherSE;break}for(var yt=null,ft=0,kt=st.length;ft<kt;ft++)if(st[ft].point===N.point){yt=ft;break}if(yt===null){st.push({index:rt.length,point:N.point});var xt=N.getLeftmostComparator(G);q=it.sort(xt)[0].otherSE;break}var Ot=st.splice(yt)[0],wt=rt.splice(Ot.index);wt.unshift(wt[0].otherSE),s.push(new v(wt.reverse()))}s.push(new v(rt))}}return s}}]),u(v,[{key:"getGeom",value:function(){for(var o=this.events[0].point,s=[o],g=1,M=this.events.length-1;g<M;g++){var w=this.events[g].point,G=this.events[g+1].point;tt(w,o,G)!==0&&(s.push(w),o=w)}if(s.length===1)return null;var N=s[0],q=s[1];tt(N,o,q)===0&&s.shift(),s.push(s[0]);for(var rt=this.isExteriorRing()?1:-1,ot=this.isExteriorRing()?0:s.length-1,st=this.isExteriorRing()?s.length:-1,it=[],bt=ot;bt!=st;bt+=rt)it.push([s[bt].x,s[bt].y]);return it}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var o=this.enclosingRing();this._isExteriorRing=!o||!o.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var o=this.events[0],s=1,g=this.events.length;s<g;s++){var M=this.events[s];mt.compare(o,M)>0&&(o=M)}for(var w=o.segment.prevInResult(),G=w?w.prevInResult():null;;){if(!w)return null;if(!G)return w.ringOut;if(G.ringOut!==w.ringOut)return G.ringOut.enclosingRing()!==w.ringOut?w.ringOut:w.ringOut.enclosingRing();w=G.prevInResult(),G=w?w.prevInResult():null}}}]),v}(),zt=function(){function v(o){h(this,v),this.exteriorRing=o,o.poly=this,this.interiorRings=[]}return u(v,[{key:"addInterior",value:function(o){this.interiorRings.push(o),o.poly=this}},{key:"getGeom",value:function(){var o=[this.exteriorRing.getGeom()];if(o[0]===null)return null;for(var s=0,g=this.interiorRings.length;s<g;s++){var M=this.interiorRings[s].getGeom();M!==null&&o.push(M)}return o}}]),v}(),ye=function(){function v(o){h(this,v),this.rings=o,this.polys=this._composePolys(o)}return u(v,[{key:"getGeom",value:function(){for(var o=[],s=0,g=this.polys.length;s<g;s++){var M=this.polys[s].getGeom();M!==null&&o.push(M)}return o}},{key:"_composePolys",value:function(o){for(var s=[],g=0,M=o.length;g<M;g++){var w=o[g];if(!w.poly)if(w.isExteriorRing())s.push(new zt(w));else{var G=w.enclosingRing();G.poly||s.push(new zt(G)),G.poly.addInterior(w)}}return s}}]),v}(),se=function(){function v(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$t.compare;h(this,v),this.queue=o,this.tree=new R(s),this.segments=[]}return u(v,[{key:"process",value:function(o){var s=o.segment,g=[];if(o.consumedBy)return o.isLeft?this.queue.remove(o.otherSE):this.tree.remove(s),g;var M=o.isLeft?this.tree.insert(s):this.tree.find(s);if(!M)throw new Error("Unable to find segment #".concat(s.id," ")+"[".concat(s.leftSE.point.x,", ").concat(s.leftSE.point.y,"] -> ")+"[".concat(s.rightSE.point.x,", ").concat(s.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var w=M,G=M,N=void 0,q=void 0;N===void 0;)(w=this.tree.prev(w))===null?N=null:w.key.consumedBy===void 0&&(N=w.key);for(;q===void 0;)(G=this.tree.next(G))===null?q=null:G.key.consumedBy===void 0&&(q=G.key);if(o.isLeft){var rt=null;if(N){var ot=N.getIntersection(s);if(ot!==null&&(s.isAnEndpoint(ot)||(rt=ot),!N.isAnEndpoint(ot)))for(var st=this._splitSafely(N,ot),it=0,bt=st.length;it<bt;it++)g.push(st[it])}var dt=null;if(q){var yt=q.getIntersection(s);if(yt!==null&&(s.isAnEndpoint(yt)||(dt=yt),!q.isAnEndpoint(yt)))for(var ft=this._splitSafely(q,yt),kt=0,xt=ft.length;kt<xt;kt++)g.push(ft[kt])}if(rt!==null||dt!==null){var Ot=null;Ot=rt===null?dt:dt===null||mt.comparePoints(rt,dt)<=0?rt:dt,this.queue.remove(s.rightSE),g.push(s.rightSE);for(var wt=s.split(Ot),It=0,Kt=wt.length;It<Kt;It++)g.push(wt[It])}g.length>0?(this.tree.remove(s),g.push(o)):(this.segments.push(s),s.prev=N)}else{if(N&&q){var Dt=N.getIntersection(q);if(Dt!==null){if(!N.isAnEndpoint(Dt))for(var jt=this._splitSafely(N,Dt),Ut=0,Ct=jt.length;Ut<Ct;Ut++)g.push(jt[Ut]);if(!q.isAnEndpoint(Dt))for(var Et=this._splitSafely(q,Dt),Gt=0,Zt=Et.length;Gt<Zt;Gt++)g.push(Et[Gt])}}this.tree.remove(s)}return g}},{key:"_splitSafely",value:function(o,s){this.tree.remove(o);var g=o.rightSE;this.queue.remove(g);var M=o.split(s);return M.push(g),o.consumedBy===void 0&&this.tree.insert(o),M}}]),v}(),ee=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,ve=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Bt=new(function(){function v(){h(this,v)}return u(v,[{key:"run",value:function(o,s,g){Bt.type=o,Z.reset();for(var M=[new Nt(s,!0)],w=0,G=g.length;w<G;w++)M.push(new Nt(g[w],!1));if(Bt.numMultiPolys=M.length,Bt.type==="difference")for(var N=M[0],q=1;q<M.length;)O(M[q].bbox,N.bbox)!==null?q++:M.splice(q,1);if(Bt.type==="intersection"){for(var rt=0,ot=M.length;rt<ot;rt++)for(var st=M[rt],it=rt+1,bt=M.length;it<bt;it++)if(O(st.bbox,M[it].bbox)===null)return[]}for(var dt=new R(mt.compare),yt=0,ft=M.length;yt<ft;yt++)for(var kt=M[yt].getSweepEvents(),xt=0,Ot=kt.length;xt<Ot;xt++)if(dt.insert(kt[xt]),dt.size>ee)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var wt=new se(dt),It=dt.size,Kt=dt.pop();Kt;){var Dt=Kt.key;if(dt.size===It){var jt=Dt.segment;throw new Error("Unable to pop() ".concat(Dt.isLeft?"left":"right"," SweepEvent ")+"[".concat(Dt.point.x,", ").concat(Dt.point.y,"] from segment #").concat(jt.id," ")+"[".concat(jt.leftSE.point.x,", ").concat(jt.leftSE.point.y,"] -> ")+"[".concat(jt.rightSE.point.x,", ").concat(jt.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(dt.size>ee)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(wt.segments.length>ve)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Ut=wt.process(Dt),Ct=0,Et=Ut.length;Ct<Et;Ct++){var Gt=Ut[Ct];Gt.consumedBy===void 0&&dt.insert(Gt)}It=dt.size,Kt=dt.pop()}Z.reset();var Zt=oe.factory(wt.segments);return new ye(Zt).getGeom()}}]),v}()),le=function(v){for(var o=arguments.length,s=new Array(o>1?o-1:0),g=1;g<o;g++)s[g-1]=arguments[g];return Bt.run("union",v,s)},he=function(v){for(var o=arguments.length,s=new Array(o>1?o-1:0),g=1;g<o;g++)s[g-1]=arguments[g];return Bt.run("intersection",v,s)},Le=function(v){for(var o=arguments.length,s=new Array(o>1?o-1:0),g=1;g<o;g++)s[g-1]=arguments[g];return Bt.run("xor",v,s)},re=function(v){for(var o=arguments.length,s=new Array(o>1?o-1:0),g=1;g<o;g++)s[g-1]=arguments[g];return Bt.run("difference",v,s)};return{union:le,intersection:he,xor:Le,difference:re}}()},2582:function(l){l.exports=function(){function h(f,x,O,V,Y){(function X($,Q,Z,W,ut){for(;W>Z;){if(W-Z>600){var tt=W-Z+1,ht=Q-Z+1,vt=Math.log(tt),ct=.5*Math.exp(2*vt/3),Lt=.5*Math.sqrt(vt*ct*(tt-ct)/tt)*(ht-tt/2<0?-1:1);X($,Q,Math.max(Z,Math.floor(Q-ht*ct/tt+Lt)),Math.min(W,Math.floor(Q+(tt-ht)*ct/tt+Lt)),ut)}var St=$[Q],lt=Z,mt=W;for(a($,Z,Q),ut($[W],St)>0&&a($,Z,W);lt<mt;){for(a($,lt,mt),lt++,mt--;ut($[lt],St)<0;)lt++;for(;ut($[mt],St)>0;)mt--}ut($[Z],St)===0?a($,Z,mt):a($,++mt,W),mt<=Q&&(Z=mt+1),Q<=mt&&(W=mt-1)}})(f,x,O||0,V||f.length-1,Y||u)}function a(f,x,O){var V=f[x];f[x]=f[O],f[O]=V}function u(f,x){return f<x?-1:f>x?1:0}var p=function(f){f===void 0&&(f=9),this._maxEntries=Math.max(4,f),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function y(f,x,O){if(!O)return x.indexOf(f);for(var V=0;V<x.length;V++)if(O(f,x[V]))return V;return-1}function d(f,x){C(f,0,f.children.length,x,f)}function C(f,x,O,V,Y){Y||(Y=S(null)),Y.minX=1/0,Y.minY=1/0,Y.maxX=-1/0,Y.maxY=-1/0;for(var X=x;X<O;X++){var $=f.children[X];j(Y,f.leaf?V($):$)}return Y}function j(f,x){return f.minX=Math.min(f.minX,x.minX),f.minY=Math.min(f.minY,x.minY),f.maxX=Math.max(f.maxX,x.maxX),f.maxY=Math.max(f.maxY,x.maxY),f}function A(f,x){return f.minX-x.minX}function K(f,x){return f.minY-x.minY}function R(f){return(f.maxX-f.minX)*(f.maxY-f.minY)}function E(f){return f.maxX-f.minX+(f.maxY-f.minY)}function I(f,x){return f.minX<=x.minX&&f.minY<=x.minY&&x.maxX<=f.maxX&&x.maxY<=f.maxY}function P(f,x){return x.minX<=f.maxX&&x.minY<=f.maxY&&x.maxX>=f.minX&&x.maxY>=f.minY}function S(f){return{children:f,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D(f,x,O,V,Y){for(var X=[x,O];X.length;)if(!((O=X.pop())-(x=X.pop())<=V)){var $=x+Math.ceil((O-x)/V/2)*V;h(f,$,x,O,Y),X.push(x,$,$,O)}}return p.prototype.all=function(){return this._all(this.data,[])},p.prototype.search=function(f){var x=this.data,O=[];if(!P(f,x))return O;for(var V=this.toBBox,Y=[];x;){for(var X=0;X<x.children.length;X++){var $=x.children[X],Q=x.leaf?V($):$;P(f,Q)&&(x.leaf?O.push($):I(f,Q)?this._all($,O):Y.push($))}x=Y.pop()}return O},p.prototype.collides=function(f){var x=this.data;if(!P(f,x))return!1;for(var O=[];x;){for(var V=0;V<x.children.length;V++){var Y=x.children[V],X=x.leaf?this.toBBox(Y):Y;if(P(f,X)){if(x.leaf||I(f,X))return!0;O.push(Y)}}x=O.pop()}return!1},p.prototype.load=function(f){if(!f||!f.length)return this;if(f.length<this._minEntries){for(var x=0;x<f.length;x++)this.insert(f[x]);return this}var O=this._build(f.slice(),0,f.length-1,0);if(this.data.children.length)if(this.data.height===O.height)this._splitRoot(this.data,O);else{if(this.data.height<O.height){var V=this.data;this.data=O,O=V}this._insert(O,this.data.height-O.height-1,!0)}else this.data=O;return this},p.prototype.insert=function(f){return f&&this._insert(f,this.data.height-1),this},p.prototype.clear=function(){return this.data=S([]),this},p.prototype.remove=function(f,x){if(!f)return this;for(var O,V,Y,X=this.data,$=this.toBBox(f),Q=[],Z=[];X||Q.length;){if(X||(X=Q.pop(),V=Q[Q.length-1],O=Z.pop(),Y=!0),X.leaf){var W=y(f,X.children,x);if(W!==-1)return X.children.splice(W,1),Q.push(X),this._condense(Q),this}Y||X.leaf||!I(X,$)?V?(O++,X=V.children[O],Y=!1):X=null:(Q.push(X),Z.push(O),O=0,V=X,X=X.children[0])}return this},p.prototype.toBBox=function(f){return f},p.prototype.compareMinX=function(f,x){return f.minX-x.minX},p.prototype.compareMinY=function(f,x){return f.minY-x.minY},p.prototype.toJSON=function(){return this.data},p.prototype.fromJSON=function(f){return this.data=f,this},p.prototype._all=function(f,x){for(var O=[];f;)f.leaf?x.push.apply(x,f.children):O.push.apply(O,f.children),f=O.pop();return x},p.prototype._build=function(f,x,O,V){var Y,X=O-x+1,$=this._maxEntries;if(X<=$)return d(Y=S(f.slice(x,O+1)),this.toBBox),Y;V||(V=Math.ceil(Math.log(X)/Math.log($)),$=Math.ceil(X/Math.pow($,V-1))),(Y=S([])).leaf=!1,Y.height=V;var Q=Math.ceil(X/$),Z=Q*Math.ceil(Math.sqrt($));D(f,x,O,Z,this.compareMinX);for(var W=x;W<=O;W+=Z){var ut=Math.min(W+Z-1,O);D(f,W,ut,Q,this.compareMinY);for(var tt=W;tt<=ut;tt+=Q){var ht=Math.min(tt+Q-1,ut);Y.children.push(this._build(f,tt,ht,V-1))}}return d(Y,this.toBBox),Y},p.prototype._chooseSubtree=function(f,x,O,V){for(;V.push(x),!x.leaf&&V.length-1!==O;){for(var Y=1/0,X=1/0,$=void 0,Q=0;Q<x.children.length;Q++){var Z=x.children[Q],W=R(Z),ut=(tt=f,ht=Z,(Math.max(ht.maxX,tt.maxX)-Math.min(ht.minX,tt.minX))*(Math.max(ht.maxY,tt.maxY)-Math.min(ht.minY,tt.minY))-W);ut<X?(X=ut,Y=W<Y?W:Y,$=Z):ut===X&&W<Y&&(Y=W,$=Z)}x=$||x.children[0]}var tt,ht;return x},p.prototype._insert=function(f,x,O){var V=O?f:this.toBBox(f),Y=[],X=this._chooseSubtree(V,this.data,x,Y);for(X.children.push(f),j(X,V);x>=0&&Y[x].children.length>this._maxEntries;)this._split(Y,x),x--;this._adjustParentBBoxes(V,Y,x)},p.prototype._split=function(f,x){var O=f[x],V=O.children.length,Y=this._minEntries;this._chooseSplitAxis(O,Y,V);var X=this._chooseSplitIndex(O,Y,V),$=S(O.children.splice(X,O.children.length-X));$.height=O.height,$.leaf=O.leaf,d(O,this.toBBox),d($,this.toBBox),x?f[x-1].children.push($):this._splitRoot(O,$)},p.prototype._splitRoot=function(f,x){this.data=S([f,x]),this.data.height=f.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},p.prototype._chooseSplitIndex=function(f,x,O){for(var V,Y,X,$,Q,Z,W,ut=1/0,tt=1/0,ht=x;ht<=O-x;ht++){var vt=C(f,0,ht,this.toBBox),ct=C(f,ht,O,this.toBBox),Lt=(Y=vt,X=ct,$=void 0,Q=void 0,Z=void 0,W=void 0,$=Math.max(Y.minX,X.minX),Q=Math.max(Y.minY,X.minY),Z=Math.min(Y.maxX,X.maxX),W=Math.min(Y.maxY,X.maxY),Math.max(0,Z-$)*Math.max(0,W-Q)),St=R(vt)+R(ct);Lt<ut?(ut=Lt,V=ht,tt=St<tt?St:tt):Lt===ut&&St<tt&&(tt=St,V=ht)}return V||O-x},p.prototype._chooseSplitAxis=function(f,x,O){var V=f.leaf?this.compareMinX:A,Y=f.leaf?this.compareMinY:K;this._allDistMargin(f,x,O,V)<this._allDistMargin(f,x,O,Y)&&f.children.sort(V)},p.prototype._allDistMargin=function(f,x,O,V){f.children.sort(V);for(var Y=this.toBBox,X=C(f,0,x,Y),$=C(f,O-x,O,Y),Q=E(X)+E($),Z=x;Z<O-x;Z++){var W=f.children[Z];j(X,f.leaf?Y(W):W),Q+=E(X)}for(var ut=O-x-1;ut>=x;ut--){var tt=f.children[ut];j($,f.leaf?Y(tt):tt),Q+=E($)}return Q},p.prototype._adjustParentBBoxes=function(f,x,O){for(var V=O;V>=0;V--)j(x[V],f)},p.prototype._condense=function(f){for(var x=f.length-1,O=void 0;x>=0;x--)f[x].children.length===0?x>0?(O=f[x-1].children).splice(O.indexOf(f[x]),1):this.clear():d(f[x],this.toBBox)},p}()}},U={};function H(l){var h=U[l];if(h!==void 0)return h.exports;var a=U[l]={id:l,loaded:!1,exports:{}};return nt[l].call(a.exports,a,a.exports,H),a.loaded=!0,a.exports}H.n=l=>{var h=l&&l.__esModule?()=>l.default:()=>l;return H.d(h,{a:h}),h},H.d=(l,h)=>{for(var a in h)H.o(h,a)&&!H.o(l,a)&&Object.defineProperty(l,a,{enumerable:!0,get:h[a]})},H.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),H.o=(l,h)=>Object.prototype.hasOwnProperty.call(l,h),H.nmd=l=>(l.paths=[],l.children||(l.children=[]),l),H(8706)})();function ur(){const nt=["arizona_highways","aurora_sausage_link","borough_sausage_links","bristol_contraflow_cycleway","bristol_sausage_links","cycleway_rejoin_road","degenerate_bug","fremantle_placement","i5_exit_ramp","kingsway_junction","leeds_cycleway","montlake_roundabout","northgate_dual_carriageway","oneway_loop","perth_peanut_roundabout","perth_stretched_lights","quad_intersection","roosevelt_cycletrack","seattle_slip_lane","seattle_triangle","service_road_loop","st_georges_cycletrack","taipei","tempe_light_rail","tempe_split","tiny_loop","tiny_roundabout"],U=window.document.getElementById("test-list");for(const H of nt){const l=U.appendChild(window.document.createElement("option"));l.value=H,l.innerHTML=H}U.onchange=H=>{const l=H.currentTarget.value,h=new URLSearchParams(location.search);l?h.set("test",l):h.delete("test"),location.search=h.toString()}}class je{constructor(U,H){this.name=U,this.enabled=H,this.data=null}getData(){return this.data==null&&(console.log(`Lazily evaluating layer ${this.name}`),this.data=this.lazilyMakeData(),this.lazilyMakeData=null),this.data}}class fe{constructor(U,H){this.name=U,this.layers=[],this.enabled=!0,this.map=H}addLayer(U,H,{enabled:l=!0}={}){var h=new je(U,l);h.data=H,this.layers.push(h),l&&this.map.addLayer(h.getData())}addLazyLayer(U,H){var l=new je(U,!1);l.lazilyMakeData=H,this.layers.push(l)}replaceLayer(U,H,{lazy:l=!1}={}){for(const h of this.layers)if(h.name==U){h.enabled&&h.data!=null&&this.map.removeLayer(h.data),l?(h.data=null,h.lazilyMakeData=H):h.data=H,h.enabled&&this.map.addLayer(h.getData());break}}setEnabled(U){this.enabled=U;for(const H of this.layers)H.enabled=U,U?this.map.addLayer(H.getData()):H.data!=null&&this.map.removeLayer(H.data)}renderControls(){var U=[Ge(this.name,`<u>${this.name}</u>`,this.enabled,l=>{this.setEnabled(l),document.getElementById(this.name).replaceWith(this.renderControls())})];for(const l of this.layers){const h=Ge(this.name+"_"+l.name,l.name,l.enabled,u=>{l.enabled=u,u?this.map.addLayer(l.getData()):this.map.removeLayer(l.getData())}),a=me("Download");a.onclick=()=>{ir(`${l.name}.geojson`,JSON.stringify(l.getData().toGeoJSON()))},h.appendChild(a),U.push(h)}var H=Qt(U);return H.id=this.name,H}remove(){for(const U of this.layers)U.data!=null&&this.map.removeLayer(U.data)}}class cr{constructor(U,H){this.name=U,this.groups=H,this.current=0;for(var l=0;l<this.groups.length;l++)this.groups[l].setEnabled(l==this.current)}changeCurrent(U){this.groups[this.current].setEnabled(!1),this.current=U,this.groups[this.current].setEnabled(!0),document.getElementById(this.name).replaceWith(this.renderControls())}renderControls(){const U=me("Previous");U.disabled=this.current==0,U.onclick=()=>{this.changeCurrent(this.current-1)};const H=document.createTextNode(`${this.current+1} / ${this.groups.length}`),l=me("Next");l.disabled=this.current==this.groups.length-1,l.onclick=()=>{this.changeCurrent(this.current+1)};const h=Rt.DomUtil.create("select");var a=0;for(let d of this.groups){const C=Rt.DomUtil.create("option");C.value=a,C.textContent=`${d.name}`,h.appendChild(C),a++}h.value=this.current,h.onchange=()=>{this.changeCurrent(parseInt(h.value))};var u=Rt.DomUtil.create("u");u.innerText=this.name;const p=Qt([U,H,l]),y=Qt([u,p,h,this.groups[this.current].renderControls()]);return y.id=this.name,y}remove(){this.groups[this.current].setEnabled(!1)}}const pr=Rt.Control.extend({options:{position:"bottomleft"},onAdd:function(nt){return this.renderControls()},renderControls:function(){var nt=[];for(const H of this.options.groups)nt.push(H.renderControls()),nt.push(Rt.DomUtil.create("br"));nt.pop();var U=Qt(nt);return U.style="background: black; padding: 10px;",Rt.DomEvent.disableClickPropagation(U),U},getGroup:function(nt){for(const U of this.options.groups)if(U.name==nt)return U;throw`Can't find group ${nt}`},getLayer:function(nt,U){for(const H of this.options.groups)if(H.name==nt){for(const l of H.layers)if(l.name==U)return l}throw`Can't find group ${nt} with layer ${U}`},removeGroups:function(nt){var U=[];for(const H of this.options.groups)nt(H.name)?H.remove():U.push(H);this.options.groups=U,Rt.DomUtil.empty(this.getContainer()),this.getContainer().appendChild(this.renderControls())},addGroup:function(nt){this.options.groups.push(nt),Rt.DomUtil.empty(this.getContainer()),this.getContainer().appendChild(this.renderControls())}}),gr=function(nt){return new pr({app:nt,groups:[]})};function Ge(nt,U,H,l){var h=Rt.DomUtil.create("input");h.id=nt,h.type="checkbox",h.checked=H,h.onclick=()=>{l(h.checked)};var a=Rt.DomUtil.create("label");return a.for=nt,a.innerHTML=U,Qt([h,a])}function Qt(nt){var U=Rt.DomUtil.create("div");for(const H of nt)U.appendChild(H);return U}function me(nt){const U=Rt.DomUtil.create("button");return U.type="button",U.innerHTML=nt,U}await Ur();class _e{constructor(U){this.map=Vr(U),this.currentTest=null,this.layers=gr(this).addTo(this.map),this.settingsControl=null,this.dynamicMouseoverLayer=null,ur()}static async create(U){const H=new _e(U),l=new URLSearchParams(window.location.search);if(l.has("test")){const a=l.get("test");console.info(`Loading test ${a} from URL.`),await H.setCurrentTest(u=>Ft.loadFromServer(u,a))}const h=document.getElementById("import-view");return h&&(h.onclick=async()=>{if(H.map.getZoom()<15){window.alert("Zoom in more to import");return}await H.setCurrentTest(a=>{const u=fr(a.map);return Ft.importBoundary(a,h,u)})}),H.map.pm&&H.currentTest==null&&(H.map.pm.addControls({position:"bottomright",editControls:!1,drawMarker:!1,drawCircleMarker:!1,drawPolyline:!1,drawCircle:!1,drawText:!1}),H.map.on("pm:create",async a=>{H.map.eachLayer(u=>{u._path!=null&&u.remove()}),await H.setCurrentTest(u=>{const p=dr(a.layer.getLatLngs()[0]);return Ft.importBoundary(u,h,p)})})),H}getImportSettings(){try{const U=new FormData(document.getElementById("import-settings"));return Object.fromEntries(U)}catch(U){return console.warn("failed to get import settings from the DOM:",U),{}}}async setCurrentTest(U){this.layers.removeGroups(H=>!0),this.currentTest=await U(this),this.currentTest&&(this.map.fitBounds(this.currentTest.bounds,{animate:!1}),document.getElementById("test-list").value=this.currentTest.name||"dynamic",this.currentTest.renderControls(document.getElementById("view-controls")))}}class Ft{constructor(U,H,l,h,a){this.app=U,this.name=H,this.osmXML=l,this.bounds=h,this.boundary=a}static async loadFromServer(U,H){const l=`tests/${H}/`,h=await Ie(l+"input.osm"),a=await Ie(l+"geometry.json"),u=JSON.parse(await Ie(l+"boundary.json")),p=Rt.geoJSON(JSON.parse(a)),y=p.getBounds();var d=new fe("built-in test case",U.map);return d.addLayer("Boundary",nr(u)),d.addLayer("OSM",ar(h),{enabled:!1}),d.addLayer("Overview",p),U.layers.addGroup(d),new Ft(U,H,h,y,u)}static async importBoundary(U,H,l){var h='poly:"';for(const[u,p]of l.features[0].geometry.coordinates[0])h+=`${p} ${u} `;h=h.slice(0,-1)+'"';const a=`https://overpass-api.de/api/interpreter?data=${`(nwr(${h}); node(w)->.x; <;); out meta;`}`;console.log(`Fetching from overpass: ${a}`),H.innerText="Downloading from Overpass...",H.disabled=!0;try{const u=await(await fetch(a)).text();H.innerText="Importing OSM data...",Ae("Imported area",U,u,!0,l);const p=U.layers.getLayer("Imported area","Geometry").getData().getBounds(),y=new URL(window.location);return y.searchParams.delete("test"),window.history.pushState({},"",y),new Ft(U,null,u,p,l)}catch(u){return window.alert(`Import failed: ${u}`),null}finally{H.innerText="Import current view",H.disabled=!1}}renderControls(U){if(U.innerHTML="",this.name){const h=U.appendChild(document.createElement("button"));h.type="button",h.innerHTML="Generate Details",h.onclick=()=>{this.app.layers.removeGroups(p=>p!="built-in test case"),this.app.layers.getGroup("built-in test case").setEnabled(!1),Ae("Details",this.app,this.osmXML,!1,this.boundary)};const a=U.appendChild(document.createElement("button"));a.type="button",a.innerHTML="Update OSM data";const u=this.boundary;a.onclick=async()=>{await this.app.setCurrentTest(p=>Ft.importBoundary(p,a,u))}}const H=U.appendChild(document.createElement("button"));H.type="button",H.innerHTML="Download osm.xml",H.onclick=()=>ir(`${this.name||"new"}.osm.xml`,this.osmXML);const l=U.appendChild(document.createElement("button"));l.type="button",l.innerHTML="Reset view",l.onclick=()=>{this.app.map.fitBounds(this.bounds,{animate:!1})}}}function Ae(nt,U,H,l,h){try{const y=U.getImportSettings(),d=new Fr(H,JSON.stringify(h),{debug_each_step:!!y.debugEachStep,dual_carriageway_experiment:!!y.dualCarriagewayExperiment,sidepath_zipping_experiment:!!y.sidepathZippingExperiment,inferred_sidewalks:y.sidewalks==="infer",osm2lanes:!!y.osm2lanes});var a=new fe(nt,U.map);if(a.addLayer("Boundary",nr(h)),l)try{a.addLayer("OSM",ar(H),{enabled:!1})}catch(C){window.alert(`Warning: OSM layer not added: ${C}`)}a.addLayer("Geometry",or(d,U.dynamicMouseoverLayer,U.map,a)),a.addLayer("Lane polygons",sr(d,U.dynamicMouseoverLayer,U.map,a)),a.addLayer("Lane markings",lr(d.toLaneMarkingsGeojson())),a.addLayer("Intersection markings",Kr(d.toIntersectionMarkingsGeojson())),a.addLazyLayer("Debug road ordering",()=>hr(d.debugClockwiseOrderingGeojson())),d.getDebugSteps().length>0&&a.setEnabled(!1),U.layers.addGroup(a);var u=[],p=0;for(const C of d.getDebugSteps()){p++;var a=new fe(`Step ${p}: ${C.getLabel()}`,U.map);a.addLazyLayer("Geometry",()=>or(C.getNetwork(),U.dynamicMouseoverLayer,U.map,null)),a.addLazyLayer("Lane polygons",()=>sr(C.getNetwork(),U.dynamicMouseoverLayer,U.map,null)),a.addLazyLayer("Lane markings",()=>lr(C.getNetwork().toLaneMarkingsGeojson()));const A=C.toDebugGeojson();A&&a.addLazyLayer("Debug",()=>hr(A)),u.push(a)}u.length!=0&&U.layers.addGroup(new cr("transformation steps",u))}catch(y){window.alert(`Import failed: ${y}`)}}function Jt(nt){return[nt.lng,nt.lat]}function dr(nt){return nt.push(nt[0]),{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[nt.map(Jt)],type:"Polygon"}}]}}function fr(nt){const U=nt.getBounds();return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[[Jt(U.getSouthWest()),Jt(U.getNorthWest()),Jt(U.getNorthEast()),Jt(U.getSouthEast()),Jt(U.getSouthWest())]],type:"Polygon"}}]}}window.app=await _e.create(document.getElementById("map"))})();
