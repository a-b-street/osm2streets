{"version":3,"file":"d3-graphviz.js","sources":["../src/element.js","../src/utils.js","../src/zoom.js","../src/tweening.js","../src/data.js","../src/render.js","../src/graphvizVersion.js","../src/svg.js","../src/dot.js","../src/renderDot.js","../src/transition.js","../src/options.js","../src/width.js","../src/height.js","../src/scale.js","../src/fit.js","../src/attributer.js","../src/engine.js","../src/images.js","../src/keyMode.js","../src/fade.js","../src/tweenPaths.js","../src/tweenShapes.js","../src/convertEqualSidedPolygons.js","../src/tweenPrecision.js","../src/growEnteringEdges.js","../src/on.js","../src/onerror.js","../src/logEvents.js","../src/destroy.js","../src/geometry.js","../src/drawEdge.js","../src/drawNode.js","../src/workerCode.js","../src/graphviz.js","../src/selection/graphviz.js","../src/selection/selectWithoutDataPropagation.js","../src/selection/index.js"],"sourcesContent":["import * as d3 from \"d3-selection\";\n\nexport function extractElementData(element) {\n\n    var datum = {};\n    var tag = element.node().nodeName;\n    datum.tag = tag;\n    if (tag == '#text') {\n        datum.text = element.text();\n    } else if (tag == '#comment') {\n        datum.comment = element.text();\n    }\n    datum.attributes = {};\n    var attributes = element.node().attributes;\n    if (attributes) {\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            var name = attribute.name;\n            var value = attribute.value;\n            datum.attributes[name] = value;\n        }\n    }\n    var transform = element.node().transform;\n    if (transform && transform.baseVal.numberOfItems != 0) {\n        var matrix = transform.baseVal.consolidate().matrix;\n        datum.translation = {x: matrix.e, y: matrix.f};\n        datum.scale = matrix.a;\n    }\n    if (tag == 'ellipse') {\n        datum.center = {\n            x: datum.attributes.cx,\n            y: datum.attributes.cy,\n        };\n    }\n    if (tag == 'polygon') {\n        var points = element.attr('points').split(' ');\n        var x = points.map(function(p) {return p.split(',')[0]});\n        var y = points.map(function(p) {return p.split(',')[1]});\n        var xmin = Math.min.apply(null, x);\n        var xmax = Math.max.apply(null, x);\n        var ymin = Math.min.apply(null, y);\n        var ymax = Math.max.apply(null, y);\n        var bbox = {\n            x: xmin,\n            y: ymin,\n            width: xmax - xmin,\n            height: ymax - ymin,\n        };\n        datum.bbox = bbox;\n        datum.center = {\n            x: (xmin + xmax) / 2,\n            y: (ymin + ymax) / 2,\n        };\n    }\n    if (tag == 'path') {\n        var d = element.attr('d');\n        var points = d.split(/[A-Z ]/);\n        points.shift();\n        var x = points.map(function(p) {return +p.split(',')[0]});\n        var y = points.map(function(p) {return +p.split(',')[1]});\n        var xmin = Math.min.apply(null, x);\n        var xmax = Math.max.apply(null, x);\n        var ymin = Math.min.apply(null, y);\n        var ymax = Math.max.apply(null, y);\n        var bbox = {\n            x: xmin,\n            y: ymin,\n            width: xmax - xmin,\n            height: ymax - ymin,\n        };\n        datum.bbox = bbox;\n        datum.center = {\n            x: (xmin + xmax) / 2,\n            y: (ymin + ymax) / 2,\n        };\n        datum.totalLength = element.node().getTotalLength();\n    }\n    if (tag == 'text') {\n        datum.center = {\n            x: element.attr('x'),\n            y: element.attr('y'),\n        };\n    }\n    if (tag == '#text') {\n        datum.text = element.text();\n    } else if (tag == '#comment') {\n        datum.comment = element.text();\n    }\n    return datum\n}\n\nexport function extractAllElementsData(element) {\n\n    var datum = extractElementData(element);\n    datum.children = [];\n    var children = d3.selectAll(element.node().childNodes);\n    children.each(function () {\n        var childData = extractAllElementsData(d3.select(this));\n        childData.parent = datum;\n        datum.children.push(childData);\n    });\n    return datum;\n}\n\nexport function createElement(data) {\n\n    if (data.tag == '#text') {\n        return document.createTextNode(\"\");\n    } else if (data.tag == '#comment') {\n        return document.createComment(data.comment);\n    } else {\n        return document.createElementNS('http://www.w3.org/2000/svg', data.tag);\n    }\n}\n\nexport function createElementWithAttributes(data) {\n\n    var elementNode = createElement(data);\n    var element = d3.select(elementNode);\n    var attributes = data.attributes;\n    for (var attributeName of Object.keys(attributes)) {\n        var attributeValue = attributes[attributeName];\n        element.attr(attributeName, attributeValue);\n    }\n    return elementNode;\n}\n\nexport function replaceElement(element, data) {\n    var parent = d3.select(element.node().parentNode);\n    var newElementNode = createElementWithAttributes(data);\n    var newElement = parent.insert(function () {\n        return newElementNode;\n    }, function () {\n        return element.node();\n    });\n    element.remove();\n    return newElement;\n}\n\nexport function insertElementData(element, datum) {\n    element.datum(datum);\n    element.data([datum], function (d) {\n        return d.key;\n    });\n}\n\nexport function insertAllElementsData(element, datum) {\n    insertElementData(element, datum);\n    var children = d3.selectAll(element.node().childNodes);\n    children.each(function (d, i) {\n        insertAllElementsData(d3.select(this), datum.children[i]);\n    });\n}\n\nfunction insertChildren(element, index) {\n    var children = element.selectAll(function () {\n        return element.node().childNodes;\n    });\n\n    children = children\n      .data(function (d) {\n          return d.children;\n      }, function (d) {\n        return d.tag + '-' + index;\n      });\n    var childrenEnter = children\n      .enter()\n      .append(function(d) {\n          return createElement(d);\n      });\n\n    var childrenExit = children\n      .exit();\n    childrenExit = childrenExit\n        .remove()\n    children = childrenEnter\n        .merge(children);\n    var childTagIndexes = {};\n    children.each(function(childData) {\n        var childTag = childData.tag;\n        if (childTagIndexes[childTag] == null) {\n          childTagIndexes[childTag] = 0;\n        }\n        var childIndex = childTagIndexes[childTag]++;\n        attributeElement.call(this, childData, childIndex);\n    });\n}\n\nexport function attributeElement(data, index=0) {\n    var element = d3.select(this);\n    var tag = data.tag;\n    var attributes = data.attributes;\n    var currentAttributes = element.node().attributes;\n    if (currentAttributes) {\n        for (var i = 0; i < currentAttributes.length; i++) {\n            var currentAttribute = currentAttributes[i];\n            var name = currentAttribute.name;\n            if (name.split(':')[0] != 'xmlns' && currentAttribute.namespaceURI) {\n                var namespaceURIParts = currentAttribute.namespaceURI.split('/');\n                var namespace = namespaceURIParts[namespaceURIParts.length - 1];\n                name = namespace + ':' + name;\n            }\n            if (!(name in attributes)) {\n                attributes[name] = null;\n            }\n        }\n    }\n    for (var attributeName of Object.keys(attributes)) {\n        element\n            .attr(attributeName, attributes[attributeName]);\n    }\n    if (data.text) {\n        element\n            .text(data.text);\n    }\n    insertChildren(element, index);\n}\n","export function shallowCopyObject(obj) {\n    return Object.assign({}, obj);\n}\n\nexport function roundTo2Decimals(x) {\n    return Math.round(x * 100.0) / 100.0\n}\n","import * as d3 from \"d3-selection\";\nimport {zoom, zoomTransform, zoomIdentity} from \"d3-zoom\";\nimport {interpolate} from \"d3-interpolate\";\n\nexport default function(enable) {\n\n    this._options.zoom = enable;\n\n    if (this._options.zoom && !this._zoomBehavior) {\n        createZoomBehavior.call(this);\n    } else if (!this._options.zoom && this._zoomBehavior) {\n        this._zoomSelection.on(\".zoom\", null);\n        this._zoomBehavior = null;\n    }\n\n    return this;\n}\n\nexport function createZoomBehavior() {\n\n    var graphvizInstance = this;\n    function zoomed(event) {\n        var g = d3.select(svg.node().querySelector(\"g\"));\n        g.attr('transform', event.transform);\n        graphvizInstance._dispatch.call('zoom', graphvizInstance);\n    }\n\n    var root = this._selection;\n    var svg = d3.select(root.node().querySelector(\"svg\"));\n    if (svg.size() == 0) {\n        return this;\n    }\n    this._zoomSelection = svg;\n    var zoomBehavior = zoom()\n        .scaleExtent(this._options.zoomScaleExtent)\n        .translateExtent(this._options.zoomTranslateExtent)\n        .interpolate(interpolate)\n        .on(\"zoom\", zoomed);\n    this._zoomBehavior = zoomBehavior;\n    var g = d3.select(svg.node().querySelector(\"g\"));\n    svg.call(zoomBehavior);\n    if (!this._active) {\n        translateZoomBehaviorTransform.call(this, g);\n    }\n    this._originalTransform = zoomTransform(svg.node());\n\n    return this;\n};\n\nexport function getTranslatedZoomTransform(selection) {\n\n    // Get the current zoom transform for the top level svg and\n    // translate it uniformly with the given selection, using the\n    // difference between the translation specified in the selection's\n    // data and it's saved previous translation. The selection is\n    // normally the top level g element of the graph.\n    var oldTranslation = this._translation;\n    var oldScale = this._scale;\n    var newTranslation = selection.datum().translation;\n    var newScale = selection.datum().scale;\n    var t = zoomTransform(this._zoomSelection.node());\n    if (oldTranslation) {\n        t = t.scale(1 / oldScale);\n        t = t.translate(-oldTranslation.x, -oldTranslation.y);\n    }\n    t = t.translate(newTranslation.x, newTranslation.y);\n    t = t.scale(newScale);\n    return t;\n}\n\nexport function translateZoomBehaviorTransform(selection) {\n\n    // Translate the current zoom transform for the top level svg\n    // uniformly with the given selection, using the difference\n    // between the translation specified in the selection's data and\n    // it's saved previous translation. The selection is normally the\n    // top level g element of the graph.\n    this._zoomBehavior.transform(this._zoomSelection, getTranslatedZoomTransform.call(this, selection));\n\n    // Save the selections's new translation and scale.\n    this._translation = selection.datum().translation;\n    this._scale = selection.datum().scale;\n\n    // Set the original zoom transform to the translation and scale specified in\n    // the selection's data.\n    this._originalTransform = zoomIdentity.translate(selection.datum().translation.x, selection.datum().translation.y).scale(selection.datum().scale);\n}\n\nexport function resetZoom(transition) {\n\n    // Reset the zoom transform to the original zoom transform.\n    var selection = this._zoomSelection;\n    if (transition) {\n        selection = selection\n            .transition(transition);\n    }\n    selection\n        .call(this._zoomBehavior.transform, this._originalTransform);\n\n    return this;\n}\n\nexport function zoomScaleExtent(extent) {\n\n    this._options.zoomScaleExtent = extent;\n\n    return this;\n}\n\nexport function zoomTranslateExtent(extent) {\n\n    this._options.zoomTranslateExtent = extent;\n\n    return this;\n}\n\nexport function zoomBehavior() {\n  return this._zoomBehavior || null;\n}\n\nexport function zoomSelection() {\n  return this._zoomSelection || null;\n}\n","import {interpolate} from \"d3-interpolate\";\n\nexport function pathTween(points, d1) {\n    return function() {\n        const pointInterpolators = points.map(function(p) {\n            return interpolate([p[0][0], p[0][1]], [p[1][0], p[1][1]]);\n        });\n        return function(t) {\n            return t < 1 ? \"M\" + pointInterpolators.map(function(p) { return p(t); }).join(\"L\") : d1;\n        };\n    };\n}\n\nexport function pathTweenPoints(node, d1, precision, precisionIsRelative) {\n    const path0 = node;\n    const path1 = path0.cloneNode();\n    const n0 = path0.getTotalLength();\n    const n1 = (path1.setAttribute(\"d\", d1), path1).getTotalLength();\n\n    // Uniform sampling of distance based on specified precision.\n    const distances = [0];\n    let i = 0;\n    const dt = precisionIsRelative ? precision : precision / Math.max(n0, n1);\n    while ((i += dt) < 1) {\n      distances.push(i);\n    }\n    distances.push(1);\n\n    // Compute point-interpolators at each distance.\n    const points = distances.map(function(t) {\n        const p0 = path0.getPointAtLength(t * n0);\n        const p1 = path1.getPointAtLength(t * n1);\n        return ([[p0.x, p0.y], [p1.x, p1.y]]);\n    });\n    return points;\n}\n","export default function() {\n    return this._data || null;\n}\n\nexport function isEdgeElementParent(datum) {\n    return (datum.attributes.class == 'edge' || (\n        datum.tag == 'a' &&\n            datum.parent.tag == 'g' &&\n            datum.parent.parent.attributes.class == 'edge'\n    ));\n}\n\nexport function isEdgeElement(datum) {\n    return datum.parent && isEdgeElementParent(datum.parent);\n}\n\nexport function getEdgeGroup(datum) {\n    if (datum.parent.attributes.class == 'edge') {\n        return datum.parent;\n    } else { // datum.parent.tag == 'g' && datum.parent.parent.tag == 'g' && datum.parent.parent.parent.attributes.class == 'edge'\n        return datum.parent.parent.parent;\n    }\n}\n\nexport function getEdgeTitle(datum) {\n    return getEdgeGroup(datum).children.find(function (e) {\n        return e.tag == 'title';\n    });\n}\n","import * as d3 from \"d3-selection\";\nimport {transition} from \"d3-transition\";\nimport {timeout} from \"d3-timer\";\nimport {interpolateTransformSvg} from \"d3-interpolate\";\nimport {zoomTransform} from \"d3-zoom\";\nimport {createElement, extractElementData, replaceElement} from \"./element\";\nimport {shallowCopyObject} from \"./utils\";\nimport {createZoomBehavior, getTranslatedZoomTransform, translateZoomBehaviorTransform} from \"./zoom\";\nimport {pathTween} from \"./tweening\";\nimport {isEdgeElement} from \"./data\";\nimport {isEdgeElementParent} from \"./data\";\n\nexport default function(callback) {\n\n    if (this._busy) {\n        this._queue.push(this.render.bind(this, callback));\n        return this;\n    }\n    this._dispatch.call('renderStart', this);\n\n    if (this._transitionFactory) {\n        timeout(function () { // Decouple from time spent. See https://github.com/d3/d3-timer/issues/27\n            this._transition = transition(this._transitionFactory());\n            _render.call(this, callback);\n        }.bind(this), 0);\n    } else {\n        _render.call(this, callback);\n    }\n    return this;\n}\n\nfunction _render(callback) {\n\n    var transitionInstance = this._transition;\n    var fade = this._options.fade && transitionInstance != null;\n    var tweenPaths = this._options.tweenPaths;\n    var tweenShapes = this._options.tweenShapes;\n    var convertEqualSidedPolygons = this._options.convertEqualSidedPolygons;\n    var growEnteringEdges = this._options.growEnteringEdges && transitionInstance != null;\n    var attributer = this._attributer;\n    var graphvizInstance = this;\n\n    function insertChildren(element) {\n        var children = element.selectAll(function () {\n            return element.node().childNodes;\n        });\n\n        children = children\n          .data(function (d) {\n              return d.children;\n          }, function (d) {\n              return d.key;\n          });\n        var childrenEnter = children\n          .enter()\n          .append(function(d) {\n              var element = createElement(d);\n              if (d.tag == '#text' && fade) {\n                  element.nodeValue = d.text;\n              }\n              return element;\n          });\n\n        if (fade || (growEnteringEdges && isEdgeElementParent(element.datum()))) {\n            var childElementsEnter = childrenEnter\n                .filter(function(d) {\n                    return d.tag[0] == '#' ? null : this;\n                })\n                .each(function (d) {\n                    var childEnter = d3.select(this);\n                    for (var attributeName of Object.keys(d.attributes)) {\n                        var attributeValue = d.attributes[attributeName];\n                        childEnter\n                            .attr(attributeName, attributeValue);\n                    }\n                });\n            childElementsEnter\n              .filter(function(d) {\n                    return d.tag == 'svg' || d.tag == 'g' ? null : this;\n              })\n                .style(\"opacity\", 0.0);\n        }\n        var childrenExit = children\n          .exit();\n        if (attributer) {\n            childrenExit.each(attributer);\n        }\n        if (transitionInstance) {\n            childrenExit = childrenExit\n                .transition(transitionInstance);\n            if (fade) {\n                childrenExit\n                  .filter(function(d) {\n                      return d.tag[0] == '#' ? null : this;\n                  })\n                    .style(\"opacity\", 0.0);\n            }\n        }\n        childrenExit = childrenExit\n            .remove()\n        children = childrenEnter\n            .merge(children);\n        children.each(attributeElement);\n    }\n\n    function attributeElement(data) {\n        var element = d3.select(this);\n        if (data.tag == \"svg\") {\n            var options = graphvizInstance._options;\n            if (options.width != null || options.height != null) {\n                var width = options.width;\n                var height = options.height;\n                if (width == null) {\n                    width = data.attributes.width.replace('pt', '') * 4 / 3;\n                } else {\n                    element\n                        .attr(\"width\", width);\n                    data.attributes.width = width;\n                }\n                if (height == null) {\n                    height = data.attributes.height.replace('pt', '') * 4 / 3;\n                } else {\n                    element\n                        .attr(\"height\", height);\n                    data.attributes.height = height;\n                }\n                if (!options.fit) {\n                    element\n                        .attr(\"viewBox\", `0 0 ${width * 3 / 4 / options.scale} ${height * 3 / 4 / options.scale}`);\n                    data.attributes.viewBox = `0 0 ${width * 3 / 4 / options.scale} ${height * 3 / 4 / options.scale}`;\n                }\n            }\n            if (options.scale != 1 && (options.fit || (options.width == null && options.height == null))) {\n                width = data.attributes.viewBox.split(' ')[2];\n                height = data.attributes.viewBox.split(' ')[3];\n                element\n                    .attr(\"viewBox\", `0 0 ${width / options.scale} ${height / options.scale}`);\n                data.attributes.viewBox = `0 0 ${width / options.scale} ${height / options.scale}`;\n            }\n        }\n        if (attributer) {\n            element.each(attributer);\n        }\n        var tag = data.tag;\n        var attributes = data.attributes;\n        var currentAttributes = element.node().attributes;\n        if (currentAttributes) {\n            for (var i = 0; i < currentAttributes.length; i++) {\n                var currentAttribute = currentAttributes[i];\n                var name = currentAttribute.name;\n                if (name.split(':')[0] != 'xmlns' && currentAttribute.namespaceURI) {\n                    var namespaceURIParts = currentAttribute.namespaceURI.split('/');\n                    var namespace = namespaceURIParts[namespaceURIParts.length - 1];\n                    name = namespace + ':' + name;\n                }\n                if (!(name in attributes)) {\n                    attributes[name] = null;\n                }\n            }\n        }\n        var convertShape = false;\n        var convertPrevShape = false;\n        if (tweenShapes && transitionInstance) {\n            if ((this.nodeName == 'polygon' || this.nodeName == 'ellipse') && data.alternativeOld) {\n                convertPrevShape = true;\n            }\n            if ((tag == 'polygon' || tag == 'ellipse') && data.alternativeNew) {\n                convertShape = true;\n            }\n            if (this.nodeName == 'polygon' && tag == 'polygon' && data.alternativeOld) {\n                var prevData = extractElementData(element);\n                var prevPoints = prevData.attributes.points;\n                if (!convertEqualSidedPolygons) {\n                    var nPrevPoints = prevPoints.split(' ').length;\n                    var points = data.attributes.points;\n                    var nPoints = points.split(' ').length;\n                    if (nPoints == nPrevPoints) {\n                        convertShape = false;\n                        convertPrevShape = false;\n                    }\n                }\n            }\n            if (convertPrevShape) {\n                var prevPathData = data.alternativeOld;\n                var pathElement = replaceElement(element, prevPathData);\n                pathElement.data([data], function () {\n                    return data.key;\n                });\n                element = pathElement;\n            }\n            if (convertShape) {\n                var newPathData = data.alternativeNew;\n                tag = 'path';\n                attributes = newPathData.attributes;\n            }\n        }\n        var elementTransition = element;\n        if (transitionInstance) {\n            elementTransition = elementTransition\n                .transition(transitionInstance);\n            if (fade) {\n                elementTransition\n                  .filter(function(d) {\n                      return d.tag[0] == '#' ? null : this;\n                  })\n                    .style(\"opacity\", 1.0);\n            }\n            elementTransition\n              .filter(function(d) {\n                  return d.tag[0] == '#' ? null : this;\n              })\n                .on(\"end\", function(d) {\n                    d3.select(this)\n                        .attr('style', (d && d.attributes && d.attributes.style) || null);\n                });\n        }\n        var growThisPath = growEnteringEdges && tag == 'path' && data.offset;\n        if (growThisPath) {\n            var totalLength = data.totalLength;\n            element\n                .attr(\"stroke-dasharray\", totalLength + \" \" + totalLength)\n                .attr(\"stroke-dashoffset\", totalLength)\n                .attr('transform', 'translate(' + data.offset.x + ',' + data.offset.y + ')');\n            attributes[\"stroke-dashoffset\"] = 0;\n            attributes['transform'] = 'translate(0,0)';\n            elementTransition\n                .attr(\"stroke-dashoffset\", attributes[\"stroke-dashoffset\"])\n                .attr('transform', attributes['transform'])\n                .on(\"start\", function() {\n                    d3.select(this)\n                        .style('opacity', null);\n                })\n                .on(\"end\", function() {\n                    d3.select(this)\n                        .attr('stroke-dashoffset', null)\n                        .attr('stroke-dasharray', null)\n                        .attr('transform', null);\n                });\n        }\n        var moveThisPolygon = growEnteringEdges && tag == 'polygon' && isEdgeElement(data) && data.offset && data.parent.children[3].tag == 'path';\n        if (moveThisPolygon) {\n            var edgePath = d3.select(element.node().parentNode.querySelector(\"path\"));\n            var p0 = edgePath.node().getPointAtLength(0);\n            var p1 = edgePath.node().getPointAtLength(data.totalLength);\n            var p2 = edgePath.node().getPointAtLength(data.totalLength - 1);\n            var angle1 = Math.atan2(p1.y - p2.y, p1.x - p2.x) * 180 / Math.PI;\n            var x = p0.x - p1.x + data.offset.x;\n            var y = p0.y - p1.y + data.offset.y;\n            element\n                .attr('transform', 'translate(' + x + ',' + y + ')');\n            elementTransition\n                .attrTween(\"transform\", function () {\n                    return function (t) {\n                        var p = edgePath.node().getPointAtLength(data.totalLength * t);\n                        var p2 = edgePath.node().getPointAtLength(data.totalLength * t + 1);\n                        var angle = Math.atan2(p2.y - p.y, p2.x - p.x) * 180 / Math.PI - angle1;\n                        x = p.x - p1.x + data.offset.x * (1 - t);\n                        y = p.y - p1.y + data.offset.y * (1 - t);\n                        return 'translate(' + x + ',' + y + ') rotate(' + angle + ' ' + p1.x + ' ' + p1.y + ')';\n                    }\n                })\n                .on(\"start\", function() {\n                    d3.select(this)\n                        .style('opacity', null);\n                })\n                .on(\"end\", function() {\n                    d3.select(this).attr('transform', null);\n                });\n        }\n        var tweenThisPath = tweenPaths && transitionInstance && tag == 'path' && element.attr('d') != null;\n        for (var attributeName of Object.keys(attributes)) {\n            var attributeValue = attributes[attributeName];\n            if (tweenThisPath && attributeName == 'd') {\n                var points = (data.alternativeOld || data).points;\n                if (points) {\n                    elementTransition\n                        .attrTween(\"d\", pathTween(points, attributeValue));\n                }\n            } else {\n                if (attributeName == 'transform' && data.translation) {\n                    if (transitionInstance) {\n                        var onEnd = elementTransition.on(\"end\");\n                        elementTransition\n                            .on(\"start\", function () {\n                                if (graphvizInstance._zoomBehavior) {\n                                    // Update the transform to transition to, just before the transition starts\n                                    // in order to catch changes between the transition scheduling to its start.\n                                    elementTransition\n                                        .tween(\"attr.transform\", function() {\n                                            var node = this;\n                                            return function(t) {\n                                                node.setAttribute(\"transform\", interpolateTransformSvg(zoomTransform(graphvizInstance._zoomSelection.node()).toString(), getTranslatedZoomTransform.call(graphvizInstance, element).toString())(t));\n                                            };\n                                        });\n                                }\n                            })\n                            .on(\"end\", function () {\n                                onEnd.call(this);\n                                // Update the zoom transform to the new translated transform\n                                if (graphvizInstance._zoomBehavior) {\n                                    translateZoomBehaviorTransform.call(graphvizInstance, element);\n                                }\n                            })\n                    } else {\n                        if (graphvizInstance._zoomBehavior) {\n                            // Update the transform attribute to set with the current pan translation\n                            translateZoomBehaviorTransform.call(graphvizInstance, element);\n                            attributeValue = getTranslatedZoomTransform.call(graphvizInstance, element).toString();\n                        }\n                    }\n                }\n                elementTransition\n                    .attr(attributeName, attributeValue);\n            }\n        }\n        if (convertShape) {\n            elementTransition\n                .on(\"end\", function (d, i, nodes) {\n                    pathElement = d3.select(this);\n                    var newElement = replaceElement(pathElement, d);\n                    newElement.data([d], function () {\n                        return d.key;\n                    });\n                })\n        }\n        if (data.text) {\n            elementTransition\n                .text(data.text);\n        }\n        insertChildren(element);\n    }\n\n    var root = this._selection;\n\n    if (transitionInstance != null) {\n        // Ensure original SVG shape elements are restored after transition before rendering new graph\n        var jobs = this._jobs;\n        if (graphvizInstance._active) {\n            jobs.push(null);\n            return this;\n        } else {\n            root\n              .transition(transitionInstance)\n              .transition()\n                .duration(0)\n                .on(\"end\" , function () {\n                    graphvizInstance._active = false;\n                    if (jobs.length != 0) {\n                        jobs.shift();\n                        graphvizInstance.render();\n                    }\n                });\n            this._active = true;\n        }\n    }\n\n    if (transitionInstance != null) {\n        root\n          .transition(transitionInstance)\n            .on(\"start\" , function () {\n                graphvizInstance._dispatch.call('transitionStart', graphvizInstance);\n            })\n            .on(\"end\" , function () {\n                graphvizInstance._dispatch.call('transitionEnd', graphvizInstance);\n            })\n          .transition()\n            .duration(0)\n            .on(\"start\" , function () {\n                graphvizInstance._dispatch.call('restoreEnd', graphvizInstance);\n                graphvizInstance._dispatch.call('end', graphvizInstance);\n                if (callback) {\n                    callback.call(graphvizInstance);\n                }\n            });\n    }\n\n    var data = this._data;\n\n    var svg = root\n      .selectAll(\"svg\")\n        .data([data], function (d) {return d.key});\n    svg = svg\n      .enter()\n      .append(\"svg\")\n      .merge(svg);\n\n    attributeElement.call(svg.node(), data);\n\n\n    if (this._options.zoom && !this._zoomBehavior) {\n        createZoomBehavior.call(this);\n    }\n\n    graphvizInstance._dispatch.call('renderEnd', graphvizInstance);\n\n    if (transitionInstance == null) {\n        this._dispatch.call('end', this);\n        if (callback) {\n            callback.call(this);\n        }\n    }\n\n    return this;\n};\n","export default function() {\n    return this._graphvizVersion;\n};\n","import {shallowCopyObject} from \"./utils\";\nimport {roundTo2Decimals} from \"./utils\";\n\nexport function convertToPathData(originalData, guideData) {\n    if (originalData.tag == 'polygon') {\n        var newData = shallowCopyObject(originalData);\n        newData.tag = 'path';\n        var originalAttributes = originalData.attributes;\n        var newAttributes = shallowCopyObject(originalAttributes);\n        var newPointsString = originalAttributes.points;\n        if (guideData.tag == 'polygon') {\n            var bbox = originalData.bbox;\n            bbox.cx = bbox.x + bbox.width / 2;\n            bbox.cy = bbox.y + bbox.height / 2;\n            var pointsString = originalAttributes.points;\n            var pointStrings = pointsString.split(' ');\n            var normPoints = pointStrings.map(function(p) {var xy = p.split(','); return [xy[0] - bbox.cx, xy[1] - bbox.cy]});\n            var x0 = normPoints[normPoints.length - 1][0];\n            var y0 = normPoints[normPoints.length - 1][1];\n            for (var i = 0; i < normPoints.length; i++, x0 = x1, y0 = y1) {\n                var x1 = normPoints[i][0];\n                var y1 = normPoints[i][1];\n                var dx = x1 - x0;\n                var dy = y1 - y0;\n                if (dy == 0) {\n                    continue;\n                } else {\n                    var x2 = x0 - y0 * dx / dy;\n                }\n                if (0 <= x2 && x2 < Infinity && ((x0 <= x2 && x2 <= x1) || (x1 <= x2 && x2 <= x0))) {\n                    break;\n                }\n            }\n            var newPointStrings = [[bbox.cx + x2, bbox.cy + 0].join(',')];\n            newPointStrings = newPointStrings.concat(pointStrings.slice(i));\n            newPointStrings = newPointStrings.concat(pointStrings.slice(0, i));\n            newPointsString = newPointStrings.join(' ');\n        }\n        newAttributes['d'] = 'M' + newPointsString + 'z';\n        delete newAttributes.points;\n        newData.attributes = newAttributes;\n    } else /* if (originalData.tag == 'ellipse') */ {\n        var newData = shallowCopyObject(originalData);\n        newData.tag = 'path';\n        var originalAttributes = originalData.attributes;\n        var newAttributes = shallowCopyObject(originalAttributes);\n        var cx = originalAttributes.cx;\n        var cy = originalAttributes.cy;\n        var rx = originalAttributes.rx;\n        var ry = originalAttributes.ry;\n        if (guideData.tag == 'polygon') {\n            var bbox = guideData.bbox;\n            bbox.cx = bbox.x + bbox.width / 2;\n            bbox.cy = bbox.y + bbox.height / 2;\n            var p = guideData.attributes.points.split(' ')[0].split(',');\n            var sx = p[0];\n            var sy = p[1];\n            var dx = sx - bbox.cx;\n            var dy = sy - bbox.cy;\n            var l = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n            var cosA = dx / l;\n            var sinA = -dy / l;\n        } else { // if (guideData.tag == 'path') {\n            // FIXME: add support for getting start position from path\n            var cosA = 1;\n            var sinA = 0;\n        }\n        var x1 = rx * cosA;\n        var y1 = -ry * sinA;\n        var x2 = rx * (-cosA);\n        var y2 = -ry * (-sinA);\n        var dx = x2 - x1;\n        var dy = y2 - y1;\n        newAttributes['d'] = 'M '  +  cx + ' ' + cy + ' m ' + x1 + ',' + y1 + ' a ' + rx + ',' + ry + ' 0 1,0 ' + dx + ',' + dy + ' a ' + rx + ',' + ry + ' 0 1,0 ' + -dx + ',' + -dy + 'z';\n        delete newAttributes.cx;\n        delete newAttributes.cy;\n        delete newAttributes.rx;\n        delete newAttributes.ry;\n        newData.attributes = newAttributes;\n    }\n    return newData;\n}\n\nexport function translatePointsAttribute(pointsString, x, y) {\n    var pointStrings = pointsString.split(' ');\n    var points = pointStrings.map(function(p) {return p.split(',')});\n    var points = pointStrings.map(function(p) {return [roundTo2Decimals(+x + +p.split(',')[0]), roundTo2Decimals(+y + +p.split(',')[1])]});\n    var pointStrings = points.map(function(p) {return p.join(',')});\n    var pointsString = pointStrings.join(' ');\n    return pointsString;\n}\n\nexport function translateDAttribute(d, x, y) {\n    var pointStrings = d.split(/[A-Z ]/);\n    pointStrings.shift();\n    var commands = d.split(/[^[A-Z ]+/);\n    var points = pointStrings.map(function(p) {return p.split(',')});\n    var points = pointStrings.map(function(p) {return [roundTo2Decimals(+x + +p.split(',')[0]), roundTo2Decimals(+y + +p.split(',')[1])]});\n    var pointStrings = points.map(function(p) {return p.join(',')});\n    d = commands.reduce(function(arr, v, i) {\n        return arr.concat(v, pointStrings[i]);\n    }, []).join('');\n    return d;\n}\n","import { graphviz } from \"@hpcc-js/wasm\";\nimport { graphvizSync } from \"@hpcc-js/wasm\";\nimport * as d3 from \"d3-selection\";\nimport {extractAllElementsData, extractElementData, createElementWithAttributes} from \"./element\";\nimport {convertToPathData} from \"./svg\";\nimport {pathTweenPoints} from \"./tweening\";\nimport {isEdgeElement} from \"./data\";\nimport {getEdgeTitle} from \"./data\";\n\n\nexport function initViz() {\n\n    // force JIT compilation of @hpcc-js/wasm\n    try {\n        graphviz.layout(\"\", \"svg\", \"dot\").then(() => {\n            graphvizSync().then((graphviz1) => {\n                this.layoutSync = graphviz1.layout.bind(graphviz1);\n                if (this._worker == null) {\n                    this._dispatch.call(\"initEnd\", this);\n                }\n                if (this._afterInit) {\n                    this._afterInit();\n                }\n            });\n        });\n    } catch(error) {\n    }\n    if (this._worker != null) {\n        var vizURL = this._vizURL;\n        var graphvizInstance = this;\n        this._workerPort.onmessage = function(event) {\n            var callback = graphvizInstance._workerCallbacks.shift();\n            callback.call(graphvizInstance, event);\n        }\n        if (!vizURL.match(/^https?:\\/\\/|^\\/\\//i)) {\n            // Local URL. Prepend with local domain to be usable in web worker\n            vizURL = (new window.URL(vizURL, document.location.href)).href;\n        }\n        postMessage.call(this, {type: \"layout\", dot: \"\", engine: 'dot', vizURL: vizURL}, function (event) {\n            switch (event.data.type) {\n            case \"init\":\n                break;\n            }\n        });\n        postMessage.call(this, { type: \"version\" }, function (event) {\n            switch (event.data.type) {\n                case \"version\":\n                    graphvizInstance._graphvizVersion = event.data.version;\n                    graphvizInstance._dispatch.call(\"initEnd\", this);\n                    break;\n            }\n        });\n    }\n}\n\nfunction postMessage(message, callback) {\n    this._workerCallbacks.push(callback);\n    this._workerPort.postMessage(message);\n}\n\nexport function layout(src, engine, vizOptions, callback) {\n    if (this._worker) {\n        postMessage.call(this, {\n            type: \"layout\",\n            dot: src,\n            engine: engine,\n            options: vizOptions,\n        }, function (event) {\n            callback.call(this, event.data);\n        });\n    } else {\n        try {\n            var svgDoc = this.layoutSync(src, \"svg\", engine, vizOptions);\n            callback.call(this, {type: 'done', svg: svgDoc});\n        }\n        catch(error) {\n            callback.call(this, {type: 'error', error: error.message});\n        }\n    }\n}\n\nexport default function(src, callback) {\n\n    var graphvizInstance = this;\n    var worker = this._worker;\n    var engine = this._options.engine;\n    var images = this._images;\n\n    this._dispatch.call(\"start\", this);\n    this._busy = true;\n    this._dispatch.call(\"layoutStart\", this);\n    var vizOptions = {\n        images: images,\n    };\n    if (!this._worker && this.layoutSync == null) {\n        this._afterInit = this.dot.bind(this, src, callback);\n        return this;\n    }\n    this.layout(src, engine, vizOptions, function (data) {\n        switch (data.type) {\n        case \"error\":\n            if (graphvizInstance._onerror) {\n                graphvizInstance._onerror(data.error);\n            } else {\n                throw data.error.message\n            }\n            break;\n        case \"done\":\n            var svgDoc = data.svg;\n            layoutDone.call(this, svgDoc, callback);\n            break;\n        }\n    });\n\n    return this;\n};\n\nfunction layoutDone(svgDoc, callback) {\n    var keyMode = this._options.keyMode;\n    var tweenPaths = this._options.tweenPaths;\n    var tweenShapes = this._options.tweenShapes;\n    if (typeof this._options.tweenPrecision == 'string' && this._options.tweenPrecision.includes('%')) {\n        var tweenPrecision = +this._options.tweenPrecision.split('%')[0] / 100;\n        var tweenPrecisionIsRelative = this._options.tweenPrecision.includes('%');\n    } else {\n        var tweenPrecision = this._options.tweenPrecision;\n        var tweenPrecisionIsRelative = false;\n    }\n    var growEnteringEdges = this._options.growEnteringEdges;\n    var dictionary = {};\n    var prevDictionary = this._dictionary || {};\n    var nodeDictionary = {};\n    var prevNodeDictionary = this._nodeDictionary || {};\n\n    function setKey(datum, index) {\n        var tag = datum.tag;\n        if (keyMode == 'index') {\n            datum.key = index;\n        } else if (tag[0] != '#') {\n            if (keyMode == 'id') {\n                datum.key = datum.attributes.id;\n            } else if (keyMode == 'title') {\n                var title = datum.children.find(function (childData) {\n                    return childData.tag == 'title';\n                });\n                if (title) {\n                    if (title.children.length > 0) {\n                        datum.key = title.children[0].text;\n                    } else {\n                        datum.key = '';\n                    }\n                }\n            }\n        }\n        if (datum.key == null) {\n            if (tweenShapes) {\n                if (tag == 'ellipse' || tag == 'polygon') {\n                    tag = 'path';\n                }\n            }\n            datum.key = tag + '-' + index;\n        }\n    }\n\n    function setId(datum, parentData) {\n        var id = (parentData ? parentData.id + '.' : '') + datum.key;\n        datum.id = id;\n    }\n\n    function addToDictionary(datum) {\n        dictionary[datum.id] = datum;\n    }\n\n    function calculateAlternativeShapeData(datum, prevDatum) {\n        if (tweenShapes && datum.id in prevDictionary) {\n            if ((prevDatum.tag == 'polygon' || prevDatum.tag == 'ellipse' || prevDatum.tag == 'path') && (prevDatum.tag != datum.tag || datum.tag == 'polygon')) {\n                if (prevDatum.tag != 'path') {\n                    datum.alternativeOld = convertToPathData(prevDatum, datum);\n                }\n                if (datum.tag != 'path') {\n                    datum.alternativeNew = convertToPathData(datum, prevDatum);\n                }\n            }\n        }\n    }\n\n    function calculatePathTweenPoints(datum, prevDatum) {\n        if (tweenPaths && prevDatum && (prevDatum.tag == 'path' || (datum.alternativeOld && datum.alternativeOld.tag == 'path'))) {\n            var attribute_d = (datum.alternativeNew || datum).attributes.d;\n            if (datum.alternativeOld) {\n                var oldNode = createElementWithAttributes(datum.alternativeOld);\n            } else {\n                var oldNode = createElementWithAttributes(prevDatum);\n            }\n            (datum.alternativeOld || (datum.alternativeOld = {})).points = pathTweenPoints(oldNode, attribute_d, tweenPrecision, tweenPrecisionIsRelative);\n        }\n    }\n\n    function postProcessDataPass1Local(datum, index=0, parentData) {\n        setKey(datum, index);\n        setId(datum, parentData);\n        var id = datum.id;\n        var prevDatum = prevDictionary[id];\n        addToDictionary(datum);\n        calculateAlternativeShapeData(datum, prevDatum);\n        calculatePathTweenPoints(datum, prevDatum);\n        var childTagIndexes = {};\n        datum.children.forEach(function (childData) {\n            var childTag = childData.tag;\n            if (childTag == 'ellipse' || childTag == 'polygon') {\n                childTag = 'path';\n            }\n            if (childTagIndexes[childTag] == null) {\n                childTagIndexes[childTag] = 0;\n            }\n            var childIndex = childTagIndexes[childTag]++;\n            postProcessDataPass1Local(childData, childIndex, datum);\n        });\n    }\n\n    function addToNodeDictionary(datum) {\n        var tag = datum.tag;\n        if (growEnteringEdges && datum.parent) {\n            if (datum.parent.attributes.class == 'node') {\n                if (tag == 'title') {\n                    if (datum.children.length > 0) {\n                      var child = datum.children[0];\n                      var nodeId = child.text;\n                    } else {\n                      var nodeId = '';\n                    }\n                    nodeDictionary[nodeId] = datum.parent;\n                }\n            }\n        }\n    }\n\n    function extractGrowingEdgesData(datum) {\n        var id = datum.id;\n        var tag = datum.tag;\n        var prevDatum = prevDictionary[id];\n        if (growEnteringEdges && !prevDatum && datum.parent) {\n            if (isEdgeElement(datum)) {\n                if (tag == 'path' || tag == 'polygon') {\n                    if (tag == 'polygon') {\n                        var path = datum.parent.children.find(function (e) {\n                            return e.tag == 'path';\n                        });\n                        if (path) {\n                            datum.totalLength = path.totalLength;\n                        }\n                    }\n                    var title = getEdgeTitle(datum);\n                    var child = title.children[0];\n                    var nodeIds = child.text.split('->');\n                    if (nodeIds.length != 2) {\n                        nodeIds = child.text.split('--');\n                    }\n                    var startNodeId = nodeIds[0];\n                    var startNode = nodeDictionary[startNodeId];\n                    var prevStartNode = prevNodeDictionary[startNodeId];\n                    if (prevStartNode) {\n                        var i = startNode.children.findIndex(function (element, index) {\n                            return element.tag == 'g';\n                        });\n                        if (i >= 0) {\n                            var j = startNode.children[i].children.findIndex(function (element, index) {\n                                return element.tag == 'a';\n                            });\n                            startNode = startNode.children[i].children[j];\n                        }\n                        var i = prevStartNode.children.findIndex(function (element, index) {\n                            return element.tag == 'g';\n                        });\n                        if (i >= 0) {\n                            var j = prevStartNode.children[i].children.findIndex(function (element, index) {\n                                return element.tag == 'a';\n                            });\n                            prevStartNode = prevStartNode.children[i].children[j];\n                        }\n                        var startShapes = startNode.children;\n                        for (var i = 0; i < startShapes.length; i++) {\n                            if (startShapes[i].tag == 'polygon' || startShapes[i].tag == 'ellipse' || startShapes[i].tag == 'path' || startShapes[i].tag == 'text') {\n                                var startShape = startShapes[i];\n                                break;\n                            }\n                        }\n                        var prevStartShapes = prevStartNode.children;\n                        for (var i = 0; i < prevStartShapes.length; i++) {\n                            if (prevStartShapes[i].tag == 'polygon' || prevStartShapes[i].tag == 'ellipse' || prevStartShapes[i].tag == 'path' || prevStartShapes[i].tag == 'text') {\n                                var prevStartShape = prevStartShapes[i];\n                                break;\n                            }\n                        }\n                        if (prevStartShape && startShape) {\n                            datum.offset = {\n                                x: prevStartShape.center.x - startShape.center.x,\n                                y: prevStartShape.center.y - startShape.center.y,\n                            }\n                        } else {\n                            datum.offset = {x: 0, y: 0};\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    function postProcessDataPass2Global(datum) {\n        addToNodeDictionary(datum);\n        extractGrowingEdgesData(datum);\n        datum.children.forEach(function (childData) {\n            postProcessDataPass2Global(childData);\n        });\n    }\n\n    this._dispatch.call(\"layoutEnd\", this);\n\n    var newDoc = d3.select(document.createDocumentFragment())\n        .append('div');\n\n    var parser = new window.DOMParser();\n    var doc = parser.parseFromString(svgDoc, \"image/svg+xml\");\n\n    newDoc\n        .append(function() {\n            return doc.documentElement;\n        });\n\n    var newSvg = newDoc\n      .select('svg');\n\n    var data = extractAllElementsData(newSvg);\n    this._dispatch.call('dataExtractEnd', this);\n    postProcessDataPass1Local(data);\n    this._dispatch.call('dataProcessPass1End', this);\n    postProcessDataPass2Global(data);\n    this._dispatch.call('dataProcessPass2End', this);\n    this._data = data;\n    this._dictionary = dictionary;\n    this._nodeDictionary = nodeDictionary;\n\n    this._extractData = function (element, childIndex, parentData) {\n        var data = extractAllElementsData(element);\n        postProcessDataPass1Local(data, childIndex, parentData);\n        postProcessDataPass2Global(data);\n        return data;\n    }\n    this._busy = false;\n    this._dispatch.call('dataProcessEnd', this);\n    if (callback) {\n        callback.call(this);\n    }\n    if (this._queue.length > 0) {\n        var job = this._queue.shift();\n        job.call(this);\n    }\n}\n","export default function(src, callback) {\n\n    var graphvizInstance = this;\n\n    this\n        .dot(src, render);\n\n    function render() {\n        graphvizInstance\n            .render(callback);\n    }\n\n    return this;\n};\n","import {transition} from \"d3-transition\";\nimport {active as d3_active} from \"d3-transition\";\n\nexport default function(name) {\n\n    if (name instanceof Function) {\n        this._transitionFactory = name;\n    } else {\n        this._transition = transition(name);\n    }\n\n    return this;\n};\n\nexport function active(name) {\n\n    var root = this._selection;\n    var svg = root.selectWithoutDataPropagation(\"svg\");\n    if (svg.size() != 0) {\n        return d3_active(svg.node(), name);\n    } else {\n        return null;\n    }\n};\n","export default function(options) {\n\n    if (typeof options == 'undefined') {\n        return Object.assign({}, this._options);\n    } else {\n        for (var option of Object.keys(options)) {\n            this._options[option] = options[option];\n        }\n        return this;\n    }\n};\n","export default function(width) {\n\n    this._options.width = width;\n\n    return this;\n};\n","export default function(height) {\n\n    this._options.height = height;\n\n    return this;\n};\n","export default function(scale) {\n\n    this._options.scale = scale;\n\n    return this;\n};\n","export default function(fit) {\n\n    this._options.fit = fit;\n\n    return this;\n};\n","export default function(callback) {\n\n    this._attributer = callback;\n\n    return this;\n};\n","export default function(engine) {\n\n    this._options.engine = engine;\n\n    return this;\n};\n","export default function(path, width, height) {\n\n    this._images.push({path:path, width: width, height:height})\n\n    return this;\n};\n","export default function(keyMode) {\n\n    if (!this._keyModes.has(keyMode)) {\n        throw Error('Illegal keyMode: ' + keyMode);\n    }\n    if (keyMode != this._options.keyMode && this._data != null) {\n        throw Error('Too late to change keyMode');\n    }\n    this._options.keyMode = keyMode;\n\n    return this;\n};\n","export default function(enable) {\n\n    this._options.fade = enable\n\n    return this;\n};\n","export default function(enable) {\n\n    this._options.tweenPaths = enable;\n\n    return this;\n};\n","export default function(enable) {\n\n    this._options.tweenShapes = enable;\n    if (enable) {\n        this._options.tweenPaths = true;\n    }\n\n    return this;\n};\n","export default function(enable) {\n\n    this._options.convertEqualSidedPolygons = enable;\n\n    return this;\n};\n","export default function(precision) {\n\n    this._options.tweenPrecision = precision;\n\n    return this;\n};\n","export default function(enable) {\n\n    this._options.growEnteringEdges = enable;\n\n    return this;\n};\n","export default function(typenames, callback) {\n\n    this._dispatch.on(typenames, callback);\n\n    return this;\n};\n","export default function(callback) {\n\n    this._onerror = callback\n\n    return this;\n};\n","import {format} from \"d3-format\";\n\nexport default function(enable) {\n\n    var t0 = Date.now();\n    var times = {};\n    var eventTypes = this._eventTypes;\n    var maxEventTypeLength = Math.max(...(eventTypes.map(eventType => eventType.length)));\n    for (let i = 0; i < eventTypes.length; i++) {\n        let eventType = eventTypes[i];\n        times[eventType] = [];\n        var graphvizInstance = this;\n        var expectedDelay;\n        var expectedDuration;\n        this\n            .on(eventType + '.log', enable ? function () {\n                var t = Date.now();\n                var seqNo = times[eventType].length;\n                times[eventType].push(t);\n                var string = '';\n                string += 'Event ';\n                string += format(' >2')(i) + ' ';\n                string += eventType + ' '.repeat(maxEventTypeLength - eventType.length);\n                string += format(' >5')(t - t0) + ' ';\n                if (eventType != 'initEnd') {\n                    string += format(' >5')(t - times['start'][seqNo]);\n                }\n                if (eventType == 'dataProcessEnd') {\n                    string += ' prepare                 ' + format(' >5')((t - times['layoutEnd'][seqNo]));\n                }\n                if (eventType == 'renderEnd' && graphvizInstance._transition) {\n                    string += ' transition start margin ' + format(' >5')(graphvizInstance._transition.delay() - (t - times['renderStart'][seqNo]));\n                    expectedDelay = graphvizInstance._transition.delay();\n                    expectedDuration = graphvizInstance._transition.duration();\n                }\n                if (eventType == 'transitionStart') {\n                    var actualDelay = (t - times['renderStart'][seqNo])\n                    string += ' transition delay        ' + format(' >5')(t - times['renderStart'][seqNo]);\n                    string += ' expected ' + format(' >5')(expectedDelay);\n                    string += ' diff ' + format(' >5')(actualDelay - expectedDelay);\n                }\n                if (eventType == 'transitionEnd') {\n                    var actualDuration = t - times['transitionStart'][seqNo]\n                    string += ' transition duration     ' + format(' >5')(actualDuration);\n                    string += ' expected ' + format(' >5')(expectedDuration);\n                    string += ' diff ' + format(' >5')(actualDuration - expectedDuration);\n                }\n                console.log(string);\n                t0 = t;\n            } : null);\n    }\n    return this;\n}\n","export default function() {\n\n    delete this._selection.node().__graphviz__;\n    if (this._worker) {\n        this._workerPortClose();\n    }\n    return this;\n};\n","export function rotate(x, y, cosA, sinA) {\n    // (x + j * y) * (cosA + j * sinA) = x * cosA - y * sinA + j * (x * sinA + y * cosA)\n    y = -y;\n    sinA = -sinA;\n    [x, y] = [x * cosA - y * sinA, x * sinA + y * cosA];\n    y = -y;\n    return [x, y];\n}\n","import * as d3 from \"d3-selection\";\nimport {path as d3_path} from \"d3-path\";\nimport {rotate} from \"./geometry\";\nimport {extractAllElementsData} from \"./element\";\nimport {attributeElement} from \"./element\";\nimport {insertAllElementsData} from \"./element\";\n\nexport function drawEdge(x1, y1, x2, y2, attributes, options={}) {\n    attributes = Object.assign({}, attributes);\n    if (attributes.style && attributes.style.includes('invis')) {\n        var newEdge = d3.select(null);\n    } else {\n        var root = this._selection;\n        var svg = root.selectWithoutDataPropagation(\"svg\");\n        var graph0 = svg.selectWithoutDataPropagation(\"g\");\n        var newEdge0 = createEdge.call(this, attributes);\n        var edgeData = extractAllElementsData(newEdge0);\n        var newEdge = graph0.append('g')\n            .data([edgeData]);\n        attributeElement.call(newEdge.node(), edgeData);\n        _updateEdge.call(this, newEdge, x1, y1, x2, y2, attributes, options);\n    }\n    this._drawnEdge = {\n        g: newEdge,\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        attributes: attributes,\n    };\n\n    return this;\n}\n\nexport function updateDrawnEdge(x1, y1, x2, y2, attributes={}, options={}) {\n    if (!this._drawnEdge)  {\n        throw Error('No edge has been drawn');\n    }\n    var edge = this._drawnEdge.g\n    attributes = Object.assign(this._drawnEdge.attributes, attributes);\n    this._drawnEdge.x1 = x1;\n    this._drawnEdge.y1 = y1;\n    this._drawnEdge.x2 = x2;\n    this._drawnEdge.y2 = y2;\n    if (edge.empty() && !(attributes.style && attributes.style.includes('invis'))) {\n        var root = this._selection;\n        var svg = root.selectWithoutDataPropagation(\"svg\");\n        var graph0 = svg.selectWithoutDataPropagation(\"g\");\n        var edge = graph0.append('g');\n        this._drawnEdge.g = edge;\n    }\n    if (!edge.empty())  {\n      _updateEdge.call(this, edge, x1, y1, x2, y2, attributes, options);\n    }\n\n    return this;\n}\n\nfunction _updateEdge(edge, x1, y1, x2, y2, attributes, options) {\n\n    var newEdge = createEdge.call(this, attributes);\n    var edgeData = extractAllElementsData(newEdge);\n    edge.data([edgeData]);\n    attributeElement.call(edge.node(), edgeData);\n    _moveEdge(edge, x1, y1, x2, y2, attributes, options);\n}\n\nfunction _moveEdge(edge, x1, y1, x2, y2, attributes, options) {\n\n    var shortening = options.shortening || 0;\n    var arrowHeadLength = 10;\n    var arrowHeadWidth = 7;\n    var margin = 0.1;\n\n    var arrowHeadPoints = [\n        [0, -arrowHeadWidth / 2],\n        [arrowHeadLength, 0],\n        [0, arrowHeadWidth / 2],\n        [0, -arrowHeadWidth / 2],\n    ];\n\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var length = Math.sqrt(dx * dx + dy * dy);\n    if (length == 0) {\n        var cosA = 1;\n        var sinA = 0;\n    } else {\n        var cosA = dx / length;\n        var sinA = dy / length;\n    }\n    x2 = x1 + (length - shortening - arrowHeadLength - margin) * cosA;\n    y2 = y1 + (length - shortening - arrowHeadLength - margin) * sinA;\n\n    if (attributes.URL || attributes.tooltip) {\n        var a = edge.selectWithoutDataPropagation(\"g\").selectWithoutDataPropagation(\"a\");\n        var line = a.selectWithoutDataPropagation(\"path\");\n        var arrowHead = a.selectWithoutDataPropagation(\"polygon\");\n    } else {\n        var line = edge.selectWithoutDataPropagation(\"path\");\n        var arrowHead = edge.selectWithoutDataPropagation(\"polygon\");\n    }\n\n    var path1 = d3_path();\n    path1.moveTo(x1, y1);\n    path1.lineTo(x2, y2);\n\n    line\n        .attr(\"d\", path1);\n\n    x2 = x1 + (length - shortening - arrowHeadLength) * cosA;\n    y2 = y1 + (length - shortening - arrowHeadLength) * sinA;\n    for (var i = 0; i < arrowHeadPoints.length; i++) {\n        var point = arrowHeadPoints[i];\n        arrowHeadPoints[i] = rotate(point[0], point[1], cosA, sinA);\n    }\n    for (var i = 0; i < arrowHeadPoints.length; i++) {\n        var point = arrowHeadPoints[i];\n        arrowHeadPoints[i] = [x2 + point[0], y2 + point[1]];\n    }\n    var allPoints = [];\n    for (var i = 0; i < arrowHeadPoints.length; i++) {\n        var point = arrowHeadPoints[i];\n        allPoints.push(point.join(','));\n    }\n    var pointsAttr = allPoints.join(' ');\n\n    arrowHead\n        .attr(\"points\", pointsAttr);\n\n    return this;\n}\n\nexport function moveDrawnEdgeEndPoint(x2, y2, options={}) {\n\n    if (!this._drawnEdge)  {\n        throw Error('No edge has been drawn');\n    }\n    var edge = this._drawnEdge.g;\n    var x1 = this._drawnEdge.x1;\n    var y1 = this._drawnEdge.y1;\n    var attributes = this._drawnEdge.attributes;\n\n    this._drawnEdge.x2 = x2;\n    this._drawnEdge.y2 = y2;\n    _moveEdge(edge, x1, y1, x2, y2, attributes, options);\n\n    return this\n}\n\nexport function removeDrawnEdge() {\n\n    if (!this._drawnEdge)  {\n        return this;\n    }\n\n    var edge = this._drawnEdge.g;\n\n    edge.remove();\n\n    this._drawnEdge = null;\n\n    return this\n}\n\nexport function insertDrawnEdge(name) {\n\n    if (!this._drawnEdge)  {\n        throw Error('No edge has been drawn');\n    }\n\n    var edge = this._drawnEdge.g;\n    if (edge.empty())  {\n        return this;\n    }\n    var attributes = this._drawnEdge.attributes;\n\n    var title = edge.selectWithoutDataPropagation(\"title\");\n    title\n        .text(name);\n\n    var root = this._selection;\n    var svg = root.selectWithoutDataPropagation(\"svg\");\n    var graph0 = svg.selectWithoutDataPropagation(\"g\");\n    var graph0Datum = graph0.datum();\n    var edgeData = this._extractData(edge, graph0Datum.children.length, graph0.datum());\n    graph0Datum.children.push(edgeData);\n\n    insertAllElementsData(edge, edgeData);\n\n    this._drawnEdge = null;\n\n    return this\n\n}\n\nexport function drawnEdgeSelection() {\n\n  if (this._drawnEdge) {\n    return this._drawnEdge.g;\n  } else {\n    return d3.select(null);\n  }\n\n}\n\n\nfunction createEdge(attributes) {\n    var attributesString = ''\n    for (var name of Object.keys(attributes)) {\n        if (attributes[name] != null) {\n            attributesString += ' \"' + name + '\"=\"' + attributes[name] + '\"';\n        }\n    }\n    var dotSrc = 'digraph {a -> b [' + attributesString + ']}';\n    var svgDoc = this.layoutSync(dotSrc, 'svg', 'dot');\n    var parser = new window.DOMParser();\n    var doc = parser.parseFromString(svgDoc, \"image/svg+xml\");\n    var newDoc = d3.select(document.createDocumentFragment())\n        .append(function() {\n            return doc.documentElement;\n        });\n    var edge = newDoc.select('.edge');\n\n    return edge;\n}\n","import * as d3 from \"d3-selection\";\nimport {rotate} from \"./geometry\";\nimport {extractAllElementsData} from \"./element\";\nimport {translatePointsAttribute} from \"./svg\";\nimport {translateDAttribute} from \"./svg\";\nimport {insertAllElementsData} from \"./element\";\nimport {attributeElement} from \"./element\";\nimport {roundTo2Decimals} from \"./utils\";\n\nexport function drawNode(x, y, nodeId, attributes={}, options={}) {\n    attributes = Object.assign({}, attributes);\n    if (attributes.style && attributes.style.includes('invis')) {\n        var newNode = d3.select(null);\n    } else {\n        var root = this._selection;\n        var svg = root.selectWithoutDataPropagation(\"svg\");\n        var graph0 = svg.selectWithoutDataPropagation(\"g\");\n        var newNode0 = createNode.call(this, nodeId, attributes);\n        var nodeData = extractAllElementsData(newNode0);\n        var newNode = graph0.append('g')\n            .data([nodeData]);\n        attributeElement.call(newNode.node(), nodeData);\n        _updateNode.call(this, newNode, x, y, nodeId, attributes, options);\n    }\n    this._drawnNode = {\n        g: newNode,\n        nodeId: nodeId,\n        x: x,\n        y: y,\n        attributes: attributes,\n    };\n\n    return this;\n}\n\nexport function updateDrawnNode(x, y, nodeId, attributes={}, options={}) {\n    if (!this._drawnNode)  {\n        throw Error('No node has been drawn');\n    }\n\n    var node = this._drawnNode.g\n    if (nodeId == null) {\n        nodeId = this._drawnNode.nodeId;\n    }\n    attributes = Object.assign(this._drawnNode.attributes, attributes);\n    this._drawnNode.nodeId = nodeId;\n    this._drawnNode.x = x;\n    this._drawnNode.y = y;\n    if (node.empty() && !(attributes.style && attributes.style.includes('invis'))) {\n        var root = this._selection;\n        var svg = root.selectWithoutDataPropagation(\"svg\");\n        var graph0 = svg.selectWithoutDataPropagation(\"g\");\n        var node = graph0.append('g');\n        this._drawnNode.g = node;\n    }\n    if (!node.empty())  {\n      _updateNode.call(this, node, x, y, nodeId, attributes, options);\n    }\n\n    return this;\n}\n\nfunction _updateNode(node, x, y, nodeId, attributes, options) {\n\n    var newNode = createNode.call(this, nodeId, attributes);\n    var nodeData = extractAllElementsData(newNode);\n    node.data([nodeData]);\n    attributeElement.call(node.node(), nodeData);\n    _moveNode(node, x, y, attributes, options);\n\n    return this;\n}\n\nfunction _moveNode(node, x, y, attributes, options) {\n    if (attributes.URL || attributes.tooltip) {\n        var subParent = node.selectWithoutDataPropagation(\"g\").selectWithoutDataPropagation(\"a\");\n    } else {\n        var subParent = node;\n    }\n    var svgElements = subParent.selectAll('ellipse,polygon,path,polyline');\n    var text = node.selectWithoutDataPropagation(\"text\");\n\n    if (svgElements.size() != 0) {\n        var bbox = svgElements.node().getBBox();\n        bbox.cx = bbox.x + bbox.width / 2;\n        bbox.cy = bbox.y + bbox.height / 2;\n    } else if (text.size() != 0) {\n        bbox = {\n            x: +text.attr('x'),\n            y: +text.attr('y'),\n            width: 0,\n            height: 0,\n            cx: +text.attr('x'),\n            cy: +text.attr('y'),\n        }\n    }\n    svgElements.each(function(data, index) {\n        var svgElement = d3.select(this);\n        if (svgElement.attr(\"cx\")) {\n            svgElement\n                .attr(\"cx\", roundTo2Decimals(x))\n                .attr(\"cy\", roundTo2Decimals(y));\n        } else if (svgElement.attr(\"points\")) {\n            var pointsString = svgElement.attr('points').trim();\n            svgElement\n                .attr(\"points\", translatePointsAttribute(pointsString, x - bbox.cx, y - bbox.cy));\n        } else {\n            var d = svgElement.attr('d');\n            svgElement\n                .attr(\"d\", translateDAttribute(d, x - bbox.cx, y - bbox.cy));\n        }\n    });\n\n    if (text.size() != 0) {\n        text\n            .attr(\"x\", roundTo2Decimals(+text.attr(\"x\") + x - bbox.cx))\n            .attr(\"y\", roundTo2Decimals(+text.attr(\"y\") + y - bbox.cy));\n    }\n    return this;\n}\n\nexport function moveDrawnNode(x, y, options={}) {\n\n    if (!this._drawnNode)  {\n        throw Error('No node has been drawn');\n    }\n    var node = this._drawnNode.g;\n    var attributes = this._drawnNode.attributes;\n\n    this._drawnNode.x = x;\n    this._drawnNode.y = y;\n\n    if (!node.empty())  {\n        _moveNode(node, x, y, attributes, options);\n    }\n\n    return this\n}\n\nexport function removeDrawnNode() {\n\n    if (!this._drawnNode)  {\n        return this;\n    }\n\n    var node = this._drawnNode.g;\n\n    if (!node.empty())  {\n        node.remove();\n    }\n\n    this._drawnNode = null;\n\n    return this\n}\n\nexport function insertDrawnNode(nodeId) {\n\n    if (!this._drawnNode)  {\n        throw Error('No node has been drawn');\n    }\n\n    if (nodeId == null) {\n        nodeId = this._drawnNode.nodeId;\n    }\n    var node = this._drawnNode.g;\n    if (node.empty())  {\n        return this;\n    }\n    var attributes = this._drawnNode.attributes;\n\n    var title = node.selectWithoutDataPropagation(\"title\");\n    title\n        .text(nodeId);\n    if (attributes.URL || attributes.tooltip) {\n        var ga = node.selectWithoutDataPropagation(\"g\");\n        var a = ga.selectWithoutDataPropagation(\"a\");\n        var svgElement = a.selectWithoutDataPropagation('ellipse,polygon,path,polyline');\n        var text = a.selectWithoutDataPropagation('text');\n    } else {\n        var svgElement = node.selectWithoutDataPropagation('ellipse,polygon,path,polyline');\n        var text = node.selectWithoutDataPropagation('text');\n    }\n    text\n        .text(attributes.label || nodeId);\n\n    var root = this._selection;\n    var svg = root.selectWithoutDataPropagation(\"svg\");\n    var graph0 = svg.selectWithoutDataPropagation(\"g\");\n    var graph0Datum = graph0.datum();\n    var nodeData = this._extractData(node, graph0Datum.children.length, graph0.datum());\n    graph0Datum.children.push(nodeData);\n\n    insertAllElementsData(node, nodeData);\n\n    this._drawnNode = null;\n\n    return this\n\n}\n\nexport function drawnNodeSelection() {\n\n  if (this._drawnNode) {\n    return this._drawnNode.g;\n  } else {\n    return d3.select(null);\n  }\n\n}\n\nfunction createNode(nodeId, attributes) {\n    var attributesString = ''\n    for (var name of Object.keys(attributes)) {\n        if (attributes[name] != null) {\n            attributesString += ' \"' + name + '\"=\"' + attributes[name] + '\"';\n        }\n    }\n    var dotSrc = 'graph {\"' + nodeId + '\" [' + attributesString + ']}';\n    var svgDoc = this.layoutSync(dotSrc, 'svg', 'dot');\n    var parser = new window.DOMParser();\n    var doc = parser.parseFromString(svgDoc, \"image/svg+xml\");\n    var newDoc = d3.select(document.createDocumentFragment())\n        .append(function() {\n            return doc.documentElement;\n        });\n    var node = newDoc.select('.node');\n\n    return node;\n}\n","/* This file is excluded from coverage because the intrumented code\n * translates \"self\" which gives a reference error.\n */\n\n/* istanbul ignore next */\n\nexport function workerCodeBody(port) {\n\n    self.document = {}; // Workaround for \"ReferenceError: document is not defined\" in hpccWasm\n\n    port.addEventListener('message', function(event) {\n        let hpccWasm = self[\"@hpcc-js/wasm\"];\n        if (hpccWasm == undefined && event.data.vizURL) {\n            importScripts(event.data.vizURL);\n            hpccWasm = self[\"@hpcc-js/wasm\"];\n            hpccWasm.wasmFolder(event.data.vizURL.match(/.*\\//)[0]);\n            // This is an alternative workaround where wasmFolder() is not needed\n//                                    document = {currentScript: {src: event.data.vizURL}};\n        }\n\n        if (event.data.type == \"version\") {\n            hpccWasm.graphvizVersion().then((version) => {\n                port.postMessage({\n                    type: \"version\",\n                    version: version,\n                });\n            });\n            return;\n        }\n\n        hpccWasm.graphviz.layout(event.data.dot, \"svg\", event.data.engine, event.data.options).then((svg) => {\n            if (svg) {\n                port.postMessage({\n                    type: \"done\",\n                    svg: svg,\n                });\n            } else if (event.data.vizURL) {\n                port.postMessage({\n                    type: \"init\",\n                });\n            } else {\n                port.postMessage({\n                    type: \"skip\",\n                });\n            }\n        }).catch(error => {\n            port.postMessage({\n                type: \"error\",\n                error: error.message,\n            });\n        });\n    });\n}\n\n/* istanbul ignore next */\n\nexport function workerCode() {\n\n    const port = self;\n    workerCodeBody(port);\n}\n\n/* istanbul ignore next */\n\nexport function sharedWorkerCode() {\n    self.onconnect = function(e) {\n        const port = e.ports[0];\n        workerCodeBody(port);\n        port.start();\n    }\n}\n","import * as d3 from \"d3-selection\";\nimport {dispatch} from \"d3-dispatch\";\nimport render from \"./render\";\nimport graphvizVersion from \"./graphvizVersion\";\nimport {layout} from \"./dot\";\nimport dot from \"./dot\";\nimport data from \"./data\";\nimport {initViz} from \"./dot\";\nimport renderDot from \"./renderDot\";\nimport transition from \"./transition\";\nimport {active} from \"./transition\";\nimport options from \"./options\";\nimport width from \"./width\";\nimport height from \"./height\";\nimport scale from \"./scale\";\nimport fit from \"./fit\";\nimport attributer from \"./attributer\";\nimport engine from \"./engine\";\nimport images from \"./images\";\nimport keyMode from \"./keyMode\";\nimport fade from \"./fade\";\nimport tweenPaths from \"./tweenPaths\";\nimport tweenShapes from \"./tweenShapes\";\nimport convertEqualSidedPolygons from \"./convertEqualSidedPolygons\";\nimport tweenPrecision from \"./tweenPrecision\";\nimport growEnteringEdges from \"./growEnteringEdges\";\nimport zoom from \"./zoom\";\nimport {resetZoom} from \"./zoom\";\nimport {zoomBehavior} from \"./zoom\";\nimport {zoomSelection} from \"./zoom\";\nimport {zoomScaleExtent} from \"./zoom\";\nimport {zoomTranslateExtent} from \"./zoom\";\nimport on from \"./on\";\nimport onerror from \"./onerror\";\nimport logEvents from \"./logEvents\";\nimport destroy from \"./destroy\";\nimport {drawEdge} from \"./drawEdge\";\nimport {updateDrawnEdge} from \"./drawEdge\";\nimport {moveDrawnEdgeEndPoint} from \"./drawEdge\";\nimport {insertDrawnEdge} from \"./drawEdge\";\nimport {removeDrawnEdge} from \"./drawEdge\";\nimport {drawnEdgeSelection} from \"./drawEdge\";\nimport {drawNode} from \"./drawNode\";\nimport {updateDrawnNode} from \"./drawNode\";\nimport {moveDrawnNode} from \"./drawNode\";\nimport {insertDrawnNode} from \"./drawNode\";\nimport {removeDrawnNode} from \"./drawNode\";\nimport {drawnNodeSelection} from \"./drawNode\";\nimport {workerCode} from \"./workerCode\";\nimport {sharedWorkerCode} from \"./workerCode\";\nimport {workerCodeBody} from \"./workerCode\";\nimport {graphvizVersion as hpccWasmGraphvizVersion} from \"@hpcc-js/wasm\";\n\nexport function Graphviz(selection, options) {\n    this._options = {\n        useWorker: true,\n        useSharedWorker: false,\n        engine: 'dot',\n        keyMode: 'title',\n        fade: true,\n        tweenPaths: true,\n        tweenShapes: true,\n        convertEqualSidedPolygons: true,\n        tweenPrecision: 1,\n        growEnteringEdges: true,\n        zoom: true,\n        zoomScaleExtent: [0.1, 10],\n        zoomTranslateExtent: [[-Infinity, -Infinity], [+Infinity, +Infinity]],\n        width: null,\n        height: null,\n        scale: 1,\n        fit: false,\n    };\n    if (options instanceof Object) {\n        for (var option of Object.keys(options)) {\n            this._options[option] = options[option];\n        }\n    } else if (typeof options == 'boolean') {\n        this._options.useWorker = options;\n    }\n    var useWorker = this._options.useWorker;\n    var useSharedWorker = this._options.useSharedWorker;\n    if (typeof Worker == 'undefined') {\n        useWorker = false;\n    }\n    if (typeof SharedWorker == 'undefined') {\n        useSharedWorker = false;\n    }\n    if (useWorker || useSharedWorker) {\n        var scripts = d3.selectAll('script');\n        var vizScript = scripts.filter(function() {\n            return d3.select(this).attr('type') == 'javascript/worker' || (d3.select(this).attr('src') && d3.select(this).attr('src').match(/.*\\/@hpcc-js\\/wasm/));\n        });\n        if (vizScript.size() == 0) {\n            console.warn('No script tag of type \"javascript/worker\" was found and \"useWorker\" is true. Not using web worker.');\n            useWorker = false;\n            useSharedWorker = false;\n        } else {\n            this._vizURL = vizScript.attr('src');\n            if (!this._vizURL) {\n                console.warn('No \"src\" attribute of was found on the \"javascript/worker\" script tag and \"useWorker\" is true. Not using web worker.');\n                useWorker = false;\n                useSharedWorker = false;\n            }\n        }\n    }\n    if (useSharedWorker) {\n        const url = 'data:application/javascript;base64,' + btoa(workerCodeBody.toString() + '(' + sharedWorkerCode.toString() + ')()');\n        this._worker = this._worker = new SharedWorker(url);\n        this._workerPort = this._worker.port;\n        this._workerPortClose = this._worker.port.close.bind(this._workerPort);\n        this._worker.port.start();\n        this._workerCallbacks = [];\n    }\n    else if (useWorker) {\n        var blob = new Blob([workerCodeBody.toString() + '(' + workerCode.toString() + ')()']);\n        var blobURL = window.URL.createObjectURL(blob);\n        this._worker = new Worker(blobURL);\n        this._workerPort = this._worker;\n        this._workerPortClose = this._worker.terminate.bind(this._worker);\n        this._workerCallbacks = [];\n    } else {\n        hpccWasmGraphvizVersion().then(((version) => {\n            this._graphvizVersion = version;\n        }).bind(this));\n    }\n    this._selection = selection;\n    this._active = false;\n    this._busy = false;\n    this._jobs = [];\n    this._queue = [];\n    this._keyModes = new Set([\n        'title',\n        'id',\n        'tag-index',\n        'index'\n    ]);\n    this._images = [];\n    this._translation = undefined;\n    this._scale = undefined;\n    this._eventTypes = [\n        'initEnd',\n        'start',\n        'layoutStart',\n        'layoutEnd',\n        'dataExtractEnd',\n        'dataProcessPass1End',\n        'dataProcessPass2End',\n        'dataProcessEnd',\n        'renderStart',\n        'renderEnd',\n        'transitionStart',\n        'transitionEnd',\n        'restoreEnd',\n        'end',\n        'zoom'\n    ];\n    this._dispatch = dispatch(...this._eventTypes);\n    initViz.call(this);\n    selection.node().__graphviz__ = this;\n}\n\nexport default function graphviz(selector, options) {\n    var g = d3.select(selector).graphviz(options);\n    return g;\n}\n\nGraphviz.prototype = graphviz.prototype = {\n    constructor: Graphviz,\n    engine: engine,\n    addImage: images,\n    keyMode: keyMode,\n    fade: fade,\n    tweenPaths: tweenPaths,\n    tweenShapes: tweenShapes,\n    convertEqualSidedPolygons: convertEqualSidedPolygons,\n    tweenPrecision: tweenPrecision,\n    growEnteringEdges: growEnteringEdges,\n    zoom: zoom,\n    resetZoom: resetZoom,\n    zoomBehavior: zoomBehavior,\n    zoomSelection: zoomSelection,\n    zoomScaleExtent: zoomScaleExtent,\n    zoomTranslateExtent: zoomTranslateExtent,\n    render: render,\n    layout: layout,\n    dot: dot,\n    data: data,\n    renderDot: renderDot,\n    transition: transition,\n    active: active,\n    options: options,\n    width: width,\n    height: height,\n    scale: scale,\n    fit: fit,\n    attributer: attributer,\n    on: on,\n    onerror: onerror,\n    logEvents: logEvents,\n    destroy: destroy,\n    drawEdge: drawEdge,\n    updateDrawnEdge: updateDrawnEdge,\n    moveDrawnEdgeEndPoint,\n    insertDrawnEdge,\n    removeDrawnEdge, removeDrawnEdge,\n    drawnEdgeSelection, drawnEdgeSelection,\n    drawNode: drawNode,\n    updateDrawnNode: updateDrawnNode,\n    moveDrawnNode: moveDrawnNode,\n    insertDrawnNode,\n    removeDrawnNode, removeDrawnNode,\n    drawnNodeSelection, drawnNodeSelection,\n    graphvizVersion: graphvizVersion,\n};\n","import {Graphviz} from \"../graphviz\";\nimport {timeout} from \"d3-timer\";\n\nexport default function(options) {\n\n    var g = this.node().__graphviz__;\n    if (g) {\n        g.options(options);\n        // Ensure a possible new initEnd event handler is attached before calling it\n        timeout(function () {\n            g._dispatch.call(\"initEnd\", this);\n        }.bind(this), 0);\n    } else {\n        g = new Graphviz(this, options);\n    }\n    return g;\n}\n","import * as d3 from \"d3-selection\";\n\nexport default function(name) {\n\n    return d3.select(this.size() > 0 ? this.node().querySelector(name) : null);\n}\n","import {selection} from \"d3-selection\";\nimport selection_graphviz from \"./graphviz\";\nimport selection_selectWithoutDataPropagation from \"./selectWithoutDataPropagation\";\n\nselection.prototype.graphviz = selection_graphviz;\nselection.prototype.selectWithoutDataPropagation = selection_selectWithoutDataPropagation;\n"],"names":["extractElementData","element","datum","tag","node","nodeName","text","comment","attributes","i","length","attribute","name","value","transform","baseVal","numberOfItems","matrix","consolidate","translation","x","e","y","f","scale","a","center","cx","cy","points","attr","split","map","p","xmin","Math","min","apply","xmax","max","ymin","ymax","bbox","width","height","d","shift","totalLength","getTotalLength","extractAllElementsData","children","d3","selectAll","childNodes","each","childData","select","parent","push","createElement","data","document","createTextNode","createComment","createElementNS","createElementWithAttributes","elementNode","Object","keys","attributeName","attributeValue","replaceElement","parentNode","newElementNode","newElement","insert","remove","insertElementData","key","insertAllElementsData","insertChildren","index","childrenEnter","enter","append","childrenExit","exit","merge","childTagIndexes","childTag","childIndex","attributeElement","call","currentAttributes","currentAttribute","namespaceURI","namespaceURIParts","namespace","shallowCopyObject","obj","assign","roundTo2Decimals","round","enable","_options","zoom","_zoomBehavior","createZoomBehavior","_zoomSelection","on","graphvizInstance","zoomed","event","g","svg","querySelector","_dispatch","root","_selection","size","zoomBehavior","scaleExtent","zoomScaleExtent","translateExtent","zoomTranslateExtent","interpolate","_active","translateZoomBehaviorTransform","_originalTransform","zoomTransform","getTranslatedZoomTransform","selection","oldTranslation","_translation","oldScale","_scale","newTranslation","newScale","t","translate","zoomIdentity","resetZoom","transition","extent","zoomSelection","pathTween","d1","pointInterpolators","join","pathTweenPoints","precision","precisionIsRelative","path0","path1","cloneNode","n0","n1","setAttribute","distances","dt","p0","getPointAtLength","p1","_data","isEdgeElementParent","isEdgeElement","getEdgeGroup","getEdgeTitle","find","callback","_busy","_queue","render","bind","_transitionFactory","timeout","_transition","_render","transitionInstance","fade","tweenPaths","tweenShapes","convertEqualSidedPolygons","growEnteringEdges","attributer","_attributer","nodeValue","childElementsEnter","filter","childEnter","style","options","replace","fit","viewBox","convertShape","convertPrevShape","alternativeOld","alternativeNew","prevData","prevPoints","nPrevPoints","nPoints","prevPathData","pathElement","newPathData","elementTransition","growThisPath","offset","moveThisPolygon","edgePath","p2","angle1","atan2","PI","attrTween","angle","tweenThisPath","onEnd","tween","interpolateTransformSvg","toString","nodes","jobs","_jobs","duration","_graphvizVersion","convertToPathData","originalData","guideData","newData","originalAttributes","newAttributes","newPointsString","pointsString","pointStrings","normPoints","xy","x0","y0","x1","y1","dx","dy","x2","Infinity","newPointStrings","concat","slice","rx","ry","sx","sy","l","sqrt","pow","cosA","sinA","y2","translatePointsAttribute","translateDAttribute","commands","reduce","arr","v","initViz","graphviz","layout","then","graphvizSync","graphviz1","layoutSync","_worker","_afterInit","error","vizURL","_vizURL","_workerPort","onmessage","_workerCallbacks","match","window","URL","location","href","postMessage","type","dot","engine","version","message","src","vizOptions","svgDoc","images","_images","_onerror","layoutDone","keyMode","tweenPrecision","includes","tweenPrecisionIsRelative","dictionary","prevDictionary","_dictionary","nodeDictionary","prevNodeDictionary","_nodeDictionary","setKey","id","title","setId","parentData","addToDictionary","calculateAlternativeShapeData","prevDatum","calculatePathTweenPoints","attribute_d","oldNode","postProcessDataPass1Local","forEach","addToNodeDictionary","child","nodeId","extractGrowingEdgesData","path","nodeIds","startNodeId","startNode","prevStartNode","findIndex","j","startShapes","startShape","prevStartShapes","prevStartShape","postProcessDataPass2Global","newDoc","createDocumentFragment","parser","DOMParser","doc","parseFromString","documentElement","newSvg","_extractData","job","Function","active","selectWithoutDataPropagation","d3_active","option","_keyModes","has","Error","typenames","t0","Date","now","times","eventTypes","_eventTypes","maxEventTypeLength","eventType","seqNo","string","format","repeat","delay","expectedDelay","expectedDuration","actualDelay","actualDuration","console","log","__graphviz__","_workerPortClose","rotate","drawEdge","newEdge","graph0","newEdge0","createEdge","edgeData","_updateEdge","_drawnEdge","updateDrawnEdge","edge","empty","_moveEdge","shortening","arrowHeadLength","arrowHeadWidth","margin","arrowHeadPoints","tooltip","line","arrowHead","d3_path","moveTo","lineTo","point","allPoints","pointsAttr","moveDrawnEdgeEndPoint","removeDrawnEdge","insertDrawnEdge","graph0Datum","drawnEdgeSelection","attributesString","dotSrc","drawNode","newNode","newNode0","createNode","nodeData","_updateNode","_drawnNode","updateDrawnNode","_moveNode","subParent","svgElements","getBBox","svgElement","trim","moveDrawnNode","removeDrawnNode","insertDrawnNode","ga","label","drawnNodeSelection","workerCodeBody","port","self","addEventListener","hpccWasm","undefined","importScripts","wasmFolder","graphvizVersion","workerCode","sharedWorkerCode","onconnect","ports","start","Graphviz","useWorker","useSharedWorker","Worker","SharedWorker","scripts","vizScript","warn","url","btoa","close","blob","Blob","blobURL","createObjectURL","terminate","hpccWasmGraphvizVersion","Set","dispatch","selector","prototype","constructor","addImage","renderDot","onerror","logEvents","destroy","selection_graphviz","selection_selectWithoutDataPropagation"],"mappings":"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"}